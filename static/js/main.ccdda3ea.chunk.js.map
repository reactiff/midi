{"version":3,"sources":["../../src/midiContext.ts","../../src/initialize/frequencyMap.ts","../../src/initialize/processMidiMessage.ts","../../src/Settings/getControlId.ts","../../src/initialize/DeviceController.tsx","../../src/initialize/index.ts","../../src/initialize/requestMidiDevices.ts","../../node_modules/@reactiff/ui-core/dist/index.modern.js","../../src/Settings/MIDIPad.tsx","../../src/Settings/MIDISelector.tsx","../../src/Settings/layout/HorizontalControls.tsx","../../src/Settings/layout/HorizontalNamedControlGroups.tsx","../../src/Settings/layout/HorizontalStack.tsx","../../src/Settings/layout/DeviceLayout.tsx","../../src/Settings/layout/SettingsLayout.tsx","../../src/Settings/index.tsx","../../src/MidiProvider.tsx","../../src/MidiIndicator.tsx","../../src/ColorPaletteEditor/Throttle.ts","../../src/ColorPaletteEditor/w3color.js","../../src/ColorPaletteEditor/processMidiEvent.ts","../../src/ColorPaletteEditor/midiManager.tsx","../../src/ColorPaletteEditor/midiColorLayoutConfig.ts","../../src/ColorPaletteEditor/ColorTable.tsx","../../src/detachable/index.tsx","../../src/ColorPaletteEditor/index.tsx","DetachablePaletteEditor.tsx","App.tsx","index.tsx"],"names":["midiContext","register","Error","target","unregister","frequencyMap","Array","length","note","res","i","A_FREQ","event","command","velocity","frequency","handlerName","group","name","type","channel","number","change","fstr","value","o","getControlId","ctl","format","t","getStorageKey","controller","layout","eventTarget","Object","DeviceController","enabled","connected","sustained","initialized","midiMap","fromMidi","fromControl","device","this","uuid","onMIDIMessage","bind","bindEventTarget","key","blob","localStorage","object","JSON","rev","loadMappings","beginMapping","rerender","activeMapping","cancelMapping","finalizeMapping","am","message","controlId","rev1","saveMappings","getMappedEventData","disconnect","eventId","mapping","fn","processMidiMessage","enable","items","d","initialize","onStateChange","found","changes","newList","c","e","newState","console","Promise","navi","devices","midiAccess","resolve","detectedDevices","_extends","assign","arguments","source","prototype","hasOwnProperty","call","apply","_objectWithoutPropertiesLoose","excluded","sourceKeys","keys","indexOf","_arrayLikeToArray","arr","len","arr2","_createForOfIteratorHelperLoose","allowArrayLike","it","Symbol","iterator","next","isArray","minLen","n","toString","slice","constructor","from","test","_unsupportedIterableToArray","done","TypeError","attributeMap","bgColor","classMap","scrollableX","scrollableY","borderBox","createStyle","x","bag","style","_ref","resolvedKey","Reflect","has","hex","getOrMakeStyle","createClass","string","resolvedClass","replace","trim","split","map","token","toLowerCase","join","classes","push","switches","absolute","alignStart","alignCenter","alignEnd","alignStretch","alignBaseline","alignAuto","alignSelfStart","alignSelfCenter","alignSelfEnd","alignSelfStretch","alignSelfBaseline","anchorBottom","anchorLeft","anchorRight","anchorTop","beveled","block","centerX","centerXY","centerY","clickable","coverImage","fill","fixed","fullWidth","fullWidthAlways","grow","hidden","horizontal","inline","inlineBlock","justifyStart","justifyCenter","justifyEnd","mobileCenter","mobileColumn","mobileOnly","noBr","noBreak","noMargin","noMobile","noOverflow","noPadding","noSelect","noTransform","noWrap","opaque","overlay","relative","round","rounded","scrollable","shrink","small","smaller","solid","spaced","sticky","tall","translucent","vertical","wide","styleAttributes","backgroundColor","backgroundImage","backgroundRepeat","backgroundPosition","backgroundSize","border","borderTop","borderRight","borderBottom","borderLeft","borderRadius","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius","color","cursor","dataProps","fontSize","fontStyle","fontWeight","innerProps","lineHeight","margin","marginTop","marginRight","marginBottom","marginLeft","minHeight","minWidth","opacity","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","pseudo","textAlign","textTransform","title","width","height","top","right","bottom","left","fnOrValue","element","param","_excluded","_excluded2","useStyleDirectives","directives","ownProps","tagName","id","children","className","ref","data","css","onBlur","onClick","onChange","onFocus","onMouseUp","onMouseDown","onMouseMove","other","ignoredProps","utilizedKeys","forEach","debug","props","pseudoStyles","reduce","acc","_Object$assign","s","fullKey","usedStyles","makeStyles","events","attr","_len","baseClasses","_key","result","root","_excluded$1","_useStyleDirectives","createElement","_excluded$2","_excluded$3","_excluded$4","maxWidth","media","_excluded2$1","_excluded3","_useStyleDirectives2","_useStyleDirectives3","divRowCol","__proto__","div","row","col","forwardRef","Slide","direction","defaultProps","angle","parseColor","tokens","parts","colorFromString","createStripes","options","params","colors","steps","total","step","colorCount","outSegments","distance","index","nextIndex","toFixed","size","isNumber$1","generateStripesStyle","generateLinearGradientStyle","g","_color$percentage","percentage","parseColor$1","repeat","tuple","BoxShadowDefaults","xOffset","yOffset","blur","spread","rgba","r","b","a","createBoxShadow","colorString","inset","isClient","window","gridSizeValues","xs","sm","md","lg","xl","xxl","xxxl","breakpointSystem","bootstrap","material","getGridSize","system","_step","_iterator","innerWidth","makeGridSizeResult","code","getWindowHeight","innerHeight","getWindowWidth","getScrollPosition","document","body","scrollTop","documentElement","windowEventHandler","setState","readValue","compare","handleEvent","ticking","requestAnimationFrame","addEventListener","removeEventListener","createLinearGradient","useGridSize","current","_useState","state","gridSize","useWindowWidth","_useState3","useWindowHeight","_useState2","useWindowSize","_useState4","useScrollPosition","_useState5","_excluded$8","TabPanel","active","role","dependencies","activeKey","keyForItem","elementForItem","item","_React$useState","selectedKey","setActiveKey","internalStyle","createStyles","tabStrip","orientation","label","filter","trimmed","toUpperCase","substring","Tab","tabContent","isActiveTab","verticalLayout","horizontalLayout","Fragment$1","isVertical","_excluded$9","MIDIPad","isActive","setRevision","useState","useCallback","mappedControl","mapped","cssBase","cssKnob","borderColor","React","HorizontalControls","scope","control","HorizontalNamedControlGroups","rows","controls","prevGroup","caption","HorizontalStack","eventHandler","config","inverted","channelNumbers","HGlobals","annotation","channelControls","DeviceLayout","bgStyle","dgStyle","boxShadow","SettingsLayout","midi","useContext","MidiSettings","quitNow","onEscapeKey","useEffect","MidiProvider","controllers","setControllers","settingsOpen","setSettingsOpen","mutable","targetMap","targetStack","bindEventTargets","cc","_t","tgt","context","toggleSettings","getEventTarget","MidiIndicator","Throttle","invokeWithAnimationFrame","_this","dispatch","W3Color","obj","colornames","colorhexs","y","isNaN","typ","arrlength","red","green","blue","hue","sat","lightness","whiteness","blackness","cyan","magenta","yellow","black","ncol","valid","Number","Math","parseInt","rgb","hslToRgb","hwbToRgb","white","h","letter","percent","ncolToRgb","m","k","cmykToRgb","ncs","chroma","bc","black1","chroma1","red1","factor1","blue1","green1","blue2","factor2","red2","green2","max","grey","ncsToRgb","match","getColorArr","isHex","colorObject","toColorObject","toRgbString","toRgbaString","toHwbString","toHwbStringDecimal","toHwbaString","toHslString","toHslStringDecimal","toHslaString","toCmykString","toCmykStringDecimal","toNcolString","toNcolStringDecimal","toNcolaString","toName","toHexString","toHex","toRgb","toHsl","l","toHwb","w","toCmyk","toNcol","isDark","saturate","desaturate","lighter","darker","hsl","min","maxcolor","rgbToHsl","hwb","bl","rgbToHwb","cmyk","rgbToCmyk","hueToNcol","light","hueToRgb","t1","t2","rgbArr","tot","processMidiEvent","getMParam","paramArray","pIndex","defaultValue","newColor","factor","decimalPlaces","undefined","mod","getModelSpec","ns","_state","v","keyModifier","getKeyModifier","v1","roundTo","minVal","isNullOrUndefined","maxVal","mx","clamp","modulate","inputString","getColorString","getColor","updateModel","createColor","keyState","requiredDecimalPlaces","model","updateRgbaModel","updateCmykModel","updateHslModel","updateHwbModel","nn","pct","int","colorWithAlpha","createMIDIColorManager","selectedColor","hsla","hwba","latest","shiftKey","ctrlKey","altKey","updateColor","createState","midiTarget","throttle","onParameterChange","onTouchStart","onTouchEnd","onAfterTouch","createMidiTarget","keyboardHandler","createKeyboardHandler","selectColor","midiColorLayoutConfig","revision","ColorTable","palette","onSelect","ColorSwatch","displayName","ls","globalThis","DetachableContext","detached","useInline","lexicon","actionWord","actionDescription","DetachHtmlIcon","transform","DetachToggleButton","stateString","position","handleTrigger","aria-label","Detachable","idString","stored","saveState","windowProps","setWindowProps","childWindow","setChildWindow","destroyChildWindow","wprops","savedState","json","detach","handleWindowLoad","handleWindowUnload","detachableStyle","originalHidden","onToggle","onUnload","onLoad","NewWindow","remoteContainer","setRemoteContainer","useRef","winOptionValue","winOption","createPortal","remoteDiv","styles","elementStyles","linkedStyles","rules","el","tcss","linkedStyle","link","transferStyles","transferScripts","scripts","script","scriptTag","observeStyleMutations","awaitNewWindow","ReactDOM","newWindow","targetNode","MutationObserver","mutationsList","mutation","newStyleElement","rule","observer","childList","ColorPaletteEditor","detachable","_render","dcx","setPalette","colorKey","setColorKey","midiManager","useMemo","DetachablePaletteEditor","primaryColor","secondaryColor","danger","background","text","p","DesignPreview","ui","paragraphs","App","to","path","render","getElementById"],"mappings":"oVAQMA,EAAc,kBAAiC,CACjDC,SAAU,YACN,MAAM,IAAIC,MAAM,iBAAiBC,EAA3B,GAAN,+GAEJC,WAAY,YAAc,MAAM,IAAIF,MAAV,O,8oCCN9B,IAAMG,EAA6BC,MAAA,KAAW,CAACC,OAAQ,KAApB,mBAEzB,gBACN,IAR4BC,EAU5B,OADAC,EADUC,EAAV,IAR4BF,EASIE,EAAhCD,EARME,MAAD,YAAwBH,EAAD,GAA9B,KASE,IALJ,ICDMI,EAAmB,CACvBC,QADuB,EAEvBL,KAFuB,EAGvBM,SAHuB,EAIvBC,UAJuB,EAMvBC,YANuB,GAQvBC,MARuB,GASvBC,KATuB,GAUvBC,KAVuB,GAWvBC,QAXuB,EAYvBC,OAZuB,EAavBC,OAAQ,GChBV,SAASC,EAAKC,EAAd,GACI,OAAIA,eAAJ,IAAsBA,EACdC,GAAKA,EAAT,OAA0BA,SAAP,GACnB,GAEAA,GAAKA,EAAT,OAA0BA,SAAP,GACnB,EAGJ,SAAgBC,EAAaC,GACzB,MAAU,MAAM,IAAN,MACV,MAAO,CACHJ,EAAKI,EADF,MAEHJ,EAAKI,EAFF,OAGHJ,EAAKI,EAHF,MAIHJ,EAAKI,EAAD,QAAc,CAAEC,OAAQ,mBAAO,EAAM,KAAN,EAAP,MAC5BL,EAAKI,EALF,iBAME,SAAAE,GAAC,aANH,KAAP,KCFJ,SAASC,EAAcC,EAAvB,GACE,IAAMC,EAASC,iBAAf,aACA,OAAUF,EAAV,mBAA2CE,EAA3C,GFQFC,e,IEcqBC,aAcnB,gBATA,KAAAC,SAAA,EACA,KAAAC,WAAA,EACA,KAAAC,UAAA,GACA,KAAAC,aAAA,EAIA,KAAAC,QAxCO,CAAEC,SAAF,GAAgBC,YAAa,IA8ClC,IAAMxB,EAAOyB,mCAAb,KACAC,KAAA,cACAA,KAAA,cACAA,KAAA,GAAUC,cACVF,eAAuBC,KAAvBD,GACAA,gBAAuBC,KAAKE,cAAcC,KAA1CJ,MACAC,KAAA,SACAA,KAAA,wBAAiBD,Q,2BAInBK,4BACEJ,KAAA,cACAA,KAAA,QAnDJ,SAAsBb,EAAtB,GACE,MAAkB,MATX,CAAEU,SAAF,GAAgBC,YAAa,IAUpC,IAAMO,EAAOnB,EAAcC,EAA3B,GACMmB,EAAOC,qBAAb,GACA,MAAW,MAZJ,CAAEV,SAAF,GAAgBC,YAAa,IAapC,IAAMU,EAASC,WAAf,GACMC,EAAMF,YAAZ,EAEA,OADanB,mBAAb,GACA,EAhBO,CAAEQ,SAAF,GAAgBC,YAAa,IAiBpC,EA0CiBa,CAAaX,KAA5B,I,EAGFY,yBACE,IAAMC,EAAWb,KAAKc,cAAgBd,KAAKc,cAA1B,SAAmD,aACpEd,KAAA,gBACAA,KAAA,yBACAa,K,EAGFE,yBACE,IAAMF,EAAWb,KAAKc,cAAgBd,KAAKc,cAA1B,SAAmD,aACpEd,KAAA,qBACAa,K,EAGFG,4BAEE,IAAMC,EAAKjB,KAAX,cAEMxB,EAAUyC,UAAhB,QACMxC,EAASwC,UAAf,OAEA,EAA8BA,EAA9B,QAAQ5C,EAAR,QAAeE,EAAf,OAAqBD,EAArB,OAEQL,EAAkBiD,EAA1B,GAAiBtD,EAASsD,EAA1B,GAGAlB,KAAA,iBAAyB/B,EAAzB,OAA8C,CAAEM,KAAF,EAAQD,KAAR,EAAcG,OAAd,EAAsBD,QAAtB,EAA+BH,SAG7E,IAAM8C,EAAYrC,EAAamC,EAA/B,SACAjB,KAAA,uBAAsC,CAAE/B,QAAF,EAAWL,QAxErD,SAAsBuB,EAAtB,GACE,IAAMkB,EAAMnB,EAAcC,EAA1B,GACMiC,EAAO/B,mBAAb,EACA,IACEF,sBAEFoB,uBAA0BE,eAAetB,EAAzCoB,UAoEEc,CAAarB,KAAMA,KAAnBqB,aAEA,IAAMR,EAAWb,KAAKc,cAAgBd,KAAKc,cAA1B,SAAmD,aACpEd,KAAA,qBACAa,K,EAIFS,+BACE,KACA,OAAOtB,KAAKJ,QAAQE,YAApB,I,EAOFyB,6BACSvB,KAAKD,OAAZ,cACAC,KAAA,c,EAGFE,0BAEE,GAAKF,KAAL,aACKA,KAAL,QACA,OAAIA,KAAJ,cAA+BA,KAAKgB,gBAAgBE,EAA5B,WFvG5B,SAAmC/B,EAA8B+B,GAE/DlD,UAAgBkD,OAAhBlD,GACAA,OAAakD,OAAblD,GACAA,WAAiBkD,OAAjBlD,GAEA,IAAMwD,EAAaxD,EAAN,YAAuBA,EAApC,KAGMyD,EAAUtC,mBAAhB,GAEA,KAUE,OARAnB,cACAA,WACAA,SAAeyD,EAAfzD,OACAA,OAAayD,EAAbzD,KACAA,OAAayD,EAAbzD,KACAA,QAAcyD,EAAdzD,MACAA,UAAgByD,EAAhBzD,QAEQyD,EAAR,MACE,eACEzD,kCACAA,SAAeA,WAAfA,GACA,MACF,UACMA,WAAJ,EACOmB,YAAL,GAKEnB,8BAJAmB,kBACAnB,sCAOKmB,YAAP,GACAnB,iCAcN,OANAA,WACAA,UACAA,UACAA,YACAA,WACAA,WACQA,EAAR,SACE,SACMA,WAAJ,EACEA,yBAEAA,0BAEFA,YAAkBP,EAAaO,EAA/BA,MACA,MACF,SACEA,YAAkBP,EAAaO,EAA/BA,MACAA,0BACA,MAEF,QACEA,+BAIN,IAAM0D,EAAKvC,cAAwBnB,EAAnC,aACA0D,GAAMA,EAANA,GEgCEC,CAAmB3B,KAAnB2B,I,EAGFC,mB,WACE5B,KAAA,4BAAgC,SAAA6B,GAAK,OACnCA,EAAA,KAAU,SAAAC,GAIN,OAHIA,OAAS,EAAb,KACIA,aAEJ,S,EArGWvC,GC9BCwC,EAAtB,gB,wBCLmCC,EDOkB,YAE7C,IAAIC,GAAJ,EACIC,EAAJ,EACMC,EAAU/E,EAAA,iBAA4B,YACxC,GAAIgF,OAASC,OAAb,aAAkC,CAC9BJ,KACA,IAAMK,EAAN,cAAiBD,aACbD,cAAJ,IACIF,IACAE,eAIR,OAAKA,EAAL,UAIA,UAHWA,SAAP,cACA,SAZQ,QAeN,yBAEV,IACIG,gCACAJ,OAAa,IAAI,EAAiBE,EAArB,KAAbF,IACAD,KAGAA,EAAJ,GACI9E,qBCjCD,IAAIoF,SAAa,cAEpB,IAAMC,EAAN,UAEIA,EAAJ,mBACIA,4BAGI,YAKI,IAFA,IAEA,EADMC,EAAN,GACA,IAFeC,SAAf,YAEA,aAA2B,KAAlB5C,EAAkB,QACvB2C,UAGJ,IACIC,mBAGJC,QAGJ,kBAAML,YAAN,+CDnBoC,eAA1CM,GAiCN,IAAMH,EAAUG,EAAA,QACJ,oCAAYf,UADR,KAEP,mBAAY,IAAI,EAAJ,EAAZ,MAET1E,uBAvCJ,MAAAiF,GAAA,sBAAAA,G,ICLmCL,GCyBnC,SAASc,IAeP,OAdAA,EAAWxD,OAAOyD,QAAU,SAAUxF,GACpC,IAAK,IAAIO,EAAI,EAAGA,EAAIkF,UAAUrF,OAAQG,IAAK,CACzC,IAAImF,EAASD,UAAUlF,GAEvB,IAAK,IAAIuC,KAAO4C,EACV3D,OAAO4D,UAAUC,eAAeC,KAAKH,EAAQ5C,KAC/C9C,EAAO8C,GAAO4C,EAAO5C,IAK3B,OAAO9C,IAGO8F,MAAMrD,KAAMgD,WAG9B,SAASM,EAA8BL,EAAQM,GAC7C,GAAc,MAAVN,EAAgB,MAAO,GAC3B,IAEI5C,EAAKvC,EAFLP,EAAS,GACTiG,EAAalE,OAAOmE,KAAKR,GAG7B,IAAKnF,EAAI,EAAGA,EAAI0F,EAAW7F,OAAQG,IACjCuC,EAAMmD,EAAW1F,GACbyF,EAASG,QAAQrD,IAAQ,IAC7B9C,EAAO8C,GAAO4C,EAAO5C,IAGvB,OAAO9C,EAYT,SAASoG,EAAkBC,EAAKC,IACnB,MAAPA,GAAeA,EAAMD,EAAIjG,UAAQkG,EAAMD,EAAIjG,QAE/C,IAAK,IAAIG,EAAI,EAAGgG,EAAO,IAAIpG,MAAMmG,GAAM/F,EAAI+F,EAAK/F,IAAKgG,EAAKhG,GAAK8F,EAAI9F,GAEnE,OAAOgG,EAGT,SAASC,EAAgClF,EAAGmF,GAC1C,IAAIC,EAAuB,qBAAXC,QAA0BrF,EAAEqF,OAAOC,WAAatF,EAAE,cAClE,GAAIoF,EAAI,OAAQA,EAAKA,EAAGb,KAAKvE,IAAIuF,KAAKjE,KAAK8D,GAE3C,GAAIvG,MAAM2G,QAAQxF,KAAOoF,EArB3B,SAAqCpF,EAAGyF,GACtC,GAAKzF,EAAL,CACA,GAAiB,kBAANA,EAAgB,OAAO8E,EAAkB9E,EAAGyF,GACvD,IAAIC,EAAIjF,OAAO4D,UAAUsB,SAASpB,KAAKvE,GAAG4F,MAAM,GAAI,GAEpD,MADU,WAANF,GAAkB1F,EAAE6F,cAAaH,EAAI1F,EAAE6F,YAAYpG,MAC7C,QAANiG,GAAqB,QAANA,EAAoB7G,MAAMiH,KAAK9F,GACxC,cAAN0F,GAAqB,2CAA2CK,KAAKL,GAAWZ,EAAkB9E,EAAGyF,QAAzG,GAe8BO,CAA4BhG,KAAOmF,GAAkBnF,GAAyB,kBAAbA,EAAElB,OAAqB,CAChHsG,IAAIpF,EAAIoF,GACZ,IAAInG,EAAI,EACR,OAAO,WACL,OAAIA,GAAKe,EAAElB,OAAe,CACxBmH,MAAM,GAED,CACLA,MAAM,EACNlG,MAAOC,EAAEf,OAKf,MAAM,IAAIiH,UAAU,yIAGtB,IAAIC,EAAe,CACjBC,QAAS,mBAQX,IAAIC,EAAW,CACbC,YAAa,0BACbC,YAAa,0BACbC,UAAW,cAqDb,SAASC,EAAYC,GAEnB,OADAjG,OAAOyD,OAAOwC,EAAEC,IAAIC,MAPtB,SAAwBF,GACtB,IAAIG,EAxD8B9G,EA0D9B+G,EAAcC,QAAQC,IAAIb,EAAcO,EAAElF,KAAO2E,EAAaO,EAAElF,KAAOkF,EAAElF,IAC7E,OAAOqF,EAAO,IAASC,IA3DW/G,EA2DuC2G,EAAE3G,QAzDpEA,EAAMkH,IAAMlH,EAAMkH,MADNlH,EA0DgE8G,EAGxDK,CAAeR,KACnC,EAET,SAASS,EAAYT,GACnB,IA7C+CU,EA6C3CC,EAAgBN,QAAQC,IAAIX,EAAUK,EAAElF,KAAO6E,EAASK,EAAElF,MA7Cf4F,EA6CuCV,EAAElF,KA3C3E4F,EAAOE,QAAQ,YAAa,OAAOC,OAAOC,MAAM,KAC/CC,KAAI,SAAUC,GAC1B,OAAOA,EAAMH,OAAOI,iBACnBC,KAAK,KAJYR,EA8CpB,OADAV,EAAEC,IAAIkB,QAAQC,KAAKT,IACZ,EAGT,IAAIU,EAAW,CACbC,UAAU,EACVC,YAAY,EACZC,aAAa,EACbC,UAAU,EACVC,cAAc,EACdC,eAAe,EACfC,WAAW,EACXC,gBAAgB,EAChBC,iBAAiB,EACjBC,cAAc,EACdC,kBAAkB,EAClBC,mBAAmB,EACnBC,cAAc,EACdC,YAAY,EACZC,aAAa,EACbC,WAAW,EACXC,SAAS,EACTC,OAAO,EACPzC,WAAW,EACX0C,SAAS,EACTC,UAAU,EACVC,SAAS,EACTC,WAAW,EACXC,YAAY,EACZC,MAAM,EACNC,OAAO,EACPC,WAAW,EACXC,iBAAiB,EACjBC,MAAM,EACNC,QAAQ,EACRC,YAAY,EACZC,QAAQ,EACRC,aAAa,EACbC,cAAc,EACdC,eAAe,EACfC,YAAY,EACZC,cAAc,EACdC,cAAc,EACdC,YAAY,EACZC,MAAM,EACNC,SAAS,EACTC,UAAU,EACVC,UAAU,EACVC,YAAY,EACZC,WAAW,EACXC,UAAU,EACVC,aAAa,EACbC,QAAQ,EACRC,QAAQ,EACRC,SAAS,EACTC,UAAU,EACVC,OAAO,EACPC,SAAS,EACTC,YAAY,EACZ9E,aAAa,EACbC,aAAa,EACb8E,QAAQ,EACRC,OAAO,EACPC,SAAS,EACTC,OAAO,EACPC,QAAQ,EACRC,QAAQ,EACRC,MAAM,EACNC,aAAa,EACbC,UAAU,EACVC,MAAM,GAGJC,EAAkB,CACpBC,gBAAiBvF,EACjBL,QAASK,EACTwF,gBAAiBxF,EACjByF,iBAAkBzF,EAClB0F,mBAAoB1F,EACpB2F,eAAgB3F,EAChB4F,OAAQ5F,EACR6F,UAAW7F,EACX8F,YAAa9F,EACb+F,aAAc/F,EACdgG,WAAYhG,EACZiG,aAAcjG,EACdkG,oBAAqBlG,EACrBmG,qBAAsBnG,EACtBoG,uBAAwBpG,EACxBqG,wBAAyBrG,EACzBsG,MAAOtG,EACPuG,OAAQvG,EACRwG,UAAWxG,EACXyG,SAAUzG,EACV0G,UAAW1G,EACX2G,WAAY3G,EACZ4G,WAAY5G,EACZ6G,WAAY7G,EACZ8G,OAAQ9G,EACR+G,UAAW/G,EACXgH,YAAahH,EACbiH,aAAcjH,EACdkH,WAAYlH,EACZmH,UAAWnH,EACXoH,SAAUpH,EACVqH,QAASrH,EACTsH,QAAStH,EACTuH,WAAYvH,EACZwH,aAAcxH,EACdyH,cAAezH,EACf0H,YAAa1H,EACb2H,OAAQ3H,EACR4H,UAAW5H,EACX6H,cAAe7H,EACf8H,MAAO9H,EACP+H,MAAO/H,EACPgI,OAAQhI,EACRiI,IAAKjI,EACLkI,MAAOlI,EACPmI,OAAQnI,EACRoI,KAAMpI,GA+BJqI,EAAY,SAAmBC,EAASC,GAC1C,MAAuB,oBAAZD,EACFA,EAAQC,GAGVD,GA6CLE,EAAY,CAAC,KAAM,WAAY,QAAS,YAAa,MAAO,OAAQ,SAAU,aAAc,MAAO,SAAU,UAAW,WAAY,UAAW,YAAa,cAAe,eAC3KC,EAAa,CAAC,aAElB,SAASC,EAAmBC,EAAYC,EAAUC,GAChD,IAAIC,EAAKH,EAAWG,GAChBC,EAAWJ,EAAWI,SACtB5I,EAAQwI,EAAWxI,MACnB6I,EAAYL,EAAWK,UACvBC,EAAMN,EAAWM,IACjBC,EAAOP,EAAWO,KAClBvB,EAASgB,EAAWhB,OACpBf,EAAa+B,EAAW/B,WACxBuC,EAAMR,EAAWQ,IACjBC,EAAST,EAAWS,OACpBC,EAAUV,EAAWU,QACrBC,EAAWX,EAAWW,SACtBC,EAAUZ,EAAWY,QACrBC,EAAYb,EAAWa,UACvBC,EAAcd,EAAWc,YACzBC,EAAcf,EAAWe,YACzBC,EAAQ3L,EAA8B2K,EAAYH,GAElDoB,EAAe,CACjBd,GAAIA,EACJC,SAAUA,EACV5I,MAAOA,EACP6I,UAAWA,EACXC,IAAKA,EACLC,KAAMA,EACNvB,OAAQA,EACRf,WAAYA,EACZgC,SAAUA,EACVO,IAAKA,EACLC,OAAQA,EACRC,QAASA,EACTC,SAAUA,EACVC,QAASA,EACTC,UAAWA,EACXC,YAAaA,EACbC,YAAaA,GAEXG,EAAe,GACf1L,EAAOnE,OAAOmE,KAAKwL,GACnBzJ,EAAM,CACRC,MAAO3C,EAAS,GAAI2L,EAAKhJ,GACzBiB,QAAS,IAEXjD,EAAK2L,SAAQ,SAAU/O,GACrB,IAAKuF,QAAQC,IAAIqJ,EAAc7O,GAAM,CACnC,IAAIzB,EAAQqP,EAAW5N,GAEvB,GAAIuF,QAAQC,IAAIe,EAAUvG,GAQxB,OAPA2F,EAAY,CACVR,IAAKA,EACLnF,IAAKA,EACLzB,MAAOA,EACPyQ,OAAO,SAETF,EAAaxI,KAAKtG,GAIpB,GAAIuF,QAAQC,IAAI+E,EAAiBvK,GAO/B,OANAuK,EAAgBvK,GAAK,CACnBmF,IAAKA,EACLnF,IAAKA,EACLzB,MAAOA,SAETuQ,EAAaxI,KAAKtG,IAIN,IAAVzB,GACFoH,EAAY,CACVR,IAAKA,EACLnF,IAAKA,EACLzB,MAAOA,EACPyQ,OAAO,QAMf,IAAIC,EAAQxM,EAAS,GAAImM,GAEzBE,EAAaC,SAAQ,SAAU/O,UACtBiP,EAAMjP,MA4Bf,IA1BA,IAAIkP,EAAejQ,OAAOmE,KAAKwK,EAAWhB,QAAU,IAAIuC,QAAO,SAAUC,EAAKpP,GAC5E,IAAIqP,EAEAC,EAAI1B,EAAWhB,OAAO5M,GACtBuP,EAAqB,MAAXvP,EAAI,GAAaA,EAAM,MAAQA,EAC7C,OAAOf,OAAOyD,OAAO0M,IAAMC,EAAiB,IAAmBE,GAAWD,EAAGD,MAC5E,IACCG,EAAa,OAAAC,EAAA,IAAW,WAC1B,IAAIH,EAAI,GAGR,OAFIrQ,OAAOmE,KAAK+B,EAAIC,OAAO9H,SAAQgS,EAAEnK,IAAMA,EAAIC,OAC3CnG,OAAOmE,KAAK8L,GAAc5R,SAAQgS,EAAE1C,OAASsC,GAC1CI,IAJQ,GAMbI,EAAS,CACXrB,OAAQA,EACRC,QAASA,EACTC,SAAUA,EACVC,QAASA,EACTC,UAAWA,EACXC,YAAaA,EACbC,YAAaA,GAGXlD,EAAYmC,EAAWnC,UACvBkE,EAAO1M,EAA8B2K,EAAYF,GAE5CkC,EAAOjN,UAAUrF,OAAQuS,EAAc,IAAIxS,MAAMuS,EAAO,EAAIA,EAAO,EAAI,GAAIE,EAAO,EAAGA,EAAOF,EAAME,IACzGD,EAAYC,EAAO,GAAKnN,UAAUmN,GAGpC,IAAIC,EAAS,CACXC,KAAM,CACJ/B,UAAW,YAAKA,EAAW4B,EAAa/B,EAAS3I,EAAIkB,QAASmJ,EAAWrK,IAAKqK,EAAW5C,SAE3FqC,MAAOxM,EAAS,GAAIwM,EAAOJ,GAC3Bc,KAAMA,EACNxB,KAAM1C,EACNiE,OAAQA,GAEV,OAAOK,EAGT,IAAIE,EAAc,CAAC,YAEf,EAAM,SAAarC,GACrB,IAAII,EAAWJ,EAAWI,SAGtBkC,EAAsBvC,EAFd1K,EAA8B2K,EAAYqC,GAEF,KAAM,GAAI,eAC1DD,EAAOE,EAAoBF,KAC3B7B,EAAO+B,EAAoB/B,KAC3BuB,EAASQ,EAAoBR,OAEjC,OAAoB,IAAeS,cAAc,MAAO1N,EAAS,GAAI0L,EAAM,CACzEF,UAAW+B,EAAK/B,WACfyB,GAAS1B,IAGVoC,EAAc,CAAC,YAEf,EAAM,SAAaxC,GACrB,IAAII,EAAWJ,EAAWI,SAGtBkC,EAAsBvC,EAFd1K,EAA8B2K,EAAYwC,GAEF,MAChDJ,EAAOE,EAAoBF,KAC3B7B,EAAO+B,EAAoB/B,KAC3BuB,EAASQ,EAAoBR,OAEjC,OAAoB,IAAeS,cAAc,MAAO1N,EAAS,GAAI0L,EAAM,CACzEF,UAAW+B,EAAK/B,WACfyB,GAAS1B,IAGVqC,EAAc,CAAC,YAEf,EAAM,SAAazC,GACrB,IAAII,EAAWJ,EAAWI,SAGtBkC,EAAsBvC,EAFd1K,EAA8B2K,EAAYyC,GAEF,KAAM,GAAI,YAC1DL,EAAOE,EAAoBF,KAC3B7B,EAAO+B,EAAoB/B,KAC3BuB,EAASQ,EAAoBR,OAEjC,OAAoB,IAAeS,cAAc,MAAO1N,EAAS,GAAI0L,EAAM,CACzEF,UAAW+B,EAAK/B,WACfyB,GAAS1B,IAgHVsC,GA7GY,OAAAb,EAAA,GAAW,CACzBO,KAAM,CACJO,SAAU,KAEZC,MAAO,CACLvD,OAAQ,OAwGM,CAAC,aACfwD,EAAe,CAAC,YAChBC,EAAa,CAAC,YAcd,EAAM,SAAa9C,GACrB,IAAII,EAAWJ,EAAWI,SAGtB2C,EAAuBhD,EAFf1K,EAA8B2K,EAAY6C,GAED,KAAM,MAAO,YAC9DT,EAAOW,EAAqBX,KAC5B7B,EAAOwC,EAAqBxC,KAC5BuB,EAASiB,EAAqBjB,OAElC,OAAoB,IAAeS,cAAc,MAAO1N,EAAS,GAAI0L,EAAM,CACzEF,UAAW+B,EAAK/B,WACfyB,GAAS1B,IAEV,EAAM,SAAaJ,GACrB,IAAII,EAAWJ,EAAWI,SAGtB4C,EAAuBjD,EAFf1K,EAA8B2K,EAAY8C,GAED,KAAM,MAAO,eAC9DV,EAAOY,EAAqBZ,KAC5B7B,EAAOyC,EAAqBzC,KAC5BuB,EAASkB,EAAqBlB,OAElC,OAAoB,IAAeS,cAAc,MAAO1N,EAAS,GAAI0L,EAAM,CACzEF,UAAW+B,EAAK/B,WACfyB,GAAS1B,IAGV6C,GAAY,CACdC,UAAW,KACXC,IA1CQ,SAAanD,GACrB,IAAII,EAAWJ,EAAWI,SAGtBkC,EAAsBvC,EAFd1K,EAA8B2K,EAAY0C,GAEF,MAChDN,EAAOE,EAAoBF,KAC3B7B,EAAO+B,EAAoB/B,KAC3BuB,EAASQ,EAAoBR,OAEjC,OAAoB,IAAeS,cAAc,MAAO1N,EAAS,GAAI0L,EAAM,CACzEF,UAAW+B,EAAK/B,WACfyB,GAAS1B,IAgCZgD,IAAK,EACLC,IAAK,GAmUU,IAAeC,YAAW,SAAoBjC,EAAOf,GACpE,OAAoB,IAAeiC,cAAcgB,EAAA,EAAO1O,EAAS,CAC/D2O,UAAW,OACXlD,IAAKA,GACJe,OAvNL,IAkeIoC,GAAe,CACjBC,MAAO,IAgBT,SAASC,GAAWhG,GAClB,MAAqB,kBAAVA,EAdb,SAAyBA,GACvB,IAAIiG,EAASjG,EAAMvF,MAAM,KACzB,GAAsB,IAAlBwL,EAAOlU,OAAc,MAAO,CAC9BiO,MAAOiG,EAAO,GACdC,MAAO,GAET,GAAsB,IAAlBD,EAAOlU,OAAc,MAAO,CAC9BiO,MAAOiG,EAAO,GACdC,OAAQD,EAAO,IAEjB,MAAM,IAAIvU,MAAM,4CAIsByU,CAAgBnG,GAC/CA,EAsCT,SAASoG,GAAcC,GAGrB,OAtCF,SAA8BC,GAgB5B,IAfA,IACIP,EAAQO,EAAOP,MACfQ,EAASD,EAAOC,OAASD,EAAOC,OAAO7L,KAAI,SAAUlE,GACvD,OAAOwP,GAAWxP,MACf,KAIDgQ,EAAoB,EAHRD,EAAO3C,QAAO,SAAU6C,EAAOjQ,GAC7C,OAAQiQ,EAAQjQ,EAAE0P,QACjB,GAECQ,EAAO,IAAMF,EACbG,EAAaJ,EAAOxU,OACpB4G,EAAiB,EAAbgO,EACJC,EAAc,GACdC,EAAW,EAEN3U,EAAI,EAAGA,EAAIyG,EAAGzG,IAAK,CAC1B,IAAI4U,EAAQ5U,EAAIyU,EACZI,GAAa7U,EAAI,GAAKyU,EAC1BE,GAAYH,EAAOH,EAAOO,GAAOZ,MACjCU,EAAY7L,KAAKwL,EAAOO,GAAO9G,MAAQ,IAAM6G,EAASG,QAAQ,GAAK,KAE/D9U,EAAIyG,EAAI,GACViO,EAAY7L,KAAKwL,EAAOQ,GAAW/G,MAAQ,IAAM6G,EAASG,QAAQ,GAAK,KAI3E,IAAIC,EAAOX,EAAOW,MAAQT,EAK1B,MAJiB,CACftH,gBAAiBvM,mBAAaoT,EAAQ,QAAUa,EAAY/L,KAAK,MAAQ,IACzEwE,eAAgB6H,mBAAWD,GAAQA,EAAKD,QAAQ,GAAK,MAAQC,EAAKD,QAAQ,GAAK,KAAOC,GAQjFE,CAFMjQ,EAAS,GAAI4O,GAAcO,IAsB1C,SAASe,GAA4Bf,GAWnC,MAAO,CACLnH,iBAXcpN,MAAM2G,QAAQ4N,GAAWA,EAAU,CAACA,IAC1B3L,KAAI,SAAU2M,GACtC,IAAId,EAASc,EAAEd,OAAO7L,KAAI,SAAUlE,GAClC,OArBN,SAAsBwJ,GACpB,IAAIsH,EAYJ,MAAqB,kBAAVtH,EAVX,SAAyBA,GACvB,IAAIiG,EAASjG,EAAMvF,MAAM,KAEzB,GAAIwL,EAAOlU,OAAS,EAClB,MAAM,IAAIL,MAAM,2JAGlB,OAAOuU,EAG6BE,CAAgBnG,GAC/C,CAACA,EAAMA,MAAkD,QAA1CsH,EAAoBtH,EAAMuH,kBAA8C,IAAtBD,OAA+B,EAASA,EAAkB1O,YAOvH4O,CAAahR,MAGtB,OADmB6Q,EAAEI,OAAS,4BAA8B,mBACtC,IAAMJ,EAAEtB,MAAQ,QAAUQ,EAAO7L,KAAI,SAAUgN,GACnE,OAAOA,EAAM7M,KAAK,QACjBA,KAAK,MAAQ,OAGWA,KAAK,OAQpC,IAAI8M,GAAoB,CACtBC,QAAS,EACTC,QAAS,EACTC,KAAM,EACNC,OAAQ,EACRC,KAAM,CACJC,EAAG,EACHZ,EAAG,EACHa,EAAG,EACHC,EAAG,MAGHC,GAAkB,SAAyB1E,GAC7C,IAAI/J,EAAIzC,EAAS,GAAIyQ,GAAmBjE,GAEpC2E,EAAc3E,EAAMsE,KAAO,QAAUrO,EAAEqO,KAAKC,EAAI,KAAOtO,EAAEqO,KAAKX,EAAI,KAAO1N,EAAEqO,KAAKE,EAAI,KAAOvO,EAAEqO,KAAKG,EAAI,IAAMzE,EAAMxJ,IAElHlH,GADQ0Q,EAAM4E,MAAQ,SAAW,KAChB3O,EAAEiO,QAAU,OAAQjO,EAAEkO,QAAU,MAAQlO,EAAEmO,KAAO,MAAQnO,EAAEoO,OAAS,MAAQM,EACjG,MAAO,CACL,qBAAsBrV,EACtB,kBAAmBA,EACnB,aAAcA,IAIduV,GAA6B,kBAAXC,OAClBC,GAAiB,CACnBC,GAAI,EACJC,GAAI,EACJC,GAAI,EACJC,GAAI,EACJC,GAAI,EACJC,IAAK,EACLC,KAAM,GAEJC,GAAmB,CACrBC,UAAW,CAAC,CAAC,KAAM,QAAS,CAAC,KAAM,OAAQ,CAAC,KAAM,MAAO,CAAC,IAAK,MAAO,CAAC,IAAK,MAAO,CAAC,IAAK,OACzFC,SAAU,CAAC,CAAC,KAAM,MAAO,CAAC,KAAM,MAAO,CAAC,IAAK,MAAO,CAAC,IAAK,QAGxDC,GAAc,SAAqBC,GACrC,IAAKd,GAAU,MAAO,KAGtB,IAFA,IAE8De,EAArDC,EAAYpR,EAFR8Q,GAAiBI,MAEyCC,EAAQC,KAAarQ,MAAO,CACjG,IAAIS,EAAI2P,EAAMtW,MAEd,GAAIwV,OAAOgB,YAAc7P,EAAE,GACzB,OAAOA,EAAE,GAIb,MAAO,MAGL8P,GAAqB,SAA4BC,GACnD,MAAO,CACLA,KAAMA,EACN1W,MAAOyV,GAAeiB,KA0B1B,SAASC,KACP,OAAOnB,OAAOoB,YAqBhB,SAASC,KACP,OAAOrB,OAAOgB,WAGhB,IAmDIM,GAAoB,WACtB,OAAOC,SAASC,KAAKC,WAAaF,SAASG,gBAAgBD,WAqB7D,SAASE,GAAmBxH,EAAKyH,EAAUhY,EAAOiY,EAAWC,GAC3D,GAAK/B,GAAL,CAEA,IAAIgC,EAAc,WAChB,IAAIvX,EAAQqX,KAEQC,GAAW,SAAUnC,EAAGD,GAC1C,OAAOC,IAAMD,IAGGvF,EAAI3P,MAAOA,KAC7B2P,EAAI3P,MAAQA,EAEP2P,EAAI6H,UACPhC,OAAOiC,uBAAsB,WAC3BL,EAASzH,EAAI3P,OACb2P,EAAI6H,SAAU,KAEhB7H,EAAI6H,SAAU,KAKlB,OADAhC,OAAOkC,iBAAiBtY,EAAOmY,GACxB,WACL,OAAO/B,OAAOmC,oBAAoBvY,EAAOmY,KAkBlCrT,EAAS,GAAIoO,GAZZ,CACVC,UAAW,KACXa,cAAeA,GACfwE,qBA5NF,SAA8BvE,GAC5B,OAAOe,GAA4Bf,IA4NnC+B,gBAAiBA,GACjByC,YA5JgB,SAAqBxB,GACrC,IAAI1G,EAAM,iBAAO,CACf3P,MAAO,KACPwX,SAAS,IACRM,QAECC,EAAY,oBAAS,WACvB,OAAOtB,GAAmBL,GAAYC,OAEpC2B,EAAQD,EAAU,GAClBX,EAAWW,EAAU,GASzB,OAPA,qBAAU,WACR,OAAOZ,GAAmBxH,GAAK,SAAUsI,GACvC,OAAOb,EAASX,GAAmBwB,MAClC,UAAU,WACX,OAAO7B,GAAYC,QAEpB,IACI2B,GA0IPE,eA7GmB,WACnB,IAAIvI,EAAM,iBAAO,CACf3P,MAAO,EACPwX,SAAS,IACRM,QAECK,EAAa,oBAAS,WACxB,OAAQ5C,GAAesB,KAAJ,KAEjBmB,EAAQG,EAAW,GACnBf,EAAWe,EAAW,GAK1B,OAHA,qBAAU,WACR,OAAOhB,GAAmBxH,EAAKyH,EAAU,SAAUP,MAClD,CAAClH,IACGqI,GA+FPI,gBApIoB,WACpB,IAAIzI,EAAM,iBAAO,CACf3P,MAAO,EACPwX,SAAS,IACRM,QAECO,EAAa,oBAAS,WACxB,OAAQ9C,GAAeoB,KAAJ,KAEjBqB,EAAQK,EAAW,GACnBjB,EAAWiB,EAAW,GAK1B,OAHA,qBAAU,WACR,OAAOlB,GAAmBxH,EAAKyH,EAAU,SAAUT,MAClD,CAAChH,IACGqI,GAsHPM,cA9FkB,WAClB,IAAI3I,EAAM,iBAAO,CACf3P,MAAO,CACLyO,MAAO,EACPC,OAAQ,GAEV8I,SAAS,IACRM,QAECS,EAAa,oBAAS,WACxB,OAAQhD,GAGJ,CACF9G,MAAO+G,OAAOgB,WACd9H,OAAQ8G,OAAOoB,aALE,CACjBnI,MAAO,EACPC,OAAQ,MAMRsJ,EAAQO,EAAW,GACnBnB,EAAWmB,EAAW,GAY1B,OAVA,qBAAU,WACR,OAAOpB,GAAmBxH,EAAKyH,EAAU,UAAU,WACjD,MAAO,CACL3I,MAAO+G,OAAOgB,WACd9H,OAAQ8G,OAAOoB,gBAEhB,SAAUzB,EAAGD,GACd,OAAOC,EAAE1G,QAAUyG,EAAEzG,OAAS0G,EAAEzG,SAAWwG,EAAExG,YAE9C,CAACiB,IACGqI,GAgEPQ,kBAzDsB,WACtB,IAAI7I,EAAM,iBAAO,CACf3P,MAAO,EACPwX,SAAS,IACRM,QAECW,EAAa,oBAAS,WACxB,OAAQlD,GAAeuB,KAAJ,KAEjBkB,EAAQS,EAAW,GACnBrB,EAAWqB,EAAW,GAK1B,OAHA,qBAAU,WACR,OAAOtB,GAAmBxH,EAAKyH,EAAU,SAAUN,MAClD,CAACnH,IACGqI,KAiCT,IAsKIU,GAAc,CAAC,KAAM,WAAY,YAAa,UAAW,cAAe,WAAY,QAAS,aAAc,kBAE/G,SAASC,GAASjI,GAChB,IAAIjB,EAAWiB,EAAMjB,SACjBmJ,EAASlI,EAAMkI,OACf5Y,EAAQ0Q,EAAM1Q,MACdwP,EAAKkB,EAAMlB,GACf,OAAoB,wBAAc,MAAO,CACvCqJ,KAAM,WACNhP,QAAS+O,EACTpJ,GAAIA,EAAK,IAAMxP,EACf,kBAAmBwP,EAAK,IAAMxP,GAC7ByP,GAAyB,wBAAc,MAAO,KAAM,eAGzD,IAAI,GAAQ,SAAUJ,GACpB,IAx5C2CxI,EAAOiS,EAw5C9C9I,EAAWX,EAAWW,SACtB+I,EAAY1J,EAAW0J,UACvB9V,EAAQoM,EAAWpM,MACnB+V,EAAa3J,EAAW2J,WACxBC,EAAiB5J,EAAW4J,eAG5BtH,EAAsBvC,EAFlB1K,EAA8B2K,EAAYqJ,IAEF,KAAM,WAClDjH,EAAOE,EAAoBF,KAC3Bf,EAAQiB,EAAoBjB,MAE5B7L,EAAO5B,EAAMyE,KAAI,SAAUwR,GAC7B,IAAKF,EACH,cAAeE,GACb,IAAK,SACH,OAAOA,EAET,IAAK,SACH,OAAOA,EAAKtT,WAEd,QACE,MAAM,IAAIlH,MAAM,eAItB,OAAOsa,EAAWE,MAGhBC,EAAkB,oBAAS,WAC7B,OAAOJ,KAELK,EAAcD,EAAgB,GAC9BE,EAAeF,EAAgB,GAO/BG,GA/7CuCzS,EA+7CR,WACjC,MAAO,CACLiH,SAAU,kBACVD,UAAW,oBAl8CmCiL,EAo8C/C,GAn8CM,mBAAQ,WACf,OAAO,OAAA5H,EAAA,IAAW,WAChB,OAAO,OAAAqI,EAAA,GAAarV,EAAS,GAAI6K,EAAUlI,UAE5C,CAACA,EAAOiS,OAg8CX,IAAKjU,EAAK9F,OAAQ,OAAO,KACzB,IAAIya,EAAwB,wBAAc,IAAQ,CAChDC,YAAapK,EAAWoK,YACxBzZ,MAAOoZ,GAAevU,EAAK,GAC3BmL,SAfiB,SAAsB5Q,EAAOqC,GAC9C4X,EAAa5X,GACTuO,GAAUA,EAASvO,IAcvB,aAAc,aAAeoD,EAAK9F,OAAS,WAC1C8F,EAAK6C,KAAI,SAAUjG,GACpB,IApsDmD4F,EAosD/CqS,GApsD+CrS,EAosDnB5F,GAlsDrB4F,EAAOE,QAAQ,mBAAoB,OAAOC,OAAOC,MAAM,KACtDkS,QAAO,SAAUtZ,GAC7B,OAAOA,GAAKA,EAAEtB,UACb2I,KAAI,SAAUC,GACf,IAAIiS,EAAUjS,EAAMH,OACpB,OAAOoS,EAAQ,GAAGC,cAAgBD,EAAQE,UAAU,MACnDjS,KAAK,KAPYR,EAosDlB,OAAoB,wBAAc0S,EAAA,EAAK,CACrCtY,IAAKA,EACLiY,MAAOA,EACP1Z,MAAOyB,QAGPuY,EAAa/W,EAAMyE,KAAI,SAAUwR,EAAMpF,GACzC,IAAIrS,EAAMoD,EAAKiP,GACXmG,EAAqC,qBAAhBb,GAAyC,IAAVtF,GAAesF,IAAgB3X,EACvF,OAAoB,wBAAckX,GAAU,CAC1ClX,IAAKA,EACLmX,OAAQqB,EACRja,MAAOyB,EACP+N,GAAIkB,EAAMlB,IAAM,UACfyJ,EAAeC,EAAMe,OAEtBC,EAA8B,wBAAc,EAAK,CACnDnO,MAAM,GACLlH,EAAK9F,OAAS,GAAkB,wBAAc,EAAK,KAAMya,GAAwB,wBAAc,EAAK,CACrG5P,MAAM,GACLoQ,IACCG,EAAgC,wBAAcC,WAAY,KAAMvV,EAAK9F,OAAS,GAAKya,EAAUQ,GAC7FK,EAAwC,aAA3BhL,EAAWoK,YAC5B,OAAoB,wBAAc,MAAO,CACvC/J,UAAW,YAAK,OAAQ+B,EAAM6H,IAC7Be,GAAcH,GAAiBG,GAAcF,IAG9CG,GAAc,CAAC,OAAQ,YAEvB,GAAO,SAAcjL,GACvB,IAEIsC,EAAsBvC,EAFd1K,EAA8B2K,EAAYiL,IAEF,MAChD7I,EAAOE,EAAoBF,KAC3B7B,EAAO+B,EAAoB/B,KAC3BuB,EAASQ,EAAoBR,OAEjC,OAAKM,EAAK/B,UAIU,IAAekC,cAAc,MAAO1N,EAAS,GAAI0L,EAAM,CACzEF,UAAW+B,EAAK/B,WACfyB,GAASpC,EAAUM,EAAWI,WALxBV,EAAUM,EAAWI,WC70DhC,SAAS8K,GAAQ7J,GAEb,IAAMnO,EAAYrC,EAAawQ,EAA/B,SAEMrO,EAAKqO,aAAX,cACM8J,EAAW,mBAAM,GAAQjY,IAAcrC,EAAamC,GAAMA,EAA/C,UAEAoY,EAAeC,mBAAhC,MACMzY,EAAW0Y,uBAAY,kBAAMF,GAAY,SAAAxF,GAAC,OAAIA,EAAJ,OAAhD,IAEM2F,EAAa,QAEf3Y,aAgBE4Y,IADcnK,gCAApB,GAOMoK,EAAe,CACjBrM,MADiB,GAEjBC,OAFiB,GAGjBV,QAHiB,EAIjBrB,aAJiB,MAKjBM,OALiB,UAMjBhB,gBAAiB4O,EAAS,UAAY,WAGpCE,EAAe,CACjBtM,MADiB,GAEjBC,OAFiB,GAGjB/B,aAHiB,MAIjBqO,YAJiB,OAKjB/O,gBAAiB4O,EAAS,UALT,UAMjB1N,SAAU,WAQd,OA1BeqN,MAsBXO,kBAA0BF,EAAS,UAAnCE,UACAA,gBAIA,qBAAQ5S,aAAW,GACf,qBAAQuH,UAAR,YAA8BG,IAA9B,EAA4CE,QA3ChC,WACXyK,IAID9J,6BAHAA,+BA0CI,qBAAQb,IAAR,EAAsBH,UAAU,aAC5BuL,8BAAOvK,UAJvB,SC1DJ,OAAe,SAACA,GAEZ,IAAMnO,EAAYrC,EAAawQ,EAA/B,SACMrO,EAAKqO,aAAX,cAEM8J,EAAW,mBAAM,GAAQjY,IAAcrC,EAAamC,EAAzC,UACAoY,EAAeC,mBAAhC,MACMzY,EAAW0Y,uBAAY,kBAAMF,GAAY,SAAAxF,GAAC,OAAIA,EAAJ,OAAhD,IAEM2F,EAAa,QAEf3Y,aAgBE4Y,IADcnK,gCAApB,GASMoK,EAAe,CACjBrM,MADiB,GAEjBC,OAFiB,GAGjBV,QAHiB,EAIjBrB,aAJiB,MAKjBM,OALiB,UAMjBhB,gBAAiB4O,EAAS,UAAY,WAGpCE,EAAc,CAChBtM,MADgB,GAEhBC,OAFgB,GAGhB/B,aAHgB,MAIhBqO,YAJgB,OAKhB/O,gBAAiB4O,EAAS,UALV,UAMhB1N,SAAU,WAQd,OA5BeqN,MAwBXO,kBAA0BF,EAAS,UAAnCE,UACAA,gBAIA,qBAAQ5S,aAAW,GACf,qBAAQuH,UAAR,YAA8BG,IAA9B,EAA4CE,QA7ChC,WACXyK,IAID9J,6BAHAA,+BA4CI,qBAAQb,IAAR,EAAsBH,UAAU,aAC5BuL,8BAAOvK,UAJvB,UCjEEwK,GAAqB,SAACxK,GAE1B,IAAQyK,EAAUzK,EAAlB,MAGA,OACE,yBACGyK,EAAA,oBAAyB,cACxB,OACE,qBAAQ1Z,IAAG,KAAX,EAA6BiK,QAA7B,EAAoCvD,aAApC,EAAgD6F,QAAQ,SACrDmN,EAAA,qBAA0B,cACzB,MAAO,QAAAC,EAAA,KACL,sBACE3Z,IADF,EAEE7B,QAFF,EAGEwb,QAHF,EAIE7a,WAAY4a,EAAM5a,aAGpB,sBACEkB,IADF,EAEE7B,QAFF,EAGEwb,QAHF,EAIE7a,WAAY4a,EAAM5a,gBAKvBX,KACC,qBAAQgK,MAAR,EAAauD,SAAS,YAAtB,MArBN,SCRFkO,GAA+B,SAAC3K,GAEpC,MAIIA,EAJJ,MAEEnQ,EAFF,aAOQ+a,EAPR,SAOA,KAKA,OACE,yBACGA,EAAA,KAAS,cAER,IAAMC,EAAN,EACIC,EAAJ,KAEA,OAGE,qBAAQ/Z,IAAG,MAAX,EAA6BiK,QAA7B,EAAoCvD,aAApC,EAAgD6F,QAAQ,SAErDuN,EAAA,KAAa,cAEZ,IAAME,EAAYtb,EAAF,OAAeA,UAAf,EAAyCA,EAAzC,MAAhB,KASA,OAFAqb,EAAYrb,EAAZqb,MAEO,qBAAQ/Z,IAAKvC,GAElB,qBAAQ2Q,IAVW,CACnBnB,OAAQ,KAOH,GAOH,QAAAvO,EAAA,KACE,sBACEsB,IADF,EAEE2Z,QAFF,EAGE7a,WAAYA,IAGd,sBACEkB,IADF,EAEE2Z,QAFF,EAGE7a,WAAYA,cCnD5Bmb,GAAkB,SAAChL,GAEvB,IAAQnQ,EAAemQ,EAAvB,WAGMiL,EADOV,eAAb,GACA,iBACMW,EAASD,EAAf,OACME,EAAN,aAAiBD,gBA+BXE,EAAiBhd,MAAA,KACrB,CAAEC,OAAQ6c,YAAmB,IAC7B,qBAAU1c,EAAV,KAYI6c,EAAaH,EAAF,aACX,WAEE,OAAO,qBAAQhO,WAAR,GAAwBF,YAAa,IACzCkO,EAAA,kBAAyB,cACxB,OACE,sBACEna,IADF,EAEE0Z,MAAO,CACLa,WADK,+BAELpM,KAAMgM,EAFD,aAGLD,aAHK,EAILpb,WAJK,EAKLub,eAAgB,CALX,GAMLG,gBAAiB5H,UAO7B,wBAGN,OAAO4G,yBAEL,sBAAS9N,SAAT,SAA2BH,MAA3B,QAAyCgB,QAAzC,eAAgEM,UAAU,SACvE/N,SAHE0a,MASL,0BAEKY,GAAYZ,oBAFjB,MAiBIW,YACA,sBAAoBT,MAAO,CACzBQ,aADyB,EAEzBpb,WAFyB,EAGzBub,eAHyB,EAIzBG,gBAAiBL,EAAOK,mBAM1BL,QACA,sBAA8BT,MAAO,CACnCQ,aADmC,EAEnCpb,WAFmC,EAGnCqb,YAQFC,GAAYZ,oBAjDlB,SC1EIiB,GAAe,SAACxL,GAEpB,IAGMkL,EAHOX,eAAb,GAEA,iBACA,OAEMza,EAASob,UAAf,aAsBA,MArBA,aAAiBA,kBAMXA,EAAJ,iBAA4BA,4BACxBA,EAAJ,cAAyBA,EAAA,sBAA4B,mBAAOvH,EAAP,cAchD,kBAAC4G,IAAD,cAEHza,kBAA2B,sBAAiBD,WAAYmQ,EAAMnQ,aAG9DC,gBAAyBoR,wBAAc,gBAL3C,KClCIuK,GAAU,GAAiB,CAE7BpJ,MAF6B,IAG7BQ,OAAQ,CAAC,YAHoB,aAI7BU,KAAM,KAeJmI,GAAU,CACdC,UAba,GAAmB,CAAEvH,KAAF,GAAY5N,IAAK,cAYnC,cAEd+E,gBAFc,UAGdK,OAAQ,uBAKJgQ,GAAiB,WAErB,IAAMC,EAAOC,qBAAb,GAEA,OAEE,qBAAQ/S,OAAR,EAAcD,MAAd,EAAmBU,eAAnB,EAAiC/B,aAAjC,EAA6C0H,IAAKsM,IAChD,qBAAQjR,UAAR,EAAiB2E,IAAKuM,IAGpB,sBACEjP,SADF,MAEEH,MAFF,QAGE3G,QAHF,YAIE2H,QAAQ,sBAPZ,iBAYE,qBAAQA,QAAQ,uBACd,sBACE/K,MAAOsZ,EADT,YAEEvD,WAAY,YACV,OAAOzY,SAAP,MAEF0Y,eAAgB,cACd,SACO,sBAAc1Y,WAAYA,IADV,YChD/Bkc,GAAe,SAAC/L,GAEpB,IAAM6L,EAAYtB,eAAlB,GAGMyB,EAAU/B,uBAAY,kBAAM4B,kBAAN,KAA5B,IACMI,EAAchC,uBAAY,mBAAOlX,gBAAoBiZ,MAA3D,IAOA,OALAE,qBAAU,WAER,OADA7F,0CACO,kBAAMA,0CAAN,MAFT6F,IAKKL,EAAL,aACA,IAAIA,qBAAsC,KAEnCtB,qBAAP,MAH+B,MCP3B4B,GAAe,SAACnM,GAEpB,MAA0CgK,mBAA1C,IAAOoC,EAAP,KAAoBC,EAApB,KACA,EAA0CrC,oBAA1C,GAAOsC,EAAP,KAAqBC,EAArB,KAEMC,EAAU,iBAAqB,CACnCC,UADmC,GAEnCC,YAAa,KAFf,QAOMC,EAAmB,SAACC,EAAD,GACvB,IAAMC,EAAKC,GAAOC,EAAlB,iBACAH,WAAW,SAAA9Z,GAAC,OAAIA,kBAAJ,OAGRia,EAAwC,CAE5CT,aAF4C,EAG5CU,eAAgB,YACdT,MAGFH,YAP4C,EAQ5CC,eAAgB,YAEdM,KACAN,MAGFY,eAd4C,WAe1C,GAAKT,cAAL,OACA,OAAOA,cAAoBA,qBAA3B,IAIFze,SApB4C,YAsB1C,GAAIye,YAAkBve,EAAtB,IACE,MAAM,IAAID,MAAV,6BAQF,OALAwe,sBACAA,YAAkBve,EAAlBue,MAEAG,EAAiBP,EAAjBO,GAEO,WACLI,kBAIJ7e,WApC4C,YAqC1C,IAAM+P,EAAM8O,EAAZ,iBACA,MAAU,MAAM,IAAI/e,MAAV,kBACV,GAAIiQ,OAAWhQ,EAAf,GACE,MAAM,IAAID,MAAV,qCAEFwe,2BACOA,YAAkBve,EAAzB,IACA0e,OAYJ,OAPAT,qBAAU,WAER,OADAzZ,KACO,WACL2Z,WAAoB,mBAAY5Z,EAAZ,mBAHxB0Z,IAQE,kBAAC,EAAD,UAAsB5c,MAAOyd,GAC1B/M,EADH,SAEEuK,qBAHJ,QCrFI2C,GAAgB,SAAClN,GACnB,IAAM6L,EAAYtB,eAAlB,GAEA,OAAO,4BACHpU,MAAO,CACHoF,gBADG,cAEHK,OAFG,wBAGHK,aAHG,EAIHK,MAJG,cAKHC,OAAQ,WAEZ8C,QAAS,kBAAMwM,kBAAN,KARb,SCPiBsB,cAArB,aAKI,KAAArG,SAAA,E,mBAEAsG,qCAEI1c,KAAA,e,2BAF4CkS,uDAK5C,GAFAlS,KAAA,mBAEKA,KAAL,QAAmB,CAEf,IAAM2c,EAAN,KAEMC,EAAW,SAAXA,EAAYlb,G,2BAAiBwQ,uDAC/ByK,aACAA,sBACAA,yBACAvI,8BAA6B,WACzB1S,kBACAib,aACIA,EAAJ,cACIC,gBAASD,EAATC,qBAAgCD,EAAhCC,sBAKZA,gBAAS5c,KAAT4c,qBAA+B5c,KAA/B4c,oB,EA7BSH,GCCAI,cACjB,cACE,IAAMC,EAAuB,kBAAVlR,EAAqBA,EA+I5C,SAAuBxJ,GACrB,0BAAewB,EAAf,GAAyEmZ,EAAzE,GAA0FC,EAA1F,GACA5a,EAAIA,SAAJA,cACAmD,EAAInD,cAAJmD,cACA0X,EAAI7a,SAAJ6a,GACAlJ,IACKxO,aAAYA,GAAZA,KAAwBA,GAAxBA,KAAoCA,GAApCA,KAAgDA,GAAhDA,KAA4DA,GAA7D,KAAyEA,GAAc2X,MAA3F,IACM9a,cAAJ,GAAqBA,iBAEnBA,EAAI,QAAUA,EAAdA,KAGAA,gBAAiBA,UAAkB8a,MAAvC,KAAkD9a,EAAI,QAAUA,EAAdA,KAC9CA,mBAAJ,GAA0BA,iBAAuBA,EAAI,QAAUA,EAAdA,KACjD,GAAIA,6BAA2BA,eAA3BA,OAAsDA,eAAtDA,QAAiFA,eAArF,QAAiHA,cAA0B,CA8BzI,GA7BA,QAAIA,eACEA,yBAAJ,GAAgCA,qBAC9BA,EAAIA,iBAAJA,UAEF+a,SACA/a,EAAIA,SAAJA,IACK,QAAIA,eACT+a,SACA/a,EAAIA,SAAJA,KAEA+a,EAAM/a,WAAN+a,GACA/a,EAAIA,SAAJA,IAEFgb,IACAzQ,KACA,KAAIvK,6BACFgb,IACAzQ,KACAvK,EAAIA,SAAJA,IACK,QAAI+a,IACTC,IACA,GAAIhb,sBACFgb,IACAzQ,OAIJvK,GADAA,EAAIA,cAAJA,KACIA,YAAJA,IACAwB,EAAMxB,QAANwB,KACA,OAAIuZ,EAAc,CAChB,GAAIvZ,UAAJ,EACE,MA8HC,CACLyZ,IADK,EAELC,MAFK,EAGLC,KAHK,EAILC,IAJK,EAKLC,IALK,EAMLC,UANK,EAOLC,UAPK,EAQLC,UARK,EASLC,KATK,EAULC,QAVK,EAWLC,OAXK,EAYLC,MAZK,EAaLC,KAbK,IAcLtR,QAdK,EAeLuR,OAAQ,GA3IN,IAAKpgB,EAAL,EAAYA,EAAZ,EAA2BA,IAAK,CAO9B,GANI8F,UAAJ,KAAoBA,OAAgBA,UAChCA,mBAAJ,IACEA,KAASA,iBAATA,IACAA,KAASua,OAAOva,KAAhBA,KACI9F,EAAJ,IAAa8F,KAASwa,WAATxa,IAAoBA,QAE/BsZ,MAAMtZ,EAAV9F,IAAoB,MAqHnB,CACLuf,IADK,EAELC,MAFK,EAGLC,KAHK,EAILC,IAJK,EAKLC,IALK,EAMLC,UANK,EAOLC,UAPK,EAQLC,UARK,EASLC,KATK,EAULC,QAVK,EAWLC,OAXK,EAYLC,MAZK,EAaLC,KAbK,IAcLtR,QAdK,EAeLuR,OAAQ,GAnIAG,SAASza,EAATya,IAAJ,MAA6Bza,UACzB9F,EAAJ,IAAY8F,KAASya,SAASza,EAAlBA,KACR9F,MAAUqgB,OAAOva,EAAPua,IAAd,IAAmCva,QAErC0a,EAAM,CAACzK,EAAIjQ,EAAL,GAAaqP,EAAIrP,EAAjB,GAAyBkQ,EAAIlQ,EAAI,IACvC,GAAI+I,IAAkBoH,EAAIoK,OAAOva,EAAXmQ,KAExB,GAAIoJ,iBAAgBA,GAApB,QAAoCA,EAAe,CACjD,KAAOvZ,SAAP,GAAgCA,YAIhC,IAHIuZ,UAAJ,OAAoBA,GACdkB,SAASza,EAATya,KAAJ,MAA8Bza,QAE3B9F,EAAL,EAAYA,EAAZ,EAA2BA,IAAK,CAC9B,GAAI8F,mBAAJ,EAA8B,CAG5B,GAFAA,KAASA,iBAATA,IACAA,KAASua,OAAOva,EAAhBA,IACIsZ,MAAMtZ,EAAV9F,IAAoB,MAoGrB,CACLuf,IADK,EAELC,MAFK,EAGLC,KAHK,EAILC,IAJK,EAKLC,IALK,EAMLC,UANK,EAOLC,UAPK,EAQLC,UARK,EASLC,KATK,EAULC,QAVK,EAWLC,OAXK,EAYLC,MAZK,EAaLC,KAbK,IAcLtR,QAdK,EAeLuR,OAAQ,GAlHFta,KAASA,KAATA,SAEAA,KAASua,OAAOva,EAAhBA,IAEEua,OAAOva,EAAPua,IAAJ,IAAyBva,QACrBua,OAAOva,EAAPua,IAAJ,IAAyBva,QAE3B,OAAIuZ,IAAemB,EAAMC,GAAS3a,EAAD,GAASA,EAAT,GAAiBA,EAA/B0a,IAAwCd,EAAMW,OAAOva,EAAb4Z,IAAsBC,EAAMU,OAAOva,EAAb6Z,KACjF,OAAIN,IAAemB,EAAME,GAAS5a,EAAD,GAASA,EAAT,GAAiBA,EAA/B0a,KACnB,QAAInB,IAAgBmB,EAgL1B,SAAmBL,EAAMQ,EAAOT,GAC9B,UAEA,GADAU,IACIxB,MAAMe,WAAV,IAA6B,CAK3B,GAJAU,EAASV,cAATU,cAEA,KADAC,EAAUX,SAAVW,MACoBA,KACpBA,EAAUT,OAAVS,GACI1B,MAAJ,GAAqB,SACrB,KAAIyB,IAAgBD,EAAI,EAAJA,GAASE,GAC7B,KAAID,IAAgBD,EAAI,GAAJA,GAAUE,GAC9B,KAAID,IAAgBD,EAAI,IAAJA,GAAWE,GAC/B,KAAID,IAAgBD,EAAI,IAAJA,GAAWE,GAC/B,KAAID,IAAgBD,EAAI,IAAJA,GAAWE,GAC/B,KAAID,IAAgBD,EAAI,IAAJA,GAAWE,GAC/B,KAAID,IACFD,IACAD,EAAQ,EAAKG,EAAbH,IACAT,EAASY,EAATZ,KAGJ,OAAOQ,GAASE,EAAGD,EAAnB,GArM8BI,CAAUjb,EAAD,GAASA,EAAT,GAAiBA,EAAhC0a,KACpB,GAAI3R,IAAkBoH,EAAIoK,OAAOva,EAAXmQ,KAExB,WAAIoJ,EAAe,CACjB,KAAOvZ,SAAP,GAAgCA,YAChC,IAAK9F,EAAL,EAAYA,EAAZ,EAA2BA,IAAK,CAC9B,GAAI8F,mBAAJ,EAA8B,CAG5B,GAFAA,KAASA,iBAATA,IACAA,KAASua,OAAOva,EAAhBA,IACIsZ,MAAMtZ,EAAV9F,IAAoB,MAiFrB,CACLuf,IADK,EAELC,MAFK,EAGLC,KAHK,EAILC,IAJK,EAKLC,IALK,EAMLC,UANK,EAOLC,UAPK,EAQLC,UARK,EASLC,KATK,EAULC,QAVK,EAWLC,OAXK,EAYLC,MAZK,EAaLC,KAbK,IAcLtR,QAdK,EAeLuR,OAAQ,GA/FFta,KAASA,KAATA,SAEAA,KAASua,OAAOva,EAAhBA,IAEEua,OAAOva,EAAPua,IAAJ,IAAyBva,QACrBua,OAAOva,EAAPua,IAAJ,IAAyBva,QAE3B0a,EAwJN,SAAmBlc,EAAG0c,EAAG7B,EAAG8B,GAC1B,UAIA,OAHAlL,EAAI,IAAJA,IAAYuK,WAAYhc,GAAK,EAALA,GAAb,GACX6Q,EAAI,IAAJA,IAAYmL,WAAYU,GAAK,EAALA,GAAb,GACXhL,EAAI,IAAJA,IAAYsK,WAAYnB,GAAK,EAALA,GAAb,GACJ,CAACpJ,EAAD,EAAQZ,EAAR,EAAea,EAAIA,GA7JhBkL,CAAUpb,EAAD,GAASA,EAAT,GAAiBA,EAAjB,GAAyBA,EAAxC0a,IACA,GAAI3R,IAAkBoH,EAAIoK,OAAOva,EAAXmQ,WAEnB,UAAI3R,cACTkc,EA6LJ,SAAkBW,GAChB,uCAMA,IADAA,GADAA,GADAA,GADAA,GADAA,EAAMA,SAANA,eACMA,YAANA,KACMA,YAANA,KACMA,cAANA,SACMA,cAANA,MACIA,iBAA2BA,EAAM,OAANA,GAE/B,WADAA,EAAMA,QAANA,+DACkB,OAAO,EAIzB,GAHAjB,EAAQK,SAASY,EAAD,GAAhBjB,IACAkB,EAASb,SAASY,EAAD,GAAjBC,IAEIC,MADJA,EAAKF,EAALE,KACIA,KAAaA,GAAbA,KAA0BA,GAA1BA,KAAuCA,GAA3C,KAAwDA,EAAY,SAEpE,GADAP,EAAUP,SAASY,EAAD,GAARZ,KAAVO,EACA,MAAIO,EAAY,CA4Cd,MA3CAC,EAAU,KAAOpB,EAAjBoB,KACAC,IACIF,SAAcP,GAAlB,GACEU,IACWH,SAAcP,EAAhB,IAAmCO,SAAcP,GAArD,IAEHW,EADF,MAAIJ,EACQP,EAAVW,GAEUX,EAAVW,GAEFD,GAASlB,UAAU,MAAQA,WAAnB,IAAD,IAAPkB,KACUH,SAAcP,EAAf,IAAJ,MAAqCO,EAC1CG,IACK,MAAIH,IACTI,EAAWX,EAAXW,IACAD,GAASlB,UAAU,MAAQA,WAAnB,IAAD,IAAPkB,KAEEH,SAAcP,GAAlB,GACEY,IACWL,SAAcP,EAAhB,IAAmCO,SAAcP,GAArD,IAEHW,EADF,MAAIJ,EACSP,EAAD,GAAVW,KAEWX,EAAD,GAAVW,KAEFC,GAAS,IAAOpB,UAAU,MAAQA,WAA1B,KAARoB,KACUL,SAAcP,EAAf,IAAkCO,SAAcP,GAApD,IAEHW,EADF,MAAIJ,EACSP,EAAD,GAAVW,GAEWX,EAAD,GAAVW,GAEFC,GAAUpB,UAAU,IAAQA,WAAnB,IAAD,IAARoB,KACWL,SAAcP,EAAhB,IAAmCO,SAAcP,GAArD,IAEHW,EADF,MAAIJ,EACSP,EAAD,GAAVW,IAEWX,EAAD,GAAVW,IAEFC,GAAS,IAAOpB,UAAU,MAAQA,WAA1B,KAARoB,KACSL,SAAcP,EAAlB,KACLY,KAGF,MAAIL,EACFM,GAAU,GAAK,IAAN,GAATA,IACSN,SAAcP,GAAlB,GACLa,IACSN,SAAcP,EAAlB,IACLW,EAAWX,EAAD,GAAVW,GACAE,GAAU,KAAQrB,UAAU,KAAOA,WAA1B,KAATqB,KACSN,SAAcP,GAAlB,IACLW,EAAW,IAAXA,KACAE,GAAU,IAAOrB,UAAU,OAASA,WAA3B,KAATqB,KACUN,SAAcP,EAAf,IAAkCO,SAAcP,GAApD,GACLa,KACSN,SAAcP,EAAlB,KAELa,GAAU,GAAM,KADhBF,EAAWX,EAAXW,KACAE,KAKFC,IAHAH,GAAWD,IAAD,GAAVC,GAGS,IAAqB,IAArB,GAAD,IAARG,EAUAC,EAAU,IAZVC,GAASL,EAAD,IAAoB,IAApB,GAAD,IAAPK,IACAC,GAAWN,EAAD,IAAsB,IAAtB,GAAD,IAATM,IAEqBD,EAArB,EACEE,EACSD,KAAiBA,EAArB,EACLC,EACSJ,KAAgBA,EAApB,EACLI,GAEOF,IAAD,GAANE,GAGFjM,EAAIwK,SAAUuB,KAAkB,IAAlBA,GAAD,IAAD,IAAZ/L,IACAZ,EAAIoL,SAAUwB,KAAoB,IAApBA,GAAD,IAAD,IAAZ5M,IACAa,EAAIuK,SAAUqB,KAAmB,IAAnBA,GAAD,IAAD,IAAZ5L,IACID,EAAJ,MAAcA,OACVZ,EAAJ,MAAcA,OACVa,EAAJ,MAAcA,OACVD,EAAJ,IAAYA,KACRZ,EAAJ,IAAYA,KACRa,EAAJ,IAAYA,UAEZiM,EAAO1B,SAAQ,KAAE,EAAIL,EAAL,KAAhB+B,KACA,MAAiBA,OACbA,EAAJ,IAAeA,KACflM,IACAZ,IACAa,IAEF,MAAO,CACLD,EADK,EAELZ,EAFK,EAGLa,EAAIA,GA3SEkM,CAAN1B,OACK,CAGL,IAFA2B,KACAlD,EAAamD,GAAbnD,SACKjf,EAAL,EAAYA,EAAIif,EAAhB,OAAmCjf,IACjC,GAAIsE,iBAAmB2a,KAAvB,cAAoD,CAClDC,EAAYkD,GAAZlD,QACAiD,KACA3B,EAAM,CACJzK,EAAIwK,SAASrB,cAAD,GADR,IAEJ/J,EAAIoL,SAASrB,cAAD,GAFR,IAGJlJ,EAAIuK,SAASrB,cAAD,QAEd,MAGJ,MAAIiD,EAAgB,CAGlB,IADA,IADA7d,EAAIA,cAAJA,KACIA,SAAgBA,EAAIA,cAAgBA,WAAhBA,GAAgCA,WAAhCA,GAAgDA,WAAhDA,GAAgEA,WAAhEA,GAAgFA,WAApFA,IACftE,EAAL,EAAYA,EAAIsE,EAAhB,OAA0BtE,IACxB,IAAKqiB,GAAM/d,WAAX,IAA6B,MAiD5B,CACLib,IADK,EAELC,MAFK,EAGLC,KAHK,EAILC,IAJK,EAKLC,IALK,EAMLC,UANK,EAOLC,UAPK,EAQLC,UARK,EASLC,KATK,EAULC,QAVK,EAWLC,OAXK,EAYLC,MAZK,EAaLC,KAbK,IAcLtR,QAdK,EAeLuR,OAAQ,GA3DN,IAHAta,KAASya,SAASjc,WAAD,GAAjBwB,IACAA,KAASya,SAASjc,WAAD,GAAjBwB,IACAA,KAASya,SAASjc,WAAD,GAAjBwB,IACK9F,EAAL,EAAYA,EAAZ,EAAmBA,IACjB,GAAIof,MAAMtZ,EAAV9F,IAAoB,MA2CnB,CACLuf,IADK,EAELC,MAFK,EAGLC,KAHK,EAILC,IAJK,EAKLC,IALK,EAMLC,UANK,EAOLC,UAPK,EAQLC,UARK,EASLC,KATK,EAULC,QAVK,EAWLC,OAXK,EAYLC,MAZK,EAaLC,KAbK,IAcLtR,QAdK,EAeLuR,OAAQ,GAxDNI,EAAM,CACJzK,EAAIjQ,EADA,GAEJqP,EAAIrP,EAFA,GAGJkQ,EAAIlQ,EAAI,KAId,OAAOwc,GAAY9B,EAAKvK,EAAGyJ,EAA3B,GAzRkD6C,CAAhD,GACA/gB,sB,2BAGFghB,uBACE,MAAO,OAAStgB,KAAT,SAA2BA,KAA3B,WAA+CA,KAA/C,KAAP,K,EAGFugB,wBACE,MAAO,QAAUvgB,KAAV,SAA4BA,KAA5B,WAAgDA,KAAhD,UAAmEA,KAAnE,QAAP,K,EAGFwgB,uBACE,MAAO,OAASxgB,KAAT,SAA2Boe,WAA3B,IAAsCpe,KAAK2d,WAA3C,MAAsES,WAAtE,IAAiFpe,KAAK4d,WAA7F,M,EAGF6C,8BACE,MAAO,OAASzgB,KAAT,SAA2BA,KAA3B,eAAmDA,KAAnD,UAAP,K,EAGF0gB,wBACE,MAAO,QAAU1gB,KAAV,SAA4Boe,WAA5B,IAAuCpe,KAAK2d,WAA5C,MAAuES,WAAvE,IAAkFpe,KAAK4d,WAAvF,MAAkH5d,KAAlH,QAAP,K,EAGF2gB,uBACE,MAAO,OAAS3gB,KAAT,SAA2Boe,WAA3B,IAAsCpe,KAAKyd,KAA3C,MAAgEW,WAAhE,IAA2Epe,KAAK0d,WAAvF,M,EAGFkD,8BACE,MAAO,OAAS5gB,KAAT,SAA2BA,KAA3B,SAA6CA,KAA7C,UAAP,K,EAGF6gB,wBACE,MAAO,QAAU7gB,KAAV,SAA4Boe,WAA5B,IAAuCpe,KAAKyd,KAA5C,MAAiEW,WAAjE,IAA4Epe,KAAK0d,WAAjF,MAA4G1d,KAA5G,QAAP,K,EAGF8gB,wBACE,MAAO,QAAU1C,WAAV,IAAqBpe,KAAK6d,MAA1B,MAAgDO,WAAhD,IAA2Dpe,KAAK8d,SAAhE,MAAyFM,WAAzF,IAAoGpe,KAAK+d,QAAzG,MAAiIK,WAAjI,IAA4Ipe,KAAKge,OAAxJ,M,EAGF+C,+BACE,MAAO,QAAU/gB,KAAV,UAA6BA,KAA7B,aAAmDA,KAAnD,YAAwEA,KAAxE,MAAP,K,EAGFghB,wBACE,OAAOhhB,KAAKie,KAAO,KAAOG,WAAnB,IAA8Bpe,KAAK2d,WAAnC,MAA8DS,WAA9D,IAAyEpe,KAAK4d,WAArF,K,EAGFqD,+BACE,OAAOjhB,KAAKie,KAAO,KAAOje,KAAnB,eAA2CA,KAAlD,W,EAGFkhB,yBACE,OAAOlhB,KAAKie,KAAO,KAAOG,WAAnB,IAA8Bpe,KAAK2d,WAAnC,MAA8DS,WAA9D,IAAyEpe,KAAK4d,WAA9E,MAAyG5d,KAAhH,S,EAGFmhB,kBAKE,IAJA,MACA,EACA,EACMnE,EAAYkD,GAAlB,QACSpiB,EAAT,EAAgBA,EAAIkf,EAApB,OAAsClf,IAIpC,GAHA+V,EAAIwK,SAASrB,cAAD,GAAZnJ,IACAZ,EAAIoL,SAASrB,cAAD,GAAZ/J,IACAa,EAAIuK,SAASrB,cAAD,GAAZlJ,IACI9T,KAAKqd,MAAQxJ,GAAK7T,KAAKsd,QAAvB,GAAsCtd,KAAKud,OAA/C,EACE,OAAO2C,YAAP,GAGJ,U,EAGFkB,uBAKE,MAAO,IAJGC,GAAMrhB,KAAhB,KACUqhB,GAAMrhB,KAAhB,OACUqhB,GAAMrhB,KAAhB,MACUqhB,GAAV,IAAgBrhB,KAAK2M,U,EAIvB2U,iBACE,MAAO,CAACzN,EAAI7T,KAAL,IAAeiT,EAAIjT,KAAnB,MAA+B8T,EAAI9T,KAAnC,KAA8C+T,EAAI/T,KAAK2M,U,EAGhE4U,iBACE,MAAO,CAAC7C,EAAI1e,KAAL,IAAe2P,EAAI3P,KAAnB,IAA6BwhB,EAAIxhB,KAAjC,UAAiD+T,EAAI/T,KAAK2M,U,EAGnE8U,iBACE,MAAO,CAAC/C,EAAI1e,KAAL,IAAe0hB,EAAI1hB,KAAnB,UAAmC8T,EAAI9T,KAAvC,UAAuD+T,EAAI/T,KAAK2M,U,EAGzEgV,kBACE,MAAO,CAACvf,EAAIpC,KAAL,KAAgB8e,EAAI9e,KAApB,QAAkCid,EAAIjd,KAAtC,OAAmD+e,EAAI/e,KAAvD,MAAmE+T,EAAI/T,KAAK2M,U,EAGrFiV,kBACE,MAAO,CAAC3D,KAAOje,KAAR,KAAmB0hB,EAAI1hB,KAAvB,UAAuC8T,EAAI9T,KAA3C,UAA2D+T,EAAI/T,KAAK2M,U,EAG7EkV,mBACE,IAAM/C,EAAKva,GAAX,IACA,OAAqB,IAAXvE,KAAKqd,IAAL,IAAiBrd,KAAKsd,MAAvB,IAAqCtd,KAAKud,MAA3C,IAAR,G,EAGFuE,qBACE,IAAMvc,EAAKhB,OAAX,GAKA,OAJAvE,KAAA,OACIA,KAAKyd,IAAT,IAAmBzd,KAAA,OAGZ,IAAI6c,EADGuD,GADF7B,GAASve,KAAD,IAAWA,KAAX,IAAqBA,KAAzC,WAC+BA,KAAN,QAAoBA,KAApB,IAA8BA,KAAvD,O,EAIF+hB,uBACE,IAAMxc,EAAKhB,OAAX,GAKA,OAJAvE,KAAA,OACIA,KAAKyd,IAAT,IAAmBzd,KAAA,OAGZ,IAAI6c,EADGuD,GADF7B,GAASve,KAAD,IAAWA,KAAX,IAAqBA,KAAzC,WAC+BA,KAAN,QAAoBA,KAApB,IAA8BA,KAAvD,O,EAIFgiB,oBACE,IAAMzc,EAAKhB,OAAX,GAKA,OAJAvE,KAAA,aACIA,KAAK0d,UAAT,IAAyB1d,KAAA,aAGlB,IAAI6c,EADGuD,GADF7B,GAASve,KAAD,IAAWA,KAAX,IAAqBA,KAAzC,WAC+BA,KAAN,QAAoBA,KAApB,IAA8BA,KAAvD,O,EAIFiiB,mBACE,IAAM1c,EAAKhB,OAAX,GAKA,OAJAvE,KAAA,aACIA,KAAK0d,UAAT,IAAyB1d,KAAA,aAGlB,IAAI6c,EADGuD,GADF7B,GAASve,KAAD,IAAWA,KAAX,IAAqBA,KAAzC,WAC+BA,KAAN,QAAoBA,KAApB,IAA8BA,KAAvD,O,EA3Ie6c,GA8RnB,SAASuD,GAAY9B,EAAKvK,EAAG2K,EAAG/O,GAC9B,kBAoDqBvN,EAnDrB,UACA,OAAI2R,IAAaA,KACjBmO,EAoQF,SAAkBrO,EAAGZ,EAAGa,GACtB,kBAAoCwK,EAApC,GAOA,IANAA,KAASzK,EAATyK,IACAA,KAASrL,EAATqL,IACAA,KAASxK,EAATwK,IACA6D,EAAM7D,EAAN6D,GACArC,EAAMxB,EAANwB,GACAsC,IACKtkB,EAAL,EAAYA,EAAIwgB,SAAhB,EAAgCxgB,IAC1BwgB,EAAIxgB,EAAJwgB,IAAJ,IAAwB6D,EAAM7D,EAAIxgB,EAAVqkB,IACpB7D,EAAIxgB,EAAJwgB,IAAJ,IAAwBwB,EAAMxB,EAAIxgB,EAAVgiB,GAAiBsC,EAAWtkB,EAAXskB,GAE3C,GAAIA,IACF1D,GAAKJ,KAASA,EAAV,KAAqBwB,EAAzBpB,IAEF,GAAI0D,IACF1D,EAAI,GAAKJ,KAASA,EAAV,KAAqBwB,EAA7BpB,IAEF,GAAI0D,IACF1D,EAAI,GAAKJ,KAASA,EAAV,KAAqBwB,EAA7BpB,IAEExB,MAAJ,KAAewB,MACfA,OACA,IAAYA,QACZ8C,GAAKW,EAAD,GAAJX,EAEE7R,EADEwS,GAAJ,EACExS,EAEI6R,EAAJ,IACO1B,EAAD,IAAeA,EAAnBnQ,IAEKmQ,EAAD,IAAe,EAAIA,EAAvBnQ,GAIJ,MAAO,CAAC+O,EAAD,EAAQ/O,EADfA,IACsB6R,EAAIA,GAvSpBa,CAAS/D,EAAD,EAAQA,EAAR,EAAeA,EAA7B4D,GACAI,EAwSF,SAAkBzO,EAAGZ,EAAGa,GACtB,MACAD,OACAZ,OACAa,OACA,IAAIgM,EAAM1B,aAAV,GACI+D,EAAM/D,aAAV,GACIc,EAASY,EAAb,EAEEpB,EADF,GAAIQ,EACFR,EACS7K,GAAJ,GACEZ,EAAD,GAAD,EAAD,EAAJyL,IACSzL,GAAJ,IACGa,EAAD,GAAD,EAAD,GAAD,EAAJ4K,MAEQ7K,EAAD,GAAD,EAAD,GAAD,EAAJ6K,IAIF,MAAO,CAACA,EAAD,EAAQgD,EAFfA,EAEsB5N,EADjB,EAALyO,GA1TMC,CAASlE,EAAD,EAAQA,EAAR,EAAeA,EAA7BgE,GACAG,EA4TF,SAAmB5O,EAAGZ,EAAGa,GACvB,YACAD,OACAZ,OACAa,OACA,IAAIgM,EAAM1B,aAAV,GAEA,IADAW,EAAI,EAAJA,IAEE3c,IACA0c,IACA7B,MAEA7a,GAAK,EAAIyR,EAAL,IAAe,EAAnBzR,GACA0c,GAAK,EAAI7L,EAAL,IAAe,EAAnB6L,GACA7B,GAAK,EAAInJ,EAAL,IAAe,EAAnBmJ,IAEF,MAAO,CAAC7a,EAAD,EAAQ0c,EAAR,EAAe7B,EAAf,EAAsB8B,EAAIA,GA5U1B2D,CAAUpE,EAAD,EAAQA,EAAR,EAAeA,EAA/BmE,GACAjF,EAAOkB,GAAKwD,EAAZ1E,EACAC,EAAO9N,GAAKuS,EAAZzE,EACAQ,EAmIF,SAAmBT,GACjB,KAAOA,GAAP,KACEA,OAEF,GAAIA,EAAJ,GAAe,MAAO,IAAOA,EAAd,GACf,GAAIA,EAAJ,IAAgB,MAAO,KAAQA,EAAD,IAAd,GAChB,GAAIA,EAAJ,IAAgB,MAAO,KAAQA,EAAD,KAAd,GAChB,GAAIA,EAAJ,IAAgB,MAAO,KAAQA,EAAD,KAAd,GAChB,GAAIA,EAAJ,IAAgB,MAAO,KAAQA,EAAD,KAAd,GAChB,GAAIA,EAAJ,IAAgB,MAAO,KAAQA,EAAD,KAAd,GA5ITmF,CAAP1E,GACArS,EAAQ,CACNyR,IAAMiB,EADA,EAENhB,MAAQgB,EAFF,EAGNf,KAAOe,EAHD,EAINd,IAJM,EAKNC,IALM,EAMNC,UAAYwE,EANN,EAONvE,UAAY2E,EAPN,EAQN1E,UAAY0E,EARN,EASNzE,KAAO4E,EATD,EAUN3E,QAAU2E,EAVJ,EAWN1E,OAAS0E,EAXH,EAYNzE,MAAQyE,EAZF,EAaNxE,KAbM,EAcNtR,QAdM,EAeNuR,OAAQ,IA4BW9b,EA1BrBwJ,GA2BAxJ,IAAQ+b,OAAO/b,cAAfA,IACAA,QAAU+b,OAAO/b,gBAAjBA,IACAA,OAAS+b,OAAO/b,eAAhBA,IACAA,MAAQ+b,OAAO/b,cAAfA,IACAA,MAAQ+b,OAAO/b,cAAfA,IACAA,YAAc+b,OAAO/b,oBAArBA,IACAA,YAAc+b,OAAO/b,oBAArBA,IACAA,YAAc+b,OAAO/b,oBAArBA,IACAA,OAAS+b,OAAO/b,eAAhBA,IACAA,UAAY+b,OAAO/b,kBAAnBA,IACAA,SAAW+b,OAAO/b,iBAAlBA,IACAA,QAAU+b,OAAO/b,gBAAjBA,IACAA,OAASA,mBAAsBgc,WAAWD,OAAO/b,cAAjDA,KACAA,UAAY+b,OAAO/b,kBAAnBA,IAxCAwJ,EAyCA,GArCO,CACLyR,IADK,EAELC,MAFK,EAGLC,KAHK,EAILC,IAJK,EAKLC,IALK,EAMLC,UANK,EAOLC,UAPK,EAQLC,UARK,EASLC,KATK,EAULC,QAVK,EAWLC,OAXK,EAYLC,MAZK,EAaLC,KAbK,IAcLtR,QAdK,EAeLuR,OAAQ,GAGZ,SAASgC,GAAY3a,GACnB,eAAIA,EAAsB,CAAC,YAAD,4sDAAP,eACnB,QAAIA,EAAqB,CAAC,SAAD,kyCAAP,eAAlB,EAmBF,SAASgZ,GAASf,EAAKC,EAAKmF,GAC1B,QAWA,MAAO,CAAC/O,EAHRA,IAAIgP,GADJC,EAAKF,KAJHG,EADGH,GAAL,GACOA,GAASnF,EAAdsF,GAEKH,IAAeA,EAApBG,GAGeA,GAPjBvF,OAOIqF,GAGW5P,EAFfA,IAAI4P,GAASC,EAAIC,EAAbF,GAEkB/O,EADtBA,IAAI+O,GAASC,EAAIC,EAAIvF,EAAjBqF,IAGN,SAASA,GAASC,EAAIC,EAAIvF,GAGxB,OAFIA,EAAJ,IAAaA,MACTA,GAAJ,IAAcA,MACVA,EAAJ,GAAqBuF,EAAD,KAApB,EACQvF,EAAH,IACGA,EAAH,GAAoBuF,EAAD,IAAa,EAAb,GAAnB,EACOD,EAEd,SAAStE,GAAShB,EAAKiB,EAAOT,GAC5B,UAAYgF,EAAZ,GAUA,IATA1E,EAAMC,GAASf,EAAK,EAApBc,IACA0E,KAAY1E,IAAZ0E,IACAA,KAAY1E,IAAZ0E,IACAA,KAAY1E,IAAZ0E,KACAC,EAAMxE,EAANwE,GACA,IACExE,EAAQN,QAAQM,EAAD,WAAfA,IACAT,EAAQG,QAAQH,EAAD,WAAfA,KAEGlgB,EAAL,EAAYA,EAAZ,EAAmBA,IACjBklB,MAAc,EAAI,EAAlBA,EACAA,QACAA,KAAY7E,OAAZ6E,IAAmBA,MAErB,MAAO,CAACnP,EAAImP,EAAL,GAAgB/P,EAAI+P,EAApB,GAA+BlP,EAAIkP,EAAO,IAwOnD,SAAS3B,GAAM9c,GACb,OAAO6Z,sCAAP,KAEF,SAAS+B,GAAM5a,GACb,MAAQ,yBAAyB7B,QAAQ6B,IAAzC,EClnBG,IAAM2d,GAAmB,SAAC7gB,EAAD,GAE5B,IAAM8gB,EAAY,SAACC,EAAD,KACd,SACIC,GAAUD,EAAd,OAAwCE,EACjCF,EAAP,GAFwBE,GAiCtBC,EA5Bc,WAChB,IAAMzE,EAgCd,SAAsBzc,GAClB,OAAOA,EAAP,OACI,WAAa,MAAQ,CAAE/D,KAAF,OAAgBklB,OAAQ,CAAC,EAAG,EAAG,EAA/B,KAAyCrB,IAAK,CAAC,EAAG,EAAG,EAArD,GAA4DrC,IAAK,CAAC,IAAK,IAAK,IAA5E,GAAqF2D,cAAe,CAAC,EAAG,EAAG,EAAG,IACnI,WAAa,MAAQ,CAAEnlB,KAAF,OAAgBklB,OAAQ,CAAC,IAAM,IAAM,IAArC,KAAkDrB,IAAK,CAAC,EAAG,EAAG,EAA9D,GAAqErC,IAAK,CAAC,EAAG,EAAG,EAAjF,GAAwF2D,cAAe,CAAC,EAAG,EAAG,EAAG,IACtI,WAAa,MAAQ,CAAEnlB,KAAF,MAAeklB,OAAQ,CAAC,EAAG,IAA3B,KAAwCrB,IAAK,MAACuB,EAAW,EAAzD,GAAgE5D,IAAK,MAAC4D,EAAW,EAAjF,GAAwFC,IAAK,CAA7F,KAAoGF,cAAe,CAAC,EAAG,EAAG,IAC/I,WAAa,MAAQ,CAAEnlB,KAAF,MAAeklB,OAAQ,CAAC,EAAG,IAA3B,KAAwCrB,IAAK,MAACuB,EAAW,EAAzD,GAAgE5D,IAAK,MAAC4D,EAAW,EAAjF,GAAwFC,IAAK,CAA7F,KAAoGF,cAAe,CAAC,EAAG,EAAG,IAC/I,QAAS,aAtCCG,CAAV,GACA,MAEA,IAAMC,EAAKC,QAAahF,EAAxB,MACMuE,EAASvE,eAAezc,EAA9B,MAEA,KAAIghB,GAAUvE,SAAd,SAEA,IAAMiF,EAAQF,EAAd,GACMG,EAAcC,GAAeH,EAAnC,UAGMI,EAAQC,GAAQJ,EAFR1hB,SAAWyc,SAAXzc,GAA8B2hB,EAA5C,OACcb,EAAUrE,EAAD,cAAvB,GACmCkF,EAAnC,uBACM7B,EAAQgB,EAAUrE,EAAD,IAAvB,GACMgB,EAAQqD,EAAUrE,EAAD,IAAvB,GACM6E,EAAQR,EAAUrE,EAAD,IAAvB,GACA+E,KAkER,SAAejlB,EAAf,KACI,IAAMwlB,EAASC,MAAyBlG,OAAzBkG,kBAAf,EACMC,EAASD,MAAyBlG,OAAzBkG,kBAAf,EACME,EAAKnG,WAAX,GAEA,OADWA,WAAX,GAtEkBoG,CA6DtB,SAAkB5lB,EAAlB,GACI,SACOA,EAAP,EADiBA,EA9DO6lB,CAASP,EAAV,KAAnBL,GAEAC,eAAsBhF,EAAtBgF,KAEA,IAAMY,EAAcC,GAAeb,EAAnC,OACMlY,EAAQgZ,GAASd,EAAD,MAAtB,GAGA,OAFAe,GAAYf,EAAD,MAAXe,GAEA,IAGaC,GAEjBhB,kBAaH,IAAMG,GAAiB,SAACc,GAErB,OAAIA,UAAmBA,EAAvB,QAAgD,CAAEvB,OAAF,KAAiBwB,sBAAuB,GACpFD,UAAmBA,EAAvB,SAAiD,CAAEvB,OAAF,IAAgBwB,sBAAuB,GACpFD,EAAJ,OAA4B,CAAEvB,OAAF,GAAewB,sBAAuB,GAE9DD,WAAoBA,EAAxB,SAAkD,CAAEvB,OAAF,IAAgBwB,sBAAuB,GACrFD,EAAJ,QAA6B,CAAEvB,OAAF,IAAewB,sBAAuB,GAC/DD,EAAJ,SAA8B,CAAEvB,OAAF,GAAcwB,sBAAuB,GAC5D,CAAExB,OAAF,EAAawB,sBAAuB,IAGzCH,GAAc,SAACI,EAAD,GACH3lB,OAAA,gBAA0B,SAAAyf,GAAC,OAAIA,IAAMkG,EAANlG,QAAJ,WAA0BA,KAClEtb,SAAa,SAAApD,GACT,UACI,WAAa,OAAO6kB,GAAgBD,EAAOrZ,EAA9B,SACb,WAAa,OAAOuZ,GAAgBF,EAAOrZ,EAA9B,UACb,WAAa,OAAOwZ,GAAeH,EAAOrZ,EAA7B,SACb,WAAa,OAAOyZ,GAAeJ,EAAOrZ,EAA7B,cAKzB,SAASuY,GAAQvlB,EAAjB,GACI,GAAIylB,GAAJ,GAAsC,OAAOzlB,EAC7C,IAAM0mB,EAAKlH,YAAX,GACA,OAAOA,YAAYxf,EAAQuf,OAAT,SAAXC,GAAP,EAIJ,SAASiG,GAAkBzlB,GACvB,YAAOA,OAAP,OAA8BA,EAgBlC,IAAM2mB,GAAM,SAAC3mB,GACT,OAAUulB,GAAO,IAACvlB,EAAlB,QAGE4mB,GAAM,SAAC5mB,GACT,SAAUwf,WAAV,IAGEuG,GAAiB,SAAC/N,GACpB,IAAMiN,EAAKjN,EAAMA,EAAjB,QACA,MAAS,MAAO,GAChB,OAAOA,EAAP,QACI,WAAa,aAAc4O,GAAI3B,EAAlB,SAA6B0B,GAAI1B,EAAjC,SAA4C0B,GAAI1B,EAAhD,QACb,WAAa,aAAc2B,GAAI3B,EAAlB,SAA6B0B,GAAI1B,EAAjC,SAA4C0B,GAAI1B,EAAhD,QACb,WAAa,cAAe0B,GAAI1B,EAAnB,SAA8B0B,GAAI1B,EAAlC,SAA6C0B,GAAI1B,EAAjD,SAA4D0B,GAAI1B,EAAhE,QACb,QAAS,cAAe2B,GAAI3B,EAAnB,SAA8B2B,GAAI3B,EAAlC,SAA6C2B,GAAI3B,EAAjD,SAA4DA,EAA5D,SAIXe,GAAW,SAAChO,EAAD,GACb,IAAM7E,EAAkB,IAAI8K,GAA5B,GACA,GAAIjG,mBAAJ,IAA+BA,UAAqB,OAAO7E,EAC3D,IAAM0T,EAAiB1T,EAAvB,QAEA,OADA0T,IAAmB7O,OAAnB6O,GACO,IAAI5I,GAAX,IAGEqI,GAAkB,SAACtO,EAAD,GACpBA,UAAgBhL,EAAhBgL,EACAA,UAAgBhL,EAAhBgL,EACAA,UAAgBhL,EAAhBgL,EACAA,UAAgBhL,EAAhBgL,GAEEuO,GAAkB,SAACvO,EAAD,GACpBA,UAAgBhL,EAAhBgL,EACAA,UAAgBhL,EAAhBgL,EACAA,UAAgBhL,EAAhBgL,EACAA,UAAgBhL,EAAhBgL,GAEEwO,GAAiB,SAACxO,EAAD,GACnBA,UAAgBhL,EAAhBgL,EACAA,UAAgBhL,EAAhBgL,EACAA,UAAgBhL,EAAhBgL,GAEEyO,GAAiB,SAACzO,EAAD,GACnBA,UAAgBhL,EAAhBgL,EACAA,UAAgBhL,EAAhBgL,EACAA,UAAgBhL,EAAhBgL,GC5HS8O,GAAyB,SAAC3L,GACnC,IAAMnD,EAuBV,SAAqBmD,GACjB,IAAMnD,EAA+B,CACjC+O,cAAe,CACXtlB,IADW,GAEXzB,MAAO,MAEXqmB,MAAO,CACHrR,KAAM,CAAC,EAAG,EAAG,EADV,GAEH6O,KAAM,CAAC,EAAG,EAAG,EAFV,GAGHmD,KAAM,CAAC,EAAG,EAHP,GAIHC,KAAM,CAAC,EAAG,EAJP,GAKHC,OAAQ,IAEZf,SAAU,CACNgB,UADM,EAENC,SAFM,EAGNC,QAAQ,GAEZC,YAAa,YACTtP,wBACAmD,cAAkBnD,gBAAlBmD,QAEJS,OAAQT,EAAMS,QAElB,SA/Cc2L,CAAd,GACMC,EAkDV,SAA0BxP,GAEtB,IAIMrZ,EAAS,CACX8oB,SAAU,IADC,GAEXjY,GAFW,mBAGXoM,OAAQ5D,EAHG,OAIX0P,kBAAmB,YAEf/oB,6CAMJgpB,aAhBsB,SAAClkB,KAiBvBmkB,WAfsB,SAACnkB,KAgBvBokB,aAjBsB,SAACpkB,MAmB3B,SAxEmBqkB,CAAnB,GACMC,EA0EV,SAA+B/P,GAC3B,OAAO,YAKH,OAJAvU,oBACAuU,oBAA0BvU,EAA1BuU,SACAA,kBAAwBvU,EAAxBuU,OACAA,mBAAyBvU,EAAzBuU,SACA,GAhFoBgQ,CAAxB,GAEA,MAAO,CACHC,YADG,cAECjQ,sBACAA,yBAEJvZ,SALG,YAMCD,cACAuY,0CACAA,yCAEJnY,WAVG,YAWCJ,gBACAuY,6CACAA,8CC5CL,IAAMmR,GAAsD,CAC/D1nB,OAD+D,aAG/D8a,KAAM,CACF,CACI,CAAE3b,KAAF,WAAoBD,KAApB,IAA+BD,MAAO,QACtC,CAAEE,KAAF,WAAoBD,KAApB,IAA+BD,MAAO,QACtC,CAAEE,KAAF,WAAoBD,KAApB,IAA+BD,MAAO,QACtC,CAAEE,KAAF,WAAoBD,KAApB,IAA+BD,MAAO,QAEtC,CAAEE,KAAF,WAAoBD,KAApB,IAA+BD,MAAO,QACtC,CAAEE,KAAF,WAAoBD,KAApB,IAA+BD,MAAO,QACtC,CAAEE,KAAF,WAAoBD,KAApB,IAA+BD,MAAO,QACtC,CAAEE,KAAF,WAAoBD,KAApB,IAA+BD,MAAO,SAE1C,CACI,CAAEE,KAAF,WAAoBD,KAApB,IAA+BD,MAAO,QACtC,CAAEE,KAAF,WAAoBD,KAApB,IAA+BD,MAAO,QACtC,CAAEE,KAAF,WAAoBD,KAApB,IAA+BD,MAAO,QACtC,CAAEE,KAAF,WAAoBD,KAApB,IAA+BD,MAAO,QAEtC,CAAEE,KAAF,WAAoBD,KAApB,IAA+BD,MAAO,QACtC,CAAEE,KAAF,WAAoBD,KAApB,IAA+BD,MAAO,QACtC,CAAEE,KAAF,WAAoBD,KAApB,IAA+BD,MAAO,QACtC,CAAEE,KAAF,WAAoBD,KAApB,IAA+BD,MAAO,SAI1C,CACI,CAAEE,KAAF,MAAeD,UAAf,EAAgCE,QAAhC,EAA4CC,OAAQ,GACpD,CAAEF,KAAF,MAAeD,UAAf,EAAgCE,QAAhC,EAA4CC,OAAQ,GACpD,CAAEF,KAAF,MAAeD,UAAf,EAAgCE,QAAhC,EAA4CC,OAAQ,GACpD,CAAEF,KAAF,MAAeD,UAAf,EAAgCE,QAAhC,EAA4CC,OAAQ,GAEpD,CAAEF,KAAF,MAAeD,UAAf,EAAgCE,QAAhC,EAA4CC,OAAQ,GACpD,CAAEF,KAAF,MAAeD,UAAf,EAAgCE,QAAhC,EAA4CC,OAAQ,GACpD,CAAEF,KAAF,MAAeD,UAAf,EAAgCE,QAAhC,EAA4CC,OAAQ,GACpD,CAAEF,KAAF,MAAeD,UAAf,EAAgCE,QAAhC,EAA4CC,OAAQ,IAExD,CACI,CAAEF,KAAF,MAAeD,UAAf,EAAgCE,QAAhC,EAA4CC,OAAQ,GACpD,CAAEF,KAAF,MAAeD,UAAf,EAAgCE,QAAhC,EAA4CC,OAAQ,IACpD,CAAEF,KAAF,MAAeD,UAAf,EAAgCE,QAAhC,EAA4CC,OAAQ,IACpD,CAAEF,KAAF,MAAeD,UAAf,EAAgCE,QAAhC,EAA4CC,OAAQ,IAEpD,CAAEF,KAAF,MAAeD,UAAf,EAAgCE,QAAhC,EAA4CC,OAAQ,IACpD,CAAEF,KAAF,MAAeD,UAAf,EAAgCE,QAAhC,EAA4CC,OAAQ,IACpD,CAAEF,KAAF,MAAeD,UAAf,EAAgCE,QAAhC,EAA4CC,OAAQ,IACpD,CAAEF,KAAF,MAAeD,UAAf,EAAgCE,QAAhC,EAA4CC,OAAQ,MAK5DsoB,SAAU,GClDRC,GAAa,SAAC1X,GAEhB,IAAQ2X,EAAsB3X,EAA9B,QAAiB4X,EAAa5X,EAA9B,SAGM7L,EAAOnE,YAAb,GAKA,OAAO,qBAAQ+M,UAAW,IACrB5I,EAAA,KAAS,SAAAsb,GACN,OAAO,sBAAa1e,IAAb,EAAqBuL,MAAOqb,EAA5B,GAAwCtY,QAAS,kBAN1CtO,EAM0C,OAJ5D6mB,GAAYA,EAAZA,IAFiB,IAAC7mB,UAapB8mB,GAAc,SAAC7X,GAEjB,IAAQ1D,EAAU0D,EAAlB,MAEM8X,EAAcxb,gBAA2BA,EAA3BA,cAApB,EAEMnG,EAAQ,CACV6H,OADU,OAEVzC,gBAAiBe,gBAA2BA,EAA3BA,cAAiDA,GAGtE,OAAO,qBAAQ6C,IAAR,EAAoBE,QAAS,WAChCW,WAAiBA,EAAjBA,YADJ,I,8IC9BE+X,GAAKC,WAAX,aAIaC,GAAoB1N,kBADQ,CAAE2N,UAAF,EAAmB/P,KAAM,SAG5DgQ,GAAY3X,aAAW,mBAAkBqI,YAAa,CAAE9H,KAAM,2BAC9DqX,GAAe,CACjB,SAAY,CAAEC,WAAF,SAAwBC,kBAAmB,sBACvD,SAAY,CAAED,WAAF,WAA0BC,kBAAmB,oBAKvDC,GAAiB,SAACvY,GACpB,IAAMuD,EAAOvD,QAAb,GACM5I,EAAU+gB,GAAU,CACtBK,UAAWxY,2BADW,iBAEtBjC,MAFsB,EAGtBC,OAAQuF,IAEZ,OAAO,yBAAKvE,UAAS,oBAAsB5H,EAAQ2J,MAAnD,WAIS0X,GAAqB,SAACzY,GAC/B,IAAMuD,EAAOvD,QAAb,GACMkY,EAAWlY,EAAjB,MACM0Y,EAAN,EAhB8C,WAA5B,WAiBZthB,EAAU+gB,GAAU,CAAEQ,SAAF,WAAwBxa,QAAxB,GAAqCD,MAArC,EAA+C,wBAAyB,CAACZ,QAAS,KACtGsb,EAAgB3O,uBAAY,YAC9BjK,YAAkBA,WAAlBA,KADJ,IAGA,OAAO,yBAAKhB,UAAW5H,EAAQ2J,MAC3B,uBACIwC,KAAMA,aADV,SAEIsV,aAAYT,MAFhB,WAGIta,MAAOsa,MAHX,kBAII/Y,QAAS,kBAAMuZ,GAAe5Y,EAArB,SAET,sBAAqBkY,SAArB,EAA+B3U,YA0BrCuV,GAAa,SAAC9Y,GAEhB,IAAOlB,EAAqEkB,EAA5E,GAAqBjC,EAAuDiC,EAA5E,MAA4BhC,EAAgDgC,EAA5E,OAAmEL,EAAnE,QACMoZ,EAAW,EAAO,cAAP,EAAjB,KAGA,EAA0B/O,oBAA0B,WAEhD,UAEOgP,cADQjB,IAAMA,WAArB,IACOiB,WAFe,cAFnB1R,EAAP,KAAcZ,EAAd,KAMMuS,EAAY,SAAC3R,GACfyR,GAAYhB,aAAZgB,GACArS,MAIEwR,EAAN,aAAiB5Q,EACjB,EAAsC0C,qBAA/BkP,EAAP,KAAoBC,EAApB,KACA,EAAsCnP,qBAA/BoP,EAAP,KAAoBC,EAApB,KAEMC,EAAqBrP,uBAAY,WACnCmP,GAAeA,EAAfA,UACD,CAFH,IAIAlN,qBAAU,WAEN,OADApH,oCACO,kBAAMA,oCAAN,MACR,CAHHoH,IAKAA,qBAAU,WACN,KAAc,CACV,IAAIqN,EAAJ,KACA,KAAc,CACV,IAAMC,EAAazB,WAAWgB,EAA9B,gBACA,KAEI,IAEIQ,EADOpoB,WAAPsoB,GAEF,WAOV,OAJAN,EAAeI,GAAU,CACrBxb,MAAOA,GAAS+G,oBADK,EAErB9G,OAAQA,GAAU8G,qBAAuB,IAEtC,WACHwU,QAIT,CAACpB,EAtBJhM,IAwBA,IAAM0M,EAAgB3O,uBAAY,YAC9B,IAAMjX,EAAW0mB,EAAS,WAA1B,WACAT,KACA,aAAIjmB,GACAsmB,MAEL,CANH,IAQMK,EAAmB1P,uBAAY,YACjCoP,KACIrZ,EAAJ,cACIA,oBAHR,IAOM4Z,EAAqB3P,uBAAY,WACnCgP,cACAE,UAFJ,IAKMU,EAAkB1B,GAAU,CAC9BQ,SAAU,aAGRmB,EAAiB5B,GAAYlY,EAAnC,aAEA,OAAO,kBAACuK,IAAD,eAKEuP,GACD,yBAAKhb,GAAIkB,EAAT,GAAmBhB,UAAS,8BAAmC6a,EAAgB9Y,MAC3E,kBAACkX,GAAD,UAA4B3oB,MAAO,CAAE4oB,SAAF,EAAY/P,KAAM,SAC/CnI,EAFV,UAII,sBAAoB+Z,SAApB,EAA6CzS,MAAO4Q,KAMxDA,MAEA,kBAACD,GAAD,UAA4B3oB,MAAO,CAAE4oB,SAAF,EAAY/P,KAAM,cACjD,wBAAW4Q,SAAUA,GAArB,KAA2DiB,SAA3D,EAAyFC,OAAQN,IAC5F3Z,EApBjB,aAgDSka,GAAY,SAACla,GAEtB,IAAO+Y,EAA0E/Y,EAAjF,SAAmChR,EAA8CgR,EAAjF,KAAyCjB,EAAwCiB,EAAjF,SAA2Dga,EAAsBha,EAAjF,SAAwEL,EAAxE,QACA,EAA8CqK,qBAAvCmQ,EAAP,KAAwBC,EAAxB,KACMnb,EAAMob,qBAAZ,QA6CA,OA3CAnO,qBAAU,WACN,IAAMvJ,EAAU3S,OAAA,gBAA0B,SAAAgU,GAAK,OA0FvD,SAAmBA,GACf,IAAOjT,EAAciT,EAArB,GAAY1U,EAAS0U,EAArB,GACA,OAAUjT,EAAV,IAPJ,SAAwBzB,GACpB,yBAAWA,EAA4BA,GAChCA,YAAP,KAKiBgrB,CAAjB,GA5FuDC,CAAJ,MAA/B,KAAhB,MACAtb,YAAgB6F,eAAgB9V,GAAhB8V,GAAhB7F,GAEA,IAAMub,EAAe,WACjB,GAAIvb,EAAJ,UAAmB,CACf,IAAMwb,EAAYxb,mCAAlB,OACAA,yCA0ChB,SAAwBhR,EAAxB,GAEE,IAAMysB,EAAStsB,WAAWuF,EAA1B,aAEMgnB,EAAgBD,EAAA,QAAc,SAAAvb,GAClC,OAAO7I,4BAAiC6I,EAAxC,QAGIyb,EAAeF,EAAA,QAAc,SAAAvb,GAAG,OACpCA,QAAYA,yBADwB,KAKhC0b,EAAQF,EAAA,QAAqB,qBAAsBE,SAAazsB,WAAW0sB,EAA9C,aAAnC,IACMC,EAAO9sB,gBAAb,SACA4sB,WAAc,SAAAtW,GAAC,OAAIwW,cAAiB9sB,iBAAsBsW,EAA3C,aACftW,sBAEA2sB,WAAqB,SAAAI,GACnB,IAAMC,EAAwBhtB,gBAA9B,QACAgtB,mBACAA,OAAYD,EAAZC,KACAhtB,yBA/DYitB,CAAejc,YAAD,SAAdic,UAmESjtB,EAlEOgR,YAAD,SAkE/B,EAlEgBkc,SAmEI/sB,WAAWuF,EAA3B,SACAynB,SAAgB,YACZ,GAAIC,eAAJ,iBAA0C,CACtC,IAAMC,EAAYrtB,gBAAlB,UACAqtB,MAAgBD,EAAhBC,IACArtB,0BAvEIstB,GAAsBtc,EAAD,UAArBsc,UAEAnB,KA+DhB,IAAyBnsB,EAAzB,IA3D+B,SAAjButB,IACF,IAAKvc,EAAD,WAAJ,aAAsBA,gCAClB,OAAO6F,6BAAP,GAEJ7F,uCAAyC,WACrC,KAAc,aACJsa,EAAc,CAChBtb,IAAK6Q,qBAAW7P,EAAX6P,8BAAW7P,EADA,SAEhBb,KAAM0Q,qBAAW7P,EAAX6P,8BAAW7P,EAFD,SAGhBlB,MAAO+Q,qBAAW7P,EAAX6P,8BAAW7P,EAHF,YAIhBjB,OAAQ8Q,qBAAW7P,EAAX6P,8BAAW7P,EAAX6P,cAEZ7d,qBAAqB8nB,EAArB9nB,eAAgDE,eAAhDF,IAEJ,GACI+oB,OAIJha,EAAJ,QAAiBf,2BAA+Be,EAA/Bf,OACjBub,IACAxa,UAAgBA,SAAaf,EAA7Be,WAIJwb,KAzCJtP,IA2CA,EACOuP,mBAAP,GAD6BlR,wBAAP,OAqD1B,IAAMgR,GAAwB,SAACG,EAAD,GAC1B,IAAMC,EAAatV,EAAnB,KAiBiB,IAAIuV,kBAfJ,cACb,IAAM3tB,EAASytB,EAAf,SACAG,WAAsB,SAAAC,GACjBA,sBAAyC,YACtC,aAAI3lB,YACIA,EAAJ,MAAiB,CACb,IAAM0kB,EAAQzsB,WAAW+H,QAAzB,UACM4lB,EAAkB9tB,gBAAxB,SACA4sB,WAAc,mBAAekB,cAA4B9tB,iBAAsB+tB,EAAjE,aACd/tB,gCAOpBguB,UAjBe,CAAEC,WAAW,KCxR1BC,GAAqB,SAArBA,EAAsBnc,GAExB,IAAQlB,EAAsDkB,EAA9D,GAAYlC,EAAkDkC,EAA9D,MAAsCoc,EAAwBpc,EAA9D,WAAkDqc,EAAYrc,EAA9D,QAEM6L,EAAOC,qBAAb,GACMwQ,EAAMxQ,qBAAZ,IACA,GAAIsQ,IAAJ,EACI,OACA,sBAAYte,MAAOA,GAAnB,uBAAoDgB,GAAIA,GACpD,qBAAQxB,QAAS,IACb,4BAA+B+e,SAAO,OASlD,IAAMnE,EAAN,cAAiBoE,OACjB,GAAKF,IAAL,EAA8B,OAAO,qBAAQ9iB,aAAW,GAA1B,GAI9B,MAA8B0Q,oBAA2B,kBAAMhK,EAAN,WAAlD2X,EAAP,KAAgB4E,EAAhB,KACA,EAAgCvS,oBAAiB,kBAAMha,eAAN,MAA1CwsB,EAAP,KAAiBC,EAAjB,KAEAvQ,qBAAU,WAEN,OADAwQ,cACO,kBAAMA,aAAN,MAFXxQ,IAKA,IAAM0K,EAAc3M,uBAAY,cAC5BsS,GAAW,SAAA1Z,GAAM,0CADrB,IAIM6Z,EAAcC,mBAAQ,kBAAMvG,GAAuB,CAAEQ,YAAF,EAAe1L,OAAQA,OAAhF,IAOA,OAAO,kBAACX,IAAD,cACHA,qBADG,MAEH,sBAAYoN,QAAZ,EAA8BC,SAPR,SAAC7mB,GACvB2rB,gBAAkC/E,EAAlC+E,IACAD,U,kDC1BOG,GAjCiB,WAE9B,MAA8B5S,mBAAc,CAC1C6S,aAAc,YACdC,eAAgB,OAChBC,OAAQ,MACRC,WAAY,OACZC,KAAM,SALR,oBAAOtF,EAAP,KAAgB4E,EAAhB,KAYA,OACE,kBAAC,GAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,GAAD,CAAe5E,QAASA,KAE1B,kBAAC,IAAD,KACE,kBAAC,GAAD,CACE7Y,GAAG,4EACH6Y,QAASA,EACTrY,SAdW,SAAC4d,GACpBX,EAAWW,IAcHd,YAAY,QAUlBe,GAAgB,SAACnd,GACDA,EAAZ2X,QACR,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,eACA,kBAAC,IAAD,KACE,2BAAIyF,IAAcC,WAAW,KAE/B,kBAAC,IAAD,KACE,2CACA,gDCLOC,GA9BH,WACV,OACE,kBAAC,KAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQlgB,SAAQ,QAAWE,QAAS,IAClC,kBAAC,IAAD,CAAQrC,QAAM,EAACgD,IAAK,IAClB,6BACE,4BACE,4BACE,kBAAC,KAAD,CAAMsf,GAAG,KAAT,qBAOV,kBAAC,IAAD,CAAQrkB,MAAI,EAACjB,kBAAgB,EAACqF,QAAS,IACrC,kBAAC,GAAD,KACE,kBAAC,KAAD,KACE,kBAAC,KAAD,CAAOkgB,KAAK,KACV,kBAAC,GAAD,aC/BhB/B,IAASgC,OAAO,kBAAC,GAAD,MAASpX,SAASqX,eAAe,U","file":"static/js/main.ccdda3ea.chunk.js","sourcesContent":["import React from 'react';\r\nimport { MidiEventTarget } from './types';\r\n\r\ntype MidiContext = {\r\n    register: (target: MidiEventTarget) => void, \r\n    unregister: (target: MidiEventTarget) => void, \r\n  };\r\n  \r\nconst midiContext = React.createContext<MidiContext>({\r\n    register: (target) => { \r\n        throw new Error(`Event target '${target.id} is not running inside a valid MIDI context.  Make sure to place MIDI components inside <MidiProvider> tag`);\r\n    },\r\n    unregister: (target) => { throw new Error('') },\r\n});\r\n    \r\nexport default midiContext;","const A_FREQ = 440;\r\nfunction calculateNoteFrequency(note: number) {\r\n  return (A_FREQ / 32) * (2 ** ((note - 9) / 12))\r\n}\r\ntype FrequencyMap = { [index: number]: number };\r\n\r\nconst frequencyMap: FrequencyMap = Array.from({length: 88})\r\n  .fill(null)\r\n  .reduce((res: any, v: any, i: number) => { \r\n    const n = i + 1; \r\n    res[n] = calculateNoteFrequency(i+1); \r\n    return res;\r\n  }, {}\r\n) as FrequencyMap;\r\n\r\nexport default frequencyMap;","import { MidiEvent } from '../types'\r\nimport DeviceController from './DeviceController'\r\nimport frequencyMap from './frequencyMap'\r\n\r\n\r\nconst event: MidiEvent = {\r\n  command: 0,\r\n  note: 0,\r\n  velocity: 0,\r\n  frequency: 0,\r\n  \r\n  handlerName: '',\r\n\r\n  group: '',\r\n  name: '',\r\n  type: '',\r\n  channel: 0,\r\n  number: 0,\r\n  change: 0\r\n}\r\n\r\nObject.seal(event)\r\n\r\nexport function processMidiMessage(controller: DeviceController, message: any) {\r\n  \r\n  event.command = message.data[0]\r\n  event.note = message.data[1]\r\n  event.velocity = message.data[2];\r\n    \r\n  const eventId = `${event.command}-${event.note}`;\r\n\r\n  // Mapped control\r\n  const mapping = controller.midiMap.fromMidi[eventId];\r\n    \r\n  if (mapping) {\r\n    \r\n    event.frequency = 0;\r\n    event.change = 0;\r\n    event.number = mapping.number;\r\n    event.name = mapping.name;\r\n    event.type = mapping.type;\r\n    event.group = mapping.group;\r\n    event.channel = mapping.channel;\r\n\r\n    switch (mapping.type) {\r\n      case 'selector':\r\n        event.handlerName = 'onParameterChange';\r\n        event.change = event.velocity - 64;\r\n        break;\r\n      case 'pad':\r\n        if (event.velocity > 0) {\r\n          if (!controller.sustained[eventId]) {\r\n            controller.sustained[eventId] = true;\r\n            event.handlerName = 'onTouchStart';    \r\n          }\r\n          else {\r\n            event.handlerName = 'onAfterTouch';    \r\n          }\r\n        }\r\n        else {\r\n          delete controller.sustained[eventId];\r\n          event.handlerName = 'onTouchEnd';    \r\n        }\r\n        \r\n        break\r\n    }\r\n  }\r\n  else {\r\n    \r\n    event.group = '';\r\n    event.name = '';\r\n    event.type = '';\r\n    event.channel = 0;\r\n    event.number = 0;\r\n    event.change = 0;\r\n    switch (event.command) {\r\n      case 144: // noteOn\r\n        if (event.velocity > 0) {\r\n          event.handlerName = 'onNoteOn';\r\n        } else {\r\n          event.handlerName = 'onNoteOff';\r\n        }\r\n        event.frequency = frequencyMap[event.note];\r\n        break\r\n      case 128: // noteOff\r\n        event.frequency = frequencyMap[event.note];\r\n        event.handlerName = 'onNoteOff';\r\n        break\r\n  \r\n      default:\r\n        event.handlerName = 'onUnknownEvent';\r\n    }\r\n  }\r\n  \r\n  const fn = controller.eventTarget![event.handlerName];\r\n  fn && fn(event);\r\n}\r\n\r\n\r\n","import { MidiControl } from \"../types\";\r\n\r\nfunction fstr(value: any, o?: any) {\r\n    if (value === null || value === undefined) {\r\n        if (o && o.format) return o.format(value);\r\n        return '';\r\n    }\r\n    if (o && o.format) return o.format(value);\r\n    return value;\r\n}\r\n\r\nexport function getControlId(ctl: MidiControl) {\r\n    if (!ctl) throw new Error();\r\n    return [\r\n        fstr(ctl.type),\r\n        fstr(ctl.group),\r\n        fstr(ctl.name),\r\n        fstr(ctl.channel, { format: (x) => !!x ? 'ch' + x : ''}),\r\n        fstr(ctl.number),\r\n    ].filter(t => !!t).join('-');\r\n}\r\n\r\n","import { v4 as uuid } from 'uuid';\r\nimport { processMidiMessage } from './processMidiMessage';\r\nimport _ from 'lodash';\r\nimport { MidiControl, MidiEventTarget, MidiMappedControl } from '../types';\r\nimport { getControlId } from '../Settings/getControlId';\r\n\r\nfunction createMap() {\r\n  return { fromMidi: {}, fromControl: {} };\r\n}\r\n\r\n// SAVING & LOADING\r\nfunction getStorageKey(controller: DeviceController, eventTarget: MidiEventTarget) {\r\n  const layout = eventTarget.config.layout || 'horizontal';\r\n  return `${controller.deviceId}-${layout}-${eventTarget.id}`;\r\n}\r\nfunction loadMappings(controller: DeviceController, eventTarget?: MidiEventTarget) {\r\n  if (!eventTarget) return createMap();\r\n  const key =  getStorageKey(controller, eventTarget);\r\n  const blob = localStorage.getItem(key);\r\n  if (!blob) return createMap();\r\n  const object = JSON.parse(blob);\r\n  const rev = object.revision || 0;\r\n  const rev1 = eventTarget.config.revision || 0;\r\n  if (rev1 > rev) return createMap();\r\n  return object;\r\n}\r\nfunction saveMappings(controller: DeviceController, eventTarget: MidiEventTarget) {\r\n  const key = getStorageKey(controller, eventTarget);\r\n  const rev1 = eventTarget.config.revision || 0;\r\n  if (rev1) {\r\n    controller.midiMap.revision = rev1;\r\n  }\r\n  localStorage.setItem(key, JSON.stringify(controller.midiMap));\r\n}\r\n\r\nexport default class DeviceController {\r\n  id: string;\r\n  deviceId: string;\r\n  device: any;\r\n  midiContext: any;\r\n  enabled: boolean = true;\r\n  connected: boolean = false;\r\n  sustained: any = {};\r\n  initialized: boolean = false;\r\n  //\r\n  eventTarget?: MidiEventTarget;\r\n  activeMapping?: MidiMappedControl;\r\n  midiMap: any = createMap();\r\n  \r\n  constructor(device: any, midiContext: any) {\r\n    // TODO DEVICE ID IS ONLY IMPORTANT WHEN THERE ARE TWO OR MORE DEVICES WITH SAME NAME\r\n    // THIS NEEDS TO BE TESTED AND SOLVED\r\n\r\n    const name = device.name.toLowerCase().replace(/\\s/g, '-');\r\n    this.deviceId = `${name}`; //-${device.id}`;  \r\n    this.midiContext = midiContext;\r\n    this.id = uuid();\r\n    device.controllerId  = this.id;\r\n    device.onmidimessage = this.onMIDIMessage.bind(this); \r\n    this.device = device;\r\n    this.connected = device.state === 'connected';\r\n  }\r\n  \r\n  // MAPPING\r\n  bindEventTarget(eventTarget?: MidiEventTarget) {\r\n    this.eventTarget = eventTarget;\r\n    this.midiMap = loadMappings(this, eventTarget);\r\n  }\r\n\r\n  beginMapping(mappedControl: MidiMappedControl) {\r\n    const rerender = this.activeMapping ? this.activeMapping.rerender : () => {};\r\n    this.activeMapping = mappedControl;\r\n    this.activeMapping.rerender();\r\n    rerender();\r\n  }\r\n\r\n  cancelMapping() {\r\n    const rerender = this.activeMapping ? this.activeMapping.rerender : () => {};\r\n    this.activeMapping = undefined;\r\n    rerender();\r\n  }\r\n\r\n  finalizeMapping(message: number[]) {\r\n    \r\n    const am = this.activeMapping!;\r\n\r\n    const channel = am.control.channel;\r\n    const number = am.control.number;\r\n\r\n    const { group, type, name } = am.control;\r\n\r\n    const [ command, note ] = message;\r\n\r\n    // 1st mapping: command-note -> channel-type-name\r\n    this.midiMap.fromMidi[`${command}-${note}`] = { type, name, number, channel, group };\r\n\r\n    // 2st mapping: channel-type-name -> command-note\r\n    const controlId = getControlId(am.control);\r\n    this.midiMap.fromControl[controlId] = { command, note };\r\n\r\n    saveMappings(this, this.eventTarget!);\r\n    \r\n    const rerender = this.activeMapping ? this.activeMapping.rerender : () => {};\r\n    this.activeMapping = undefined;\r\n    rerender();\r\n\r\n  }\r\n\r\n  getMappedEventData(controlId?: string) {\r\n    if (!controlId) return;\r\n    return this.midiMap.fromControl[controlId];\r\n  }\r\n\r\n  ////////////////////////////////////////////////////////\r\n  ////////////////////////////////////////////////////////\r\n  ////////////////////////////////////////////////////////\r\n  \r\n  disconnect() {\r\n    delete this.device.onmidimessage;\r\n    this.connected = false;\r\n  }\r\n  \r\n  onMIDIMessage(message: any) {\r\n    \r\n    if (!this.eventTarget) return;\r\n    if (!this.enabled) return;\r\n    if (this.activeMapping) return this.finalizeMapping(message.data);\r\n    processMidiMessage(this, message);\r\n  }\r\n\r\n  enable(state: boolean) {\r\n    this.midiContext.setControllers(items => \r\n      items.map(d => {\r\n          if (d.id === this.id) {\r\n              d.enabled = state;\r\n          }\r\n          return d;\r\n      })\r\n    );\r\n  }\r\n}\r\n","import {requestMidiDevices} from './requestMidiDevices';\r\nimport DeviceController from './DeviceController';\r\n\r\n/////////////////////////////////////////////////////////////////////// INITIALIZE\r\n\r\nexport async function initialize(midiContext: any) {\r\n\r\n    const detectedDevices = await requestMidiDevices((e: any) => {\r\n    \r\n        let found = false;\r\n        let changes = 0;\r\n        const newList = midiContext.controllers.map((c:any) => {\r\n            if (c.id === e.port.controllerId) {\r\n                found = true;\r\n                const newState = e.port.state === 'connected';\r\n                if (c.connected !== newState) {\r\n                    changes++;\r\n                    c.connected = newState;\r\n                }\r\n                \r\n            }\r\n            if (!c.connected) {\r\n                delete c.device.onmidimessage;\r\n                return null;\r\n            }\r\n            return c;\r\n        }).filter((c:any) => !!c);\r\n    \r\n        if (!found) {\r\n            console.log('New device found');\r\n            newList.push(new DeviceController(e.port, midiContext));\r\n            changes++;\r\n        }\r\n    \r\n        if (changes > 0) {\r\n            midiContext.setControllers(newList);\r\n        }\r\n    \r\n    });\r\n\r\n    const devices = detectedDevices\r\n        .filter((d: any) => d.name !== 'loopMIDI Port')\r\n        .map((d: any) => new DeviceController(d, midiContext));\r\n\r\n    midiContext.setControllers(devices);\r\n\r\n\r\n}\r\n\r\n\r\n","export function requestMidiDevices(onStateChange?: Function) {\r\n    \r\n    return new Promise<any>((resolve, reject) => {\r\n\r\n        const navi: {requestMIDIAccess?: Function} = navigator as any;\r\n\r\n        if (navi.requestMIDIAccess) {\r\n            navi.requestMIDIAccess().then(\r\n\r\n                \r\n                (midiAccess: any) => {\r\n\r\n                    \r\n                    const inputs = midiAccess.inputs.values();\r\n                    const devices: any[] = [];\r\n                    for (let device of inputs) {\r\n                        devices.push(device);\r\n                    }\r\n\r\n                    if (onStateChange) {\r\n                        midiAccess.onstatechange = onStateChange;\r\n                    }\r\n\r\n                    resolve(devices);\r\n                }, \r\n\r\n                () => console.log('Could not access your MIDI devices.'),\r\n\r\n            );\r\n        } \r\n        \r\n    });\r\n}\r\n\r\n\r\n","import React__default, { useMemo, useRef, useEffect, useState, createElement, Fragment as Fragment$1 } from 'react';\nimport clsx from 'clsx';\nimport { makeStyles, createStyles, useTheme } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardActionArea from '@material-ui/core/CardActionArea';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport Drawer$1 from '@material-ui/core/Drawer';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport { v4 } from 'uuid';\nimport { loremIpsum as loremIpsum$1 } from 'lorem-ipsum';\nimport { Paper } from '@material-ui/core';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Slide from '@material-ui/core/Slide';\nimport { isNumber as isNumber$1 } from 'lodash';\nimport Tabs$1 from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n  if (it) return (it = it.call(o)).next.bind(it);\n\n  if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n    if (it) o = it;\n    var i = 0;\n    return function () {\n      if (i >= o.length) return {\n        done: true\n      };\n      return {\n        done: false,\n        value: o[i++]\n      };\n    };\n  }\n\n  throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nvar attributeMap = {\n  bgColor: 'backgroundColor'\n};\n\nfunction resolveAttributeValue(key, value) {\n  if (!value) return value;\n  return value.hex ? value.hex() : value;\n}\n\nvar classMap = {\n  scrollableX: 'scrollable scrollable-x',\n  scrollableY: 'scrollable scrollable-y',\n  borderBox: 'border-box'\n};\n\nvar camelToSentenceCase = function camelToSentenceCase(string) {\n  if (!string) return string;\n  var tokens = string.replace(/([A-Z]+|[0-9]+)/g, ' $1').trim().split(' ');\n  return tokens.filter(function (t) {\n    return t && t.length;\n  }).map(function (token) {\n    var trimmed = token.trim();\n    return trimmed[0].toUpperCase() + trimmed.substring(1);\n  }).join(' ');\n};\nvar camelToKebabCase = function camelToKebabCase(string) {\n  if (!string) return string;\n  var tokens = string.replace(/([A-Z]+)/g, ' $1').trim().split(' ');\n  return tokens.map(function (token) {\n    return token.trim().toLowerCase();\n  }).join('-');\n};\nvar toProperCase = function toProperCase(string) {\n  if (!string) return string;\n  return string[0].toUpperCase() + string.substring(1);\n};\nvar mutateWhile = function mutateWhile(original, condition, transform) {\n  var result = original;\n\n  while (condition(result)) {\n    result = transform(result);\n  }\n\n  return result;\n};\nvar toCamelCase = function toCamelCase(string) {\n  if (!string) return string;\n  var temp = string.replace(/\\s/g, '').trim();\n  if (temp.length === 0) return '';\n  return temp[0].toLowerCase() + temp.substring(1);\n};\nvar removeDoubleSpaces = function removeDoubleSpaces(string) {\n  return mutateWhile(string, function (s) {\n    return s.indexOf('  ') >= 0;\n  }, function (s) {\n    return s.replaceAll(/\\s\\s/g, ' ');\n  }).trim();\n};\n\nfunction getOrMakeStyle(x) {\n  var _ref;\n\n  var resolvedKey = Reflect.has(attributeMap, x.key) ? attributeMap[x.key] : x.key;\n  return _ref = {}, _ref[resolvedKey] = resolveAttributeValue(resolvedKey, x.value), _ref;\n}\nfunction createStyle(x) {\n  Object.assign(x.bag.style, getOrMakeStyle(x));\n  return true;\n}\nfunction createClass(x) {\n  var resolvedClass = Reflect.has(classMap, x.key) ? classMap[x.key] : camelToKebabCase(x.key);\n  x.bag.classes.push(resolvedClass);\n  return true;\n}\n\nvar switches = {\n  absolute: true,\n  alignStart: true,\n  alignCenter: true,\n  alignEnd: true,\n  alignStretch: true,\n  alignBaseline: true,\n  alignAuto: true,\n  alignSelfStart: true,\n  alignSelfCenter: true,\n  alignSelfEnd: true,\n  alignSelfStretch: true,\n  alignSelfBaseline: true,\n  anchorBottom: true,\n  anchorLeft: true,\n  anchorRight: true,\n  anchorTop: true,\n  beveled: true,\n  block: true,\n  borderBox: true,\n  centerX: true,\n  centerXY: true,\n  centerY: true,\n  clickable: true,\n  coverImage: true,\n  fill: true,\n  fixed: true,\n  fullWidth: true,\n  fullWidthAlways: true,\n  grow: true,\n  hidden: true,\n  horizontal: true,\n  inline: true,\n  inlineBlock: true,\n  justifyStart: true,\n  justifyCenter: true,\n  justifyEnd: true,\n  mobileCenter: true,\n  mobileColumn: true,\n  mobileOnly: true,\n  noBr: true,\n  noBreak: true,\n  noMargin: true,\n  noMobile: true,\n  noOverflow: true,\n  noPadding: true,\n  noSelect: true,\n  noTransform: true,\n  noWrap: true,\n  opaque: true,\n  overlay: true,\n  relative: true,\n  round: true,\n  rounded: true,\n  scrollable: true,\n  scrollableX: true,\n  scrollableY: true,\n  shrink: true,\n  small: true,\n  smaller: true,\n  solid: true,\n  spaced: true,\n  sticky: true,\n  tall: true,\n  translucent: true,\n  vertical: true,\n  wide: true\n};\n\nvar styleAttributes = {\n  backgroundColor: createStyle,\n  bgColor: createStyle,\n  backgroundImage: createStyle,\n  backgroundRepeat: createStyle,\n  backgroundPosition: createStyle,\n  backgroundSize: createStyle,\n  border: createStyle,\n  borderTop: createStyle,\n  borderRight: createStyle,\n  borderBottom: createStyle,\n  borderLeft: createStyle,\n  borderRadius: createStyle,\n  borderTopLeftRadius: createStyle,\n  borderTopRightRadius: createStyle,\n  borderBottomLeftRadius: createStyle,\n  borderBottomRightRadius: createStyle,\n  color: createStyle,\n  cursor: createStyle,\n  dataProps: createStyle,\n  fontSize: createStyle,\n  fontStyle: createStyle,\n  fontWeight: createStyle,\n  innerProps: createStyle,\n  lineHeight: createStyle,\n  margin: createStyle,\n  marginTop: createStyle,\n  marginRight: createStyle,\n  marginBottom: createStyle,\n  marginLeft: createStyle,\n  minHeight: createStyle,\n  minWidth: createStyle,\n  opacity: createStyle,\n  padding: createStyle,\n  paddingTop: createStyle,\n  paddingRight: createStyle,\n  paddingBottom: createStyle,\n  paddingLeft: createStyle,\n  pseudo: createStyle,\n  textAlign: createStyle,\n  textTransform: createStyle,\n  title: createStyle,\n  width: createStyle,\n  height: createStyle,\n  top: createStyle,\n  right: createStyle,\n  bottom: createStyle,\n  left: createStyle\n};\n\nvar range = function range() {\n  if (arguments.length < 1) throw new Error('Usage: range(n) or range(s, e)');\n  if (arguments.length > 2) throw new Error('Usage: range(n) or range(s, e)');\n\n  var _ref = arguments.length === 1 ? {\n    start: 1,\n    end: arguments.length <= 0 ? undefined : arguments[0]\n  } : {\n    start: arguments.length <= 0 ? undefined : arguments[0],\n    end: arguments.length <= 1 ? undefined : arguments[1]\n  },\n      start = _ref.start,\n      end = _ref.end;\n\n  var n = Math.max(start, end) - Math.min(start, end) + 1;\n  var arr = new Array(n);\n  var step = end > start ? 1 : -1;\n  var i = 0;\n  var j = n;\n  var k = start;\n\n  while (j--) {\n    arr[i++] = k;\n    k += step;\n  }\n\n  return arr;\n};\nvar fnOrValue = function fnOrValue(element, param) {\n  if (typeof element === 'function') {\n    return element(param);\n  }\n\n  return element;\n};\nvar inline = {\n  \"switch\": function _switch(rootKey, defaultValue) {\n    var matchSingleKey = function matchSingleKey(key) {\n      if (typeof key === 'function') {\n        return key(rootKey);\n      }\n\n      return key === rootKey;\n    };\n\n    var matchKey = function matchKey(key) {\n      if (Array.isArray(key)) {\n        return key.some(matchSingleKey);\n      }\n\n      return matchSingleKey(key);\n    };\n\n    for (var _len = arguments.length, pairs = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n      pairs[_key - 2] = arguments[_key];\n    }\n\n    for (var i = 0; i < pairs.length; i += 2) {\n      var key = pairs[i];\n\n      if (matchKey(key)) {\n        return fnOrValue(pairs[i + 1], key);\n      }\n    }\n\n    return fnOrValue(defaultValue, rootKey);\n  }\n};\n\nvar useInlineStyle = function useInlineStyle(style, dependencies) {\n  var cb = useMemo(function () {\n    return makeStyles(function () {\n      return createStyles(_extends({}, fnOrValue(style)));\n    });\n  }, [style, dependencies]);\n  return cb;\n};\n\nvar _excluded = [\"id\", \"children\", \"style\", \"className\", \"ref\", \"data\", \"pseudo\", \"innerProps\", \"css\", \"onBlur\", \"onClick\", \"onChange\", \"onFocus\", \"onMouseUp\", \"onMouseDown\", \"onMouseMove\"],\n    _excluded2 = [\"dataProps\"];\n\nfunction useStyleDirectives(directives, ownProps, tagName) {\n  var id = directives.id,\n      children = directives.children,\n      style = directives.style,\n      className = directives.className,\n      ref = directives.ref,\n      data = directives.data,\n      pseudo = directives.pseudo,\n      innerProps = directives.innerProps,\n      css = directives.css,\n      onBlur = directives.onBlur,\n      onClick = directives.onClick,\n      onChange = directives.onChange,\n      onFocus = directives.onFocus,\n      onMouseUp = directives.onMouseUp,\n      onMouseDown = directives.onMouseDown,\n      onMouseMove = directives.onMouseMove,\n      other = _objectWithoutPropertiesLoose(directives, _excluded);\n\n  var ignoredProps = {\n    id: id,\n    children: children,\n    style: style,\n    className: className,\n    ref: ref,\n    data: data,\n    pseudo: pseudo,\n    innerProps: innerProps,\n    ownProps: ownProps,\n    css: css,\n    onBlur: onBlur,\n    onClick: onClick,\n    onChange: onChange,\n    onFocus: onFocus,\n    onMouseUp: onMouseUp,\n    onMouseDown: onMouseDown,\n    onMouseMove: onMouseMove\n  };\n  var utilizedKeys = [];\n  var keys = Object.keys(other);\n  var bag = {\n    style: _extends({}, css, style),\n    classes: []\n  };\n  keys.forEach(function (key) {\n    if (!Reflect.has(ignoredProps, key)) {\n      var value = directives[key];\n\n      if (Reflect.has(switches, key)) {\n        createClass({\n          bag: bag,\n          key: key,\n          value: value,\n          debug: false\n        });\n        utilizedKeys.push(key);\n        return;\n      }\n\n      if (Reflect.has(styleAttributes, key)) {\n        styleAttributes[key]({\n          bag: bag,\n          key: key,\n          value: value\n        });\n        utilizedKeys.push(key);\n        return;\n      }\n\n      if (value === true) {\n        createClass({\n          bag: bag,\n          key: key,\n          value: value,\n          debug: false\n        });\n      }\n    }\n  });\n\n  var props = _extends({}, other);\n\n  utilizedKeys.forEach(function (key) {\n    delete props[key];\n  });\n  var pseudoStyles = Object.keys(directives.pseudo || {}).reduce(function (acc, key) {\n    var _Object$assign;\n\n    var s = directives.pseudo[key];\n    var fullKey = key[0] === '&' ? key : \"& :\" + key;\n    return Object.assign(acc, (_Object$assign = {}, _Object$assign[fullKey] = s, _Object$assign));\n  }, {});\n  var usedStyles = makeStyles(function () {\n    var s = {};\n    if (Object.keys(bag.style).length) s.bag = bag.style;\n    if (Object.keys(pseudoStyles).length) s.pseudo = pseudoStyles;\n    return s;\n  })();\n  var events = {\n    onBlur: onBlur,\n    onClick: onClick,\n    onChange: onChange,\n    onFocus: onFocus,\n    onMouseUp: onMouseUp,\n    onMouseDown: onMouseDown,\n    onMouseMove: onMouseMove\n  };\n\n  var dataProps = directives.dataProps,\n      attr = _objectWithoutPropertiesLoose(directives, _excluded2);\n\n  for (var _len = arguments.length, baseClasses = new Array(_len > 3 ? _len - 3 : 0), _key = 3; _key < _len; _key++) {\n    baseClasses[_key - 3] = arguments[_key];\n  }\n\n  var result = {\n    root: {\n      className: clsx(className, baseClasses, tagName, bag.classes, usedStyles.bag, usedStyles.pseudo)\n    },\n    props: _extends({}, props, ignoredProps),\n    attr: attr,\n    data: dataProps,\n    events: events\n  };\n  return result;\n}\n\nvar _excluded$1 = [\"children\"];\n\nvar Col = function Col(directives) {\n  var children = directives.children,\n      other = _objectWithoutPropertiesLoose(directives, _excluded$1);\n\n  var _useStyleDirectives = useStyleDirectives(other, null, '', 'flex column'),\n      root = _useStyleDirectives.root,\n      data = _useStyleDirectives.data,\n      events = _useStyleDirectives.events;\n\n  return /*#__PURE__*/React__default.createElement(\"div\", _extends({}, data, {\n    className: root.className\n  }, events), children);\n};\n\nvar _excluded$2 = [\"children\"];\n\nvar Div = function Div(directives) {\n  var children = directives.children,\n      other = _objectWithoutPropertiesLoose(directives, _excluded$2);\n\n  var _useStyleDirectives = useStyleDirectives(other, null),\n      root = _useStyleDirectives.root,\n      data = _useStyleDirectives.data,\n      events = _useStyleDirectives.events;\n\n  return /*#__PURE__*/React__default.createElement(\"div\", _extends({}, data, {\n    className: root.className\n  }, events), children);\n};\n\nvar _excluded$3 = [\"children\"];\n\nvar Row = function Row(directives) {\n  var children = directives.children,\n      other = _objectWithoutPropertiesLoose(directives, _excluded$3);\n\n  var _useStyleDirectives = useStyleDirectives(other, null, '', 'flex row'),\n      root = _useStyleDirectives.root,\n      data = _useStyleDirectives.data,\n      events = _useStyleDirectives.events;\n\n  return /*#__PURE__*/React__default.createElement(\"div\", _extends({}, data, {\n    className: root.className\n  }, events), children);\n};\n\nvar useStyles = makeStyles({\n  root: {\n    maxWidth: 345\n  },\n  media: {\n    height: 140\n  }\n});\nfunction MediaCard(props) {\n  var title = props.title,\n      description = props.description,\n      image = props.image,\n      _onClick = props.onClick,\n      footerActions = props.footerActions,\n      children = props.children;\n  var classes = useStyles();\n  return /*#__PURE__*/React__default.createElement(Card, {\n    className: classes.root\n  }, /*#__PURE__*/React__default.createElement(CardActionArea, {\n    onClick: function onClick() {\n      return _onClick && _onClick();\n    }\n  }, image && /*#__PURE__*/React__default.createElement(CardMedia, {\n    className: classes.media,\n    image: image.url,\n    title: title\n  }), /*#__PURE__*/React__default.createElement(CardContent, null, title && /*#__PURE__*/React__default.createElement(Typography, {\n    gutterBottom: true,\n    variant: \"h5\",\n    component: \"h2\"\n  }, title), description && /*#__PURE__*/React__default.createElement(Typography, {\n    variant: \"body2\",\n    color: \"textSecondary\",\n    component: \"p\"\n  }, description), children && children)), footerActions && /*#__PURE__*/React__default.createElement(CardActions, null, Object.keys(footerActions).map(function (key) {\n    return /*#__PURE__*/React__default.createElement(Button, {\n      key: key,\n      size: \"small\",\n      color: \"primary\",\n      onClick: function onClick() {\n        return footerActions[key]();\n      }\n    }, camelToSentenceCase(key));\n  })));\n}\n\nvar defaultMinCount = 0;\nvar Counter = (function (props) {\n  var ref = React__default.useRef({\n    count: 0\n  }).current;\n\n  if (++ref.count <= (typeof props.min !== 'undefined' ? props.min : defaultMinCount)) {\n    return null;\n  }\n\n  var classes = useInlineStyle({\n    root: {\n      position: 'absolute',\n      zIndex: 999999,\n      top: 0,\n      left: 0,\n      padding: '0 3px',\n      lineHeight: 1,\n      fontSize: '.7rem',\n      backgroundColor: 'red',\n      color: 'white'\n    }\n  }, [])();\n  return /*#__PURE__*/React__default.createElement(\"div\", {\n    title: props.title,\n    className: classes.root\n  }, ref.count);\n});\n\nvar Drawer = (function (props) {\n  var _React$useState = React__default.useState(false),\n      open = _React$useState[0],\n      setOpen = _React$useState[1];\n\n  var _React$useState2 = React__default.useState(),\n      closed = _React$useState2[0],\n      setClosed = _React$useState2[1];\n\n  var externallyControlled = typeof props.open !== 'undefined';\n  var drawerOpen = !closed && (externallyControlled ? props.open : open);\n\n  var toggleDrawer = function toggleDrawer(open) {\n    return function (event) {\n      setOpen(open);\n\n      if (!open) {\n        setClosed(true);\n      }\n\n      if (open && props.onOpen) props.onOpen();\n      if (!open && props.onClose) props.onClose();\n    };\n  };\n\n  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, props.button && !drawerOpen && React__default.cloneElement(props.button, {\n    onClick: toggleDrawer(true)\n  }), /*#__PURE__*/React__default.createElement(Drawer$1, {\n    anchor: props.anchor,\n    open: drawerOpen,\n    onClose: toggleDrawer(false)\n  }, !closed && drawerOpen && props.children));\n});\n\nvar _excluded$4 = [\"children\"],\n    _excluded2$1 = [\"children\"],\n    _excluded3 = [\"children\"];\nvar div = function div(directives) {\n  var children = directives.children,\n      other = _objectWithoutPropertiesLoose(directives, _excluded$4);\n\n  var _useStyleDirectives = useStyleDirectives(other, null),\n      root = _useStyleDirectives.root,\n      data = _useStyleDirectives.data,\n      events = _useStyleDirectives.events;\n\n  return /*#__PURE__*/React__default.createElement(\"div\", _extends({}, data, {\n    className: root.className\n  }, events), children);\n};\nvar row = function row(directives) {\n  var children = directives.children,\n      other = _objectWithoutPropertiesLoose(directives, _excluded2$1);\n\n  var _useStyleDirectives2 = useStyleDirectives(other, null, 'Row', 'flex row'),\n      root = _useStyleDirectives2.root,\n      data = _useStyleDirectives2.data,\n      events = _useStyleDirectives2.events;\n\n  return /*#__PURE__*/React__default.createElement(\"div\", _extends({}, data, {\n    className: root.className\n  }, events), children);\n};\nvar col = function col(directives) {\n  var children = directives.children,\n      other = _objectWithoutPropertiesLoose(directives, _excluded3);\n\n  var _useStyleDirectives3 = useStyleDirectives(other, null, 'Col', 'flex column'),\n      root = _useStyleDirectives3.root,\n      data = _useStyleDirectives3.data,\n      events = _useStyleDirectives3.events;\n\n  return /*#__PURE__*/React__default.createElement(\"div\", _extends({}, data, {\n    className: root.className\n  }, events), children);\n};\n\nvar divRowCol = {\n  __proto__: null,\n  div: div,\n  row: row,\n  col: col\n};\n\nfunction Dropdown(props) {\n  var localStorageKey = props.localStorageKey,\n      label = props.label,\n      defaultValue = props.defaultValue,\n      options = props.options;\n  var labelId = v4();\n\n  var _React$useState = React__default.useState(function () {\n    var storedString = localStorageKey ? localStorage.getItem(localStorageKey) : null;\n    return storedString || defaultValue;\n  }),\n      selectedValue = _React$useState[0],\n      setSelectedValue = _React$useState[1];\n\n  var selectedValueExists = options.find(function (option) {\n    var obj = option;\n    var value = typeof obj === 'object' ? obj.value : option;\n    return selectedValue === value;\n  });\n  var auxOptions = !selectedValueExists ? [{\n    value: selectedValue,\n    text: selectedValue,\n    aux: true\n  }] : [];\n\n  var handleChange = function handleChange(event) {\n    var value = event.target.value;\n\n    if (localStorageKey) {\n      localStorage.setItem(localStorageKey, value);\n    }\n\n    setSelectedValue(value);\n    props.onChange && props.onChange(value);\n  };\n\n  return /*#__PURE__*/React__default.createElement(FormControl, null, label && /*#__PURE__*/React__default.createElement(InputLabel, {\n    id: labelId\n  }, label), /*#__PURE__*/React__default.createElement(Select, {\n    labelId: labelId,\n    value: selectedValue,\n    onChange: handleChange\n  }, [].concat(options, auxOptions).map(function (option) {\n    var obj = option;\n    var text = typeof obj === 'object' ? obj.text : option;\n    var value = typeof obj === 'object' ? obj.value : option;\n    var aux = typeof obj === 'object' ? obj.aux === true : false;\n    return /*#__PURE__*/React__default.createElement(MenuItem, {\n      key: value,\n      value: value\n    }, !aux && text, aux && /*#__PURE__*/React__default.createElement(div, {\n      opacity: 0.5,\n      fontStyle: \"italic\"\n    }, text));\n  })));\n}\n\nvar _excluded$5 = [\"children\", \"type\"];\n\nvar Element = function Element(directives) {\n  var children = directives.children,\n      type = directives.type,\n      other = _objectWithoutPropertiesLoose(directives, _excluded$5);\n\n  var _useStyleDirectives = useStyleDirectives(other, null),\n      root = _useStyleDirectives.root,\n      data = _useStyleDirectives.data,\n      events = _useStyleDirectives.events;\n\n  return React__default.createElement.apply(React__default, [type, _extends({}, data, {\n    className: root.className\n  }, events)].concat(children || []));\n};\n\nvar options = {\n  count: 1,\n  format: 'plain',\n  paragraphLowerBound: 3,\n  paragraphUpperBound: 7,\n  sentenceLowerBound: 5,\n  sentenceUpperBound: 15,\n  suffix: '\\n',\n  units: 'words'\n};\n\nfunction words(count, dictionary) {\n  return loremIpsum$1(_extends({}, options, {\n    count: count,\n    units: 'words',\n    words: dictionary\n  }));\n}\n\nfunction sentences(count, dictionary) {\n  return loremIpsum$1(_extends({}, options, {\n    count: count,\n    units: 'sentences',\n    words: dictionary\n  }));\n}\n\nfunction paragraphs(count, dictionary) {\n  return loremIpsum$1(_extends({}, options, {\n    count: count,\n    units: 'paragraphs',\n    words: dictionary\n  }));\n}\n\nvar loremIpsum = {\n  words: words,\n  sentences: sentences,\n  paragraphs: paragraphs\n};\n\nvar _excluded$6 = [\"colSpan\", \"image\", \"title\", \"description\", \"onClick\"],\n    _excluded2$2 = [\"min\", \"max\", \"items\", \"elementForItem\", \"revision\"];\n\nvar ElementContainer = function ElementContainer(props) {\n  var element = props.element,\n      colSpan = props.colSpan,\n      image = props.image;\n  var inline = useInlineStyle(function () {\n    var root = {};\n\n    if (colSpan) {\n      root.gridColumnEnd = \"span \" + colSpan;\n    }\n\n    return {\n      root: root,\n      image: {\n        backgroundImage: \"url(\\\"\" + image + \"\\\")\"\n      }\n    };\n  }, [colSpan, image])();\n  return /*#__PURE__*/React__default.createElement(\"div\", {\n    className: clsx('masonry-item', 'relative', inline.root)\n  }, /*#__PURE__*/React__default.createElement(\"div\", {\n    className: \"content fill\"\n  }, element));\n};\n\nvar DefaultMasonryItem = function DefaultMasonryItem(directives) {\n  var colSpan = directives.colSpan,\n      image = directives.image,\n      title = directives.title,\n      description = directives.description,\n      _onClick = directives.onClick,\n      d = _objectWithoutPropertiesLoose(directives, _excluded$6);\n\n  var _useStyleDirectives = useStyleDirectives(d, null, 'MasonryItem', 'masonry-item'),\n      root = _useStyleDirectives.root;\n\n  var inline = useInlineStyle(function () {\n    return {\n      root: {\n        gridColumnEnd: colSpan ? \"span \" + colSpan : null\n      },\n      image: {\n        backgroundImage: \"url(\\\"\" + image + \"\\\")\"\n      }\n    };\n  }, [colSpan, image])();\n  return (\n    /*#__PURE__*/\n    React__default.createElement(\"div\", {\n      className: clsx(root.className, inline.root),\n      onClick: function onClick() {\n        return _onClick && _onClick();\n      }\n    }, /*#__PURE__*/React__default.createElement(Paper, {\n      className: \"content\"\n    }, image && /*#__PURE__*/React__default.createElement(\"div\", {\n      className: clsx('cover-image', inline.image)\n    }), title && /*#__PURE__*/React__default.createElement(\"div\", {\n      className: \"title\"\n    }, title), description && /*#__PURE__*/React__default.createElement(\"div\", {\n      className: \"desc\"\n    }, description)))\n  );\n};\n\nvar Masonry = function Masonry(directives) {\n  var min = directives.min,\n      max = directives.max,\n      items = directives.items,\n      elementForItem = directives.elementForItem,\n      revision = directives.revision,\n      d = _objectWithoutPropertiesLoose(directives, _excluded2$2);\n\n  var theme = useTheme();\n\n  var _useStyleDirectives2 = useStyleDirectives(d, null, 'Masonry', 'ui-masonry-grid masonry-grid grid'),\n      root = _useStyleDirectives2.root;\n\n  var mutable = useRef({\n    resizing: false,\n    gridItems: []\n  }).current;\n  var g = document.getElementsByClassName('masonry-grid')[0];\n\n  var _useMemo = useMemo(function () {\n    if (!g) return {\n      rowHeight: 0,\n      rowGap: 0,\n      gridItems: []\n    };\n    return {\n      grid: g,\n      rowHeight: parseInt(window.getComputedStyle(g).getPropertyValue('grid-auto-rows'), 10),\n      rowGap: parseInt(window.getComputedStyle(g).getPropertyValue('grid-row-gap'), 10),\n      gridItems: Array.from(document.getElementsByClassName('masonry-item')).map(function (e) {\n        var innerElement = e.querySelector('.content > *');\n        var heightRatio = +innerElement.getAttribute('heightratio');\n        return {\n          container: e,\n          innerElement: innerElement,\n          heightRatio: heightRatio\n        };\n      })\n    };\n  }, [g, items, revision, mutable.resizing]),\n      grid = _useMemo.grid,\n      rowHeight = _useMemo.rowHeight,\n      rowGap = _useMemo.rowGap,\n      gridItems = _useMemo.gridItems;\n\n  var resizeGridItem = React__default.useCallback(function (gi) {\n    var rect = gi.innerElement.getBoundingClientRect();\n\n    if (rect.width === 0) {\n      return;\n    }\n\n    var rowSpan;\n\n    if (gi.heightRatio) {\n      var impliedHeight = Math.round(rect.width * gi.heightRatio);\n      var heightWithGap = impliedHeight + rowGap;\n      var remainder = heightWithGap % (rowHeight + rowGap);\n      rowSpan = Math.round((heightWithGap - remainder) / (rowHeight + rowGap));\n    } else {\n      var _heightWithGap = rect.height + rowGap;\n\n      var _remainder = _heightWithGap % (rowHeight + rowGap);\n\n      rowSpan = Math.round((_heightWithGap - _remainder) / (rowHeight + rowGap));\n    }\n\n    gi.container.style.gridRowEnd = \"span \" + rowSpan;\n  }, [grid, items, gridItems, revision, mutable.resizing]);\n  var resizeAllGridItems = React__default.useCallback(function () {\n    gridItems.forEach(function (gi) {\n      return resizeGridItem(gi);\n    });\n  }, [grid, items, gridItems, revision, mutable.resizing, resizeGridItem]);\n  var handleResizeAllGridItems = React__default.useCallback(function () {\n    if (mutable.resizing) {\n      return;\n    }\n\n    mutable.resizing = true;\n    var timer = setTimeout(function () {\n      mutable.resizing = false;\n    }, 100);\n    window.requestAnimationFrame(function () {\n      clearTimeout(timer);\n      resizeAllGridItems();\n      mutable.resizing = false;\n    });\n  }, [grid, items, gridItems, revision, mutable.resizing, resizeAllGridItems]);\n  useEffect(function () {\n    window.addEventListener('resize', handleResizeAllGridItems);\n    return function () {\n      window.removeEventListener('resize', handleResizeAllGridItems);\n    };\n  }, [grid, items, gridItems, revision, mutable.resizing, handleResizeAllGridItems]);\n  useEffect(function () {\n    setTimeout(function () {\n      return handleResizeAllGridItems();\n    }, 100);\n  }, [grid, items, gridItems, revision, mutable.resizing, handleResizeAllGridItems]);\n  setTimeout(function () {\n    return handleResizeAllGridItems();\n  }, 0);\n  var style = useInlineStyle(function () {\n    var minval = min || '150px';\n    var maxval = max || '1.4fr';\n    return {\n      root: {\n        gridTemplateColumns: \"repeat(auto-fill, minmax(\" + minval + \",\" + maxval + \"))\",\n        '& .masonry-item': {\n          boxShadow: inline[\"switch\"](null, 'inherit', function () {\n            return theme.palette.type === 'light';\n          }, '2px 2px 4px #9c9c9c'),\n          borderRadius: 3,\n          overflow: 'hidden'\n        },\n        '& .masonry-item:hover': {\n          boxShadow: inline[\"switch\"](null, '3px 3px 6px #9c9c9c', function () {\n            return theme.palette.type === 'dark';\n          }, '0px 0px 4px #55555522')\n        }\n      }\n    };\n  }, [min, max])();\n  return /*#__PURE__*/React__default.createElement(\"div\", {\n    className: clsx('root', root.className, style.root)\n  }, items.map(function (item, index) {\n    return elementForItem ? /*#__PURE__*/React__default.createElement(ElementContainer, _extends({\n      key: index\n    }, item, {\n      element: elementForItem(item, index)\n    })) : /*#__PURE__*/React__default.createElement(DefaultMasonryItem, _extends({\n      key: index\n    }, item));\n  }));\n};\n\nvar Transition = React__default.forwardRef(function Transition(props, ref) {\n  return /*#__PURE__*/React__default.createElement(Slide, _extends({\n    direction: \"down\",\n    ref: ref\n  }, props));\n});\n\nvar Modal = function Modal(props) {\n  var handleClose = function handleClose() {\n    return props.onClose();\n  };\n\n  var handleEscapeKey = function handleEscapeKey() {\n    return props.onEscape && props.onEscape();\n  };\n\n  var handleOk = function handleOk() {\n    props.onOk && props.onOk();\n    handleClose();\n  };\n\n  useEffect(function () {\n    document.addEventListener(\"keydown\", handleEscapeKey, false);\n    return function () {\n      return document.removeEventListener(\"keydown\", handleEscapeKey, false);\n    };\n  }, []);\n  return /*#__PURE__*/React__default.createElement(Dialog, {\n    open: props.show,\n    TransitionComponent: Transition,\n    onClose: handleClose,\n    disableBackdropClick: true,\n    disableEscapeKeyDown: true,\n    maxWidth: \"lg\"\n  }, /*#__PURE__*/React__default.createElement(div, {\n    relative: true\n  }, props.title, props.body), /*#__PURE__*/React__default.createElement(DialogActions, null, /*#__PURE__*/React__default.createElement(Button, {\n    onClick: handleClose,\n    color: \"default\"\n  }, props.onOk ? 'Cancel' : 'Close'), props.onOk && /*#__PURE__*/React__default.createElement(Button, {\n    onClick: handleOk,\n    color: \"default\"\n  }, \"OK\")));\n};\n\nvar isString = function isString(value) {\n  return typeof value === 'string';\n};\nvar isNumber = function isNumber(value) {\n  return typeof value === 'number';\n};\nvar isUndefined = function isUndefined(value) {\n  return value === undefined;\n};\nvar isNull = function isNull(value) {\n  return value === null;\n};\nvar isNullOrUndefined = function isNullOrUndefined(value) {\n  return isUndefined(value) || isNull(value);\n};\nvar isJsonPath = function isJsonPath(value) {\n  return isString(value) ? value.substring(0, 7) === 'json://' : false;\n};\n\nvar Throttle = /*#__PURE__*/function () {\n  function Throttle() {\n    this.ticking = false;\n  }\n\n  var _proto = Throttle.prototype;\n\n  _proto.invokeWithAnimationFrame = function invokeWithAnimationFrame(callback) {\n    this.nextCallback = callback;\n\n    for (var _len = arguments.length, params = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      params[_key - 1] = arguments[_key];\n    }\n\n    this.lastKnownParams = params;\n\n    if (!this.ticking) {\n      var _this = this;\n\n      var dispatch = function dispatch(callback) {\n        for (var _len2 = arguments.length, params = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n          params[_key2 - 1] = arguments[_key2];\n        }\n\n        _this.ticking = true;\n        _this.nextCallback = undefined;\n        _this.lastKnownParams = undefined;\n        window.requestAnimationFrame(function () {\n          callback.apply(void 0, params);\n          _this.ticking = false;\n\n          if (_this.nextCallback) {\n            dispatch.apply(void 0, [_this.nextCallback].concat(_this.lastKnownParams));\n          }\n        });\n      };\n\n      dispatch.apply(void 0, [this.nextCallback].concat(this.lastKnownParams));\n    }\n  };\n\n  return Throttle;\n}();\n\nfunction NumberInput(props) {\n  var throttleRef = useRef(new Throttle());\n  var throttle = throttleRef.current;\n  var inputRef = useRef(null);\n\n  var _React$useState = React__default.useState(props.value),\n      buffer = _React$useState[0],\n      setBuffer = _React$useState[1];\n\n  var constraints = {\n    min: !isNullOrUndefined(props.min) ? props.min : -999,\n    max: !isNullOrUndefined(props.max) ? props.max : 999,\n    step: props.step || 1,\n    precision: props.precision || 0\n  };\n\n  if (constraints.step) {\n    var parts = constraints.step.toString().split('.');\n\n    if (parts.length > 1) {\n      constraints.precision = parts[1].length;\n    }\n  }\n\n  if (props.unsigned && constraints.min < 0) constraints.min = 0;\n\n  var handleChange = function handleChange(value) {\n    var parsedValue = parseFloat(value);\n    if (parsedValue < constraints.min) parsedValue = constraints.min;\n    if (parsedValue > constraints.max) parsedValue = constraints.max;\n    var newValue = lib.math.roundDecimal(parsedValue, constraints.precision);\n    setBuffer(newValue);\n\n    if (props.onChange) {\n      throttle.invokeWithAnimationFrame(props.onChange, parsedValue);\n    }\n  };\n\n  var handleFocus = function handleFocus(e) {\n    inputRef.current.select();\n  };\n\n  var handleBlur = function handleBlur(e) {};\n\n  var context = _extends({\n    inputRef: inputRef,\n    handleChange: handleChange,\n    handleFocus: handleFocus,\n    handleBlur: handleBlur,\n    props: props,\n    value: buffer\n  }, constraints);\n\n  switch (props.variant) {\n    case 'slider':\n      return sliderInput(context);\n\n    default:\n      return inputWithUpDown(context);\n  }\n}\nfunction inputWithUpDown(context) {\n  var inputRef = context.inputRef,\n      handleChange = context.handleChange,\n      handleFocus = context.handleFocus,\n      handleBlur = context.handleBlur,\n      props = context.props,\n      value = context.value,\n      step = context.step;\n  return /*#__PURE__*/React__default.createElement(ui.Flex, {\n    row: true,\n    tight: true,\n    className: \"numeric-input-container\"\n  }, /*#__PURE__*/React__default.createElement(\"button\", {\n    className: \"numeric-spinner left\",\n    onClick: function onClick() {\n      return handleChange(value - step);\n    }\n  }, /*#__PURE__*/React__default.createElement(\"span\", null, \"-\")), /*#__PURE__*/React__default.createElement(\"input\", {\n    ref: inputRef,\n    className: \"numeric-input\",\n    type: \"number\",\n    inputMode: \"number\",\n    pattern: \"[0-9]*\",\n    onChange: function onChange(e) {\n      return handleChange(e.target.value);\n    },\n    onFocus: handleFocus,\n    onBlur: handleBlur,\n    value: value,\n    required: props.required,\n    placeholder: props.placeholder,\n    title: props.title\n  }), /*#__PURE__*/React__default.createElement(\"button\", {\n    className: \"numeric-spinner right\",\n    onClick: function onClick() {\n      return handleChange(value + step);\n    }\n  }, /*#__PURE__*/React__default.createElement(\"span\", null, \"+\")));\n}\nfunction sliderInput(context) {\n  var inputRef = context.inputRef,\n      handleChange = context.handleChange,\n      handleFocus = context.handleFocus,\n      handleBlur = context.handleBlur,\n      props = context.props,\n      value = context.value,\n      step = context.step,\n      min = context.min,\n      max = context.max;\n  var innerValue = value;\n  return /*#__PURE__*/React__default.createElement(ui.Flex, {\n    row: true,\n    tight: true,\n    alignItems: \"center\",\n    className: \"slider-input-container\"\n  }, /*#__PURE__*/React__default.createElement(\"input\", {\n    ref: inputRef,\n    className: \"slider\",\n    type: \"range\",\n    onChange: function onChange(e) {\n      return handleChange(e.target.value);\n    },\n    onFocus: handleFocus,\n    onBlur: handleBlur,\n    title: props.title,\n    value: innerValue,\n    min: min,\n    max: max,\n    step: step\n  }), /*#__PURE__*/React__default.createElement(ui.div, {\n    small: true,\n    marginLeft: 15\n  }, innerValue));\n}\n\nvar PanelProps = function PanelProps() {\n  this.sticky = false;\n  this.stickyTop = 0;\n};\n\nvar _ownProps = new PanelProps();\n\nvar Panel = function Panel(directives) {\n  var other = _extends({}, directives);\n\n  var _useStyleDirectives = useStyleDirectives(other, _ownProps, undefined, 'page-panel'),\n      root = _useStyleDirectives.root,\n      props = _useStyleDirectives.props,\n      data = _useStyleDirectives.data;\n\n  return /*#__PURE__*/React__default.createElement(col, _extends({\n    className: root.className\n  }, data, {\n    alignSelfStretch: true\n  }), /*#__PURE__*/React__default.createElement(div, {\n    relative: true,\n    alignSelfStart: true,\n    sticky: props.sticky,\n    top: props.sticky ? props.stickyTop : undefined\n  }, fnOrValue(props.children)));\n};\n\nvar defaultProps = {\n  angle: 90\n};\n\nfunction colorFromString(color) {\n  var tokens = color.split(' ');\n  if (tokens.length === 1) return {\n    color: tokens[0],\n    parts: 1\n  };\n  if (tokens.length === 2) return {\n    color: tokens[0],\n    parts: +tokens[1]\n  };\n  throw new Error('Max number of color tokens expected is 2');\n}\n\nfunction parseColor(color) {\n  if (typeof color === 'string') return colorFromString(color);\n  return color;\n}\n\nfunction generateStripesStyle(params) {\n  var type = 'linear-gradient';\n  var angle = params.angle;\n  var colors = params.colors ? params.colors.map(function (c) {\n    return parseColor(c);\n  }) : null;\n  var partCount = colors.reduce(function (total, c) {\n    return +total + c.parts;\n  }, 0);\n  var steps = partCount * 2;\n  var step = 100 / steps;\n  var colorCount = colors.length;\n  var n = colorCount * 2;\n  var outSegments = [];\n  var distance = 0;\n\n  for (var i = 0; i < n; i++) {\n    var index = i % colorCount;\n    var nextIndex = (i + 1) % colorCount;\n    distance += step * colors[index].parts;\n    outSegments.push(colors[index].color + ' ' + distance.toFixed(2) + '%');\n\n    if (i < n - 1) {\n      outSegments.push(colors[nextIndex].color + ' ' + distance.toFixed(2) + '%');\n    }\n  }\n\n  var size = params.size || steps;\n  var styleProps = {\n    backgroundImage: type + \"(\" + angle + \"deg, \" + outSegments.join(', ') + \")\",\n    backgroundSize: isNumber$1(size) ? size.toFixed(2) + \"px \" + size.toFixed(2) + \"px\" : size\n  };\n  return styleProps;\n}\n\nfunction createStripes(options) {\n  var params = _extends({}, defaultProps, options);\n\n  return generateStripesStyle(params);\n}\n\nfunction parseColor$1(color) {\n  var _color$percentage;\n\n  function colorFromString(color) {\n    var tokens = color.split(' ');\n\n    if (tokens.length > 2) {\n      throw new Error('Due to current limitation of this function, colors should be canonical without any spaces, e.g.: rgb(255,128,0,0.8) 75% is a valid color and stop pair.');\n    }\n\n    return tokens;\n  }\n\n  if (typeof color === 'string') return colorFromString(color);\n  return [color.color, (_color$percentage = color.percentage) === null || _color$percentage === void 0 ? void 0 : _color$percentage.toString()];\n}\n\nfunction generateLinearGradientStyle(options) {\n  var gradients = Array.isArray(options) ? options : [options];\n  var functions = gradients.map(function (g) {\n    var colors = g.colors.map(function (c) {\n      return parseColor$1(c);\n    });\n    var functionName = g.repeat ? 'repeating-linear-gradient' : 'linear-gradient';\n    return functionName + \"(\" + g.angle + \"deg, \" + colors.map(function (tuple) {\n      return tuple.join(' ');\n    }).join(', ') + \")\";\n  });\n  return {\n    backgroundImage: functions.join(', ')\n  };\n}\n\nfunction createLinearGradient(options) {\n  return generateLinearGradientStyle(options);\n}\n\nvar BoxShadowDefaults = {\n  xOffset: 0,\n  yOffset: 0,\n  blur: 5,\n  spread: 0,\n  rgba: {\n    r: 0,\n    g: 0,\n    b: 0,\n    a: 0.75\n  }\n};\nvar createBoxShadow = function createBoxShadow(props) {\n  var x = _extends({}, BoxShadowDefaults, props);\n\n  var colorString = props.rgba ? \"rgba(\" + x.rgba.r + \", \" + x.rgba.g + \", \" + x.rgba.b + \", \" + x.rgba.a + \")\" : props.hex;\n  var inset = props.inset ? 'inset ' : '';\n  var value = inset + (x.xOffset + \"px \" + x.yOffset + \"px \" + x.blur + \"px \" + x.spread + \"px \" + colorString);\n  return {\n    \"-webkit-box-shadow\": value,\n    \"-moz-box-shadow\": value,\n    \"box-shadow\": value\n  };\n};\n\nvar isClient = typeof window === 'object';\nvar gridSizeValues = {\n  xs: 1,\n  sm: 2,\n  md: 3,\n  lg: 4,\n  xl: 5,\n  xxl: 6,\n  xxxl: 7\n};\nvar breakpointSystem = {\n  bootstrap: [[1600, 'xxxl'], [1400, 'xxl'], [1200, 'xl'], [992, 'lg'], [768, 'md'], [576, 'sm']],\n  material: [[1920, 'xl'], [1280, 'lg'], [960, 'md'], [600, 'sm']]\n};\n\nvar getGridSize = function getGridSize(system) {\n  if (!isClient) return 'xs';\n  var breaks = breakpointSystem[system];\n\n  for (var _iterator = _createForOfIteratorHelperLoose(breaks), _step; !(_step = _iterator()).done;) {\n    var x = _step.value;\n\n    if (window.innerWidth >= x[0]) {\n      return x[1];\n    }\n  }\n\n  return 'xs';\n};\n\nvar makeGridSizeResult = function makeGridSizeResult(code) {\n  return {\n    code: code,\n    value: gridSizeValues[code]\n  };\n};\n\nvar useGridSize = function useGridSize(system) {\n  var ref = useRef({\n    value: 'xs',\n    ticking: false\n  }).current;\n\n  var _useState = useState(function () {\n    return makeGridSizeResult(getGridSize(system));\n  }),\n      state = _useState[0],\n      setState = _useState[1];\n\n  useEffect(function () {\n    return windowEventHandler(ref, function (gridSize) {\n      return setState(makeGridSizeResult(gridSize));\n    }, 'resize', function () {\n      return getGridSize(system);\n    });\n  }, []);\n  return state;\n};\n\nfunction getWindowHeight() {\n  return window.innerHeight;\n}\n\nvar useWindowHeight = function useWindowHeight() {\n  var ref = useRef({\n    value: 0,\n    ticking: false\n  }).current;\n\n  var _useState2 = useState(function () {\n    return !isClient ? 0 : getWindowHeight();\n  }),\n      state = _useState2[0],\n      setState = _useState2[1];\n\n  useEffect(function () {\n    return windowEventHandler(ref, setState, 'resize', getWindowHeight);\n  }, [ref]);\n  return state;\n};\n\nfunction getWindowWidth() {\n  return window.innerWidth;\n}\n\nvar useWindowWidth = function useWindowWidth() {\n  var ref = useRef({\n    value: 0,\n    ticking: false\n  }).current;\n\n  var _useState3 = useState(function () {\n    return !isClient ? 0 : getWindowWidth();\n  }),\n      state = _useState3[0],\n      setState = _useState3[1];\n\n  useEffect(function () {\n    return windowEventHandler(ref, setState, 'resize', getWindowWidth);\n  }, [ref]);\n  return state;\n};\nvar useWindowSize = function useWindowSize() {\n  var ref = useRef({\n    value: {\n      width: 0,\n      height: 0\n    },\n    ticking: false\n  }).current;\n\n  var _useState4 = useState(function () {\n    return !isClient ? {\n      width: 0,\n      height: 0\n    } : {\n      width: window.innerWidth,\n      height: window.innerHeight\n    };\n  }),\n      state = _useState4[0],\n      setState = _useState4[1];\n\n  useEffect(function () {\n    return windowEventHandler(ref, setState, 'resize', function () {\n      return {\n        width: window.innerWidth,\n        height: window.innerHeight\n      };\n    }, function (a, b) {\n      return a.width === b.width && a.height === b.height;\n    });\n  }, [ref]);\n  return state;\n};\n\nvar getScrollPosition = function getScrollPosition() {\n  return document.body.scrollTop || document.documentElement.scrollTop;\n};\n\nvar useScrollPosition = function useScrollPosition() {\n  var ref = useRef({\n    value: 0,\n    ticking: false\n  }).current;\n\n  var _useState5 = useState(function () {\n    return !isClient ? 0 : getScrollPosition();\n  }),\n      state = _useState5[0],\n      setState = _useState5[1];\n\n  useEffect(function () {\n    return windowEventHandler(ref, setState, 'scroll', getScrollPosition);\n  }, [ref]);\n  return state;\n};\n\nfunction windowEventHandler(ref, setState, event, readValue, compare) {\n  if (!isClient) return;\n\n  var handleEvent = function handleEvent() {\n    var value = readValue();\n\n    var compareValues = compare || function (a, b) {\n      return a === b;\n    };\n\n    if (compareValues(ref.value, value)) return;\n    ref.value = value;\n\n    if (!ref.ticking) {\n      window.requestAnimationFrame(function () {\n        setState(ref.value);\n        ref.ticking = false;\n      });\n      ref.ticking = true;\n    }\n  };\n\n  window.addEventListener(event, handleEvent);\n  return function () {\n    return window.removeEventListener(event, handleEvent);\n  };\n}\n\n\n\nvar hooks = {\n  __proto__: null,\n  createStripes: createStripes,\n  createLinearGradient: createLinearGradient,\n  createBoxShadow: createBoxShadow,\n  useGridSize: useGridSize,\n  useWindowWidth: useWindowWidth,\n  useWindowHeight: useWindowHeight,\n  useWindowSize: useWindowSize,\n  useScrollPosition: useScrollPosition\n};\n\nvar ui$1 = _extends({}, divRowCol, hooks);\n\nvar PageProps = function PageProps() {};\n\nvar _ownProps$1 = new PageProps();\n\nvar Layout = function Layout(directives) {\n  var other = _extends({}, directives);\n\n  var _useStyleDirectives = useStyleDirectives(other, _ownProps$1),\n      root = _useStyleDirectives.root,\n      props = _useStyleDirectives.props,\n      data = _useStyleDirectives.data;\n\n  var style = useInlineStyle({\n    root: {\n      minHeight: '100vh;',\n      '& > .column': {\n        '& > .row': {\n          height: '100vh;',\n          '& > .page-panel': {\n            backgroundColor: '#80808011'\n          }\n        }\n      }\n    }\n  }, [])();\n  return /*#__PURE__*/React__default.createElement(ui$1.row, _extends({\n    className: \"page-layout \" + root.className + \" \" + style.root\n  }, data, {\n    tight: true\n  }), /*#__PURE__*/React__default.createElement(ui$1.col, {\n    wide: true\n  }, props.header && fnOrValue(props.header), /*#__PURE__*/React__default.createElement(ui$1.row, null, props.children)));\n};\nvar index = {\n  layout: Layout,\n  panel: Panel\n};\n\nvar PropertyPage = function PropertyPage(props) {\n  var data = props.data;\n  var keys = Object.keys(data).filter(function (key) {\n    return !!data[key] || data[key] === 0;\n  });\n  return /*#__PURE__*/React__default.createElement(Fragment, null, keys.map(function (key) {\n    var label = camelToSentenceCase(key);\n    return /*#__PURE__*/React__default.createElement(row, {\n      key: key,\n      spaced: true,\n      fontSize: \"0.8rem\"\n    }, /*#__PURE__*/React__default.createElement(div, {\n      width: \"50%\",\n      opacity: 0.5\n    }, label), /*#__PURE__*/React__default.createElement(div, {\n      width: \"50%\"\n    }, typeof data[key] === 'boolean' ? data[key].toString() : data[key]));\n  }));\n};\n\nvar Header = function Header(props) {\n  var cols = props.cols || [];\n  return /*#__PURE__*/React__default.createElement(\"thead\", null, /*#__PURE__*/React__default.createElement(\"tr\", null, cols.map(function (c, index) {\n    return /*#__PURE__*/React__default.createElement(\"th\", {\n      key: index\n    }, c);\n  })));\n};\n\nvar TableRow = function TableRow(props) {\n  var item = props.item;\n  var cols = props.cols;\n  var isArray = Array.isArray(item);\n  return /*#__PURE__*/React__default.createElement(\"tr\", null, isArray && item.map(function (value, index) {\n    return /*#__PURE__*/React__default.createElement(\"td\", {\n      key: cols[index],\n      className: cellClass(value)\n    }, formatValue(value));\n  }), !isArray && cols.map(function (c, index) {\n    return /*#__PURE__*/React__default.createElement(\"td\", {\n      key: cols[index],\n      className: cellClass(item[c])\n    }, formatValue(item[c]));\n  }));\n};\n\nfunction formatValue(value) {\n  if (typeof value === 'number') {\n    return value.toFixed(0);\n  }\n\n  return value;\n}\n\nfunction cellClass(value) {\n  if (typeof value === 'number') {\n    return 'number';\n  }\n\n  return '';\n}\n\nvar _excluded$7 = [\"cols\", \"items\"];\n\nvar Table = function Table(directives) {\n  var cols = directives.cols,\n      items = directives.items,\n      other = _objectWithoutPropertiesLoose(directives, _excluded$7);\n\n  var _useStyleDirectives = useStyleDirectives(other, null),\n      root = _useStyleDirectives.root,\n      data = _useStyleDirectives.data,\n      events = _useStyleDirectives.events;\n\n  var baseStyle = useInlineStyle(function () {\n    return {\n      root: {\n        '& th': {\n          textAlign: 'left',\n          textTransform: 'capitalize',\n          paddingLeft: 5,\n          paddingRight: 5\n        },\n        '& td': {\n          borderTop: 'thin solid #80808080',\n          paddingTop: 8,\n          paddingLeft: 5,\n          paddingRight: 5,\n          paddingBottom: 0,\n          lineHeight: 1,\n          textAlign: 'center'\n        },\n        '& .number': {\n          textAlign: 'right'\n        }\n      }\n    };\n  }, [])();\n  if (!items) return null;\n  return /*#__PURE__*/React__default.createElement(\"table\", _extends({\n    cellPadding: 0,\n    cellSpacing: 0,\n    className: clsx(baseStyle.root, root.className)\n  }, data, events), cols && cols.length > 0 && /*#__PURE__*/React__default.createElement(Header, {\n    cols: cols\n  }), /*#__PURE__*/React__default.createElement(\"tbody\", null, items.map(function (item, itemIndex) {\n    return /*#__PURE__*/React__default.createElement(TableRow, {\n      key: itemIndex,\n      item: item,\n      cols: cols\n    });\n  })));\n};\n\nvar _excluded$8 = [\"id\", \"onChange\", \"activeKey\", \"variant\", \"orientation\", \"centered\", \"items\", \"keyForItem\", \"elementForItem\"];\n\nfunction TabPanel(props) {\n  var children = props.children,\n      active = props.active,\n      value = props.value,\n      id = props.id;\n  return /*#__PURE__*/createElement(\"div\", {\n    role: \"tabpanel\",\n    hidden: !active,\n    id: id + \"-\" + value,\n    \"aria-labelledby\": id + \"-\" + value\n  }, children || /*#__PURE__*/createElement(\"div\", null, \"No content\"));\n}\n\nvar Tabs = (function (directives) {\n  var onChange = directives.onChange,\n      activeKey = directives.activeKey,\n      items = directives.items,\n      keyForItem = directives.keyForItem,\n      elementForItem = directives.elementForItem,\n      d = _objectWithoutPropertiesLoose(directives, _excluded$8);\n\n  var _useStyleDirectives = useStyleDirectives(d, null, 'ui-tabs'),\n      root = _useStyleDirectives.root,\n      props = _useStyleDirectives.props;\n\n  var keys = items.map(function (item) {\n    if (!keyForItem) {\n      switch (typeof item) {\n        case 'string':\n          return item;\n\n        case 'number':\n          return item.toString();\n\n        default:\n          throw new Error('Invalid key');\n      }\n    }\n\n    return keyForItem(item);\n  });\n\n  var _React$useState = useState(function () {\n    return activeKey;\n  }),\n      selectedKey = _React$useState[0],\n      setActiveKey = _React$useState[1];\n\n  var handleChange = function handleChange(event, key) {\n    setActiveKey(key);\n    if (onChange) onChange(key);\n  };\n\n  var internalStyle = useInlineStyle(function () {\n    return {\n      minWidth: 'unset!important',\n      minHeight: 'unset!important'\n    };\n  }, [])();\n  if (!keys.length) return null;\n  var tabStrip = /*#__PURE__*/createElement(Tabs$1, {\n    orientation: directives.orientation,\n    value: selectedKey || keys[0],\n    onChange: handleChange,\n    \"aria-label\": \"tabs with \" + keys.length + \" panels\"\n  }, keys.map(function (key) {\n    var label = camelToSentenceCase(key);\n    return /*#__PURE__*/createElement(Tab, {\n      key: key,\n      label: label,\n      value: key\n    });\n  }));\n  var tabContent = items.map(function (item, index) {\n    var key = keys[index];\n    var isActiveTab = typeof selectedKey === 'undefined' && index === 0 || selectedKey === key;\n    return /*#__PURE__*/createElement(TabPanel, {\n      key: key,\n      active: isActiveTab,\n      value: key,\n      id: props.id || 'global'\n    }, elementForItem(item, isActiveTab));\n  });\n  var verticalLayout = /*#__PURE__*/createElement(row, {\n    wide: true\n  }, keys.length > 1 && /*#__PURE__*/createElement(col, null, tabStrip), /*#__PURE__*/createElement(col, {\n    grow: true\n  }, tabContent));\n  var horizontalLayout = /*#__PURE__*/createElement(Fragment$1, null, keys.length > 1 && tabStrip, tabContent);\n  var isVertical = directives.orientation === 'vertical';\n  return /*#__PURE__*/createElement(\"div\", {\n    className: clsx('root', root, internalStyle)\n  }, isVertical && verticalLayout, !isVertical && horizontalLayout);\n});\n\nvar _excluded$9 = [\"size\", \"children\"];\n\nvar Text = function Text(directives) {\n  var other = _objectWithoutPropertiesLoose(directives, _excluded$9);\n\n  var _useStyleDirectives = useStyleDirectives(other, null),\n      root = _useStyleDirectives.root,\n      data = _useStyleDirectives.data,\n      events = _useStyleDirectives.events;\n\n  if (!root.className) {\n    return fnOrValue(directives.children);\n  }\n\n  return /*#__PURE__*/React__default.createElement(\"div\", _extends({}, data, {\n    className: root.className\n  }, events), fnOrValue(directives.children));\n};\n\nfunction all(array, test) {\n  var someAreFalse = array.some(function (x) {\n    return !test(x);\n  });\n  return !someAreFalse;\n}\nfunction uniques(array) {\n  return Array.from(new Set(array));\n}\nfunction toDictionary(items, key) {\n  return items.reduce(function (dict, item) {\n    var _Object$assign;\n\n    return Object.assign(dict, (_Object$assign = {}, _Object$assign[key(item)] = item, _Object$assign));\n  }, {});\n}\nfunction sortBy(valueForItem, order) {\n  var dir = order && order === 'desc' ? -1 : 1;\n  return function (a, b) {\n    return (valueForItem(a) < valueForItem(b) ? -1 : 1) * dir;\n  };\n}\nfunction sortByDesc(valueForItem) {\n  return function (a, b) {\n    return valueForItem(a) > valueForItem(b) ? -1 : 1;\n  };\n}\n\nfunction parse(date) {\n  var d = new Date();\n  var offsetMinutes = d.getTimezoneOffset();\n  var minutes = offsetMinutes % 60;\n  var hours = offsetMinutes / 60;\n  var hh = hours.toString().padStart(2, '0');\n  var mm = minutes.toString().padStart(2, '0');\n  var adjustmentTime = hh + \":\" + mm;\n  var yyyymmdd = date.split('T')[0];\n\n  var _yyyymmdd$split = yyyymmdd.split('-'),\n      yyyy = _yyyymmdd$split[0],\n      MM = _yyyymmdd$split[1],\n      dd = _yyyymmdd$split[2];\n\n  var value = new Date(yyyy + \"-\" + MM + \"-\" + dd + \"T\" + adjustmentTime + \":00.000\");\n  return value;\n}\nfunction isoToInt(isoDate) {\n  var _isoDate$split$0$spli = isoDate.split('T')[0].split('-'),\n      yyyy = _isoDate$split$0$spli[0],\n      MM = _isoDate$split$0$spli[1],\n      dd = _isoDate$split$0$spli[2];\n\n  return parseInt(\"\" + yyyy + MM + dd, 10);\n}\n\nexport { Throttle, all, camelToKebabCase, camelToSentenceCase, MediaCard as card, Col as col, Counter as counter, createBoxShadow, createLinearGradient, createStripes, Div as div, Drawer as drawer, Dropdown as dropdown, Element as element, fnOrValue, inline, isJsonPath, isNull, isNullOrUndefined, isNumber, isString, isUndefined, isoToInt, loremIpsum, Masonry as masonry, Modal as modal, mutateWhile, NumberInput as numberInput, index as page, parse, PropertyPage as propertyPage, range, removeDoubleSpaces, Row as row, sortBy, sortByDesc, Table as table, Tabs as tabs, Text as text, toCamelCase, toDictionary, toProperCase, uniques, useGridSize, useInlineStyle, useScrollPosition, useStyleDirectives, useWindowHeight, useWindowSize, useWindowWidth };\n//# sourceMappingURL=index.modern.js.map\n","import React, { useCallback, useState } from 'react';\r\nimport * as ui from '@reactiff/ui-core';\r\nimport DeviceController from '../initialize/DeviceController';\r\nimport { MidiControl, MidiMappedControl } from '../types';\r\nimport { getControlId } from './getControlId';\r\n\r\n\r\ntype Props = {\r\n    channel?: number,\r\n    control: MidiControl,\r\n    controller: DeviceController,\r\n    number?: number,\r\n}\r\n\r\nfunction MIDIPad(props: Props) {\r\n   \r\n    const controlId = getControlId(props.control);\r\n\r\n    const am = props.controller.activeMapping!;\r\n    const isActive = () => !!am && controlId === getControlId(am && am.control);\r\n\r\n    const [revision, setRevision] = useState(0);\r\n    const rerender = useCallback(() => setRevision(r => r + 1), []);\r\n\r\n    const mappedControl: MidiMappedControl = { \r\n        ...props,\r\n        rerender,\r\n    };\r\n\r\n    // CALLBACKS //\r\n    const handleClick = () => {\r\n        if (!isActive()) {\r\n            props.controller.beginMapping(mappedControl);\r\n        }\r\n        else {\r\n            props.controller.cancelMapping();\r\n        }\r\n    }\r\n\r\n    // THESE FLAGS WILL DRIVE APPEARANCE\r\n    // Is this control mapped?\r\n    const mappedEvent = props.controller.getMappedEventData(controlId);\r\n    const mapped = !!mappedEvent;\r\n\r\n    // Is it Active now?\r\n    const active = isActive();\r\n\r\n\r\n    const cssBase: any = {\r\n        width: 60,\r\n        height: 60,\r\n        padding: 0,\r\n        borderRadius: '3px',\r\n        cursor: 'pointer',\r\n        backgroundColor: mapped ? '#16c793' : '#000000',\r\n    };\r\n    \r\n    const cssKnob: any = {\r\n        width: 58,\r\n        height: 58,\r\n        borderRadius: '3px',\r\n        borderColor: '#000',\r\n        backgroundColor: mapped ? '#08251c' : '#777777',\r\n        fontSize: \"0.55rem\",\r\n    };\r\n  \r\n    if (active) {\r\n        cssKnob.backgroundColor = mapped ? '#00ffff' : '#0055ff'\r\n        cssKnob.color = '#000'\r\n    }\r\n\r\n    return (\r\n        <ui.col alignCenter>\r\n            <ui.div className=\"center-xy\" css={cssBase} onClick={handleClick}>\r\n                <ui.div css={cssKnob} className=\"center-xy\">\r\n                    <span>{props.control.name}</span>\r\n                </ui.div>\r\n            </ui.div>\r\n        </ui.col>\r\n    );\r\n}\r\n\r\nexport default MIDIPad;","import React, { useState, useCallback } from 'react';\r\nimport * as ui from '@reactiff/ui-core';\r\nimport { MidiControl, MidiMappedControl } from '../types';\r\nimport DeviceController from '../initialize/DeviceController';\r\nimport { getControlId } from './getControlId';\r\n\r\ntype Props = {\r\n    channel?: number,\r\n    // group?: string,\r\n    control: MidiControl,\r\n    controller: DeviceController,\r\n}\r\n\r\nexport default (props: Props) => {\r\n\r\n    const controlId = getControlId(props.control);\r\n    const am = props.controller.activeMapping!;\r\n\r\n    const isActive = () => !!am && controlId === getControlId(am.control);\r\n    const [revision, setRevision] = useState(0);\r\n    const rerender = useCallback(() => setRevision(r => r + 1), []);\r\n\r\n    const mappedControl: MidiMappedControl = { \r\n        ...props,\r\n        rerender,\r\n    };\r\n\r\n    // CALLBACKS //\r\n    const handleClick = () => {\r\n        if (!isActive()) {\r\n            props.controller.beginMapping(mappedControl);\r\n        }\r\n        else {\r\n            props.controller.cancelMapping();\r\n        }\r\n    }\r\n\r\n    // THESE FLAGS WILL DRIVE APPEARANCE\r\n    // Is this control mapped?\r\n    const mappedEvent = props.controller.getMappedEventData(controlId);\r\n    const mapped = !!mappedEvent;\r\n\r\n    // Is it Active now?\r\n    const active = isActive();\r\n\r\n    // STYLES //\r\n\r\n    // TODO transfer styles from .css file:\r\n    const cssBase: any = {\r\n        width: 60,\r\n        height: 60,\r\n        padding: 1,\r\n        borderRadius: '50%',\r\n        cursor: 'pointer',\r\n        backgroundColor: mapped ? '#16c793' : '#000000',\r\n    };\r\n    \r\n    const cssKnob: any= {\r\n        width: 58,\r\n        height: 58,\r\n        borderRadius: '50%',\r\n        borderColor: '#000',\r\n        backgroundColor: mapped ? '#08251c' : '#777777',\r\n        fontSize: \"0.55rem\",\r\n    };\r\n  \r\n    if (active) {\r\n        cssKnob.backgroundColor = mapped ? '#00ffff' : '#0055ff'\r\n        cssKnob.color = '#000';\r\n    }\r\n\r\n    return (\r\n        <ui.col alignCenter>\r\n            <ui.div className=\"center-xy\" css={cssBase} onClick={handleClick}>\r\n                <ui.div css={cssKnob} className=\"center-xy\">\r\n                    <span>{props.control.name}</span>\r\n                </ui.div>\r\n            </ui.div>\r\n        </ui.col>\r\n    );\r\n}","import React from 'react'\r\nimport midiContext from '../../midiContext'\r\nimport * as ui from '@reactiff/ui-core'\r\nimport MIDIPad from '../MIDIPad'\r\nimport MIDISelector from '../MIDISelector'\r\n\r\nconst HorizontalControls = (props: any) => {\r\n\r\n  const { scope } = props\r\n\r\n\r\n  return (\r\n    <ui.row>\r\n      {scope.channelNumbers.map((channel, index) => {\r\n        return (\r\n          <ui.col key={`ch${channel}`} spaced alignCenter padding='0 5px'>\r\n            {scope.channelControls.map((control, i) => {\r\n              return control.type === 'pad' ? (\r\n                <MIDIPad\r\n                  key={i}\r\n                  channel={channel}\r\n                  control={control}\r\n                  controller={scope.controller}\r\n                />\r\n              ) : (\r\n                <MIDISelector\r\n                  key={i}\r\n                  channel={channel}\r\n                  control={control}\r\n                  controller={scope.controller}\r\n                />\r\n              )\r\n            })}\r\n\r\n            {channel > 0 && (\r\n              <ui.div grow fontSize='0.875rem'>\r\n                CH {channel}\r\n              </ui.div>\r\n            )}\r\n          </ui.col>\r\n        )\r\n      })}\r\n    </ui.row>\r\n  )\r\n}\r\n\r\nexport default HorizontalControls\r\n","import React from 'react'\r\nimport midiContext from '../../midiContext'\r\nimport * as ui from '@reactiff/ui-core'\r\nimport MIDIPad from '../MIDIPad'\r\nimport MIDISelector from '../MIDISelector'\r\n\r\nconst HorizontalNamedControlGroups = (props: any) => {\r\n\r\n  const { \r\n    eventHandler, \r\n    controller, \r\n    config \r\n  } = props.scope;\r\n  \r\n  \r\n  const { rows } = config;\r\n\r\n  const groupKeys = Object.keys(rows);\r\n\r\n\r\n  return (\r\n    <ui.col>\r\n      {rows.map((row, rIndex) => {\r\n\r\n        const controls = row;\r\n        let prevGroup = null;\r\n\r\n        return (\r\n\r\n          \r\n          <ui.row key={`row${rIndex}`} spaced alignCenter padding='0 5px'>\r\n\r\n            {controls.map((ctl, i) => {\r\n\r\n              const caption = !!ctl.group && ctl.group !== prevGroup ? ctl.group : null;\r\n              const captionStyle = {\r\n                height: 20,\r\n                // ...(caption ? { borderBottom: '1px solid black' } : {}),\r\n                \r\n              };\r\n\r\n              prevGroup = ctl.group;\r\n\r\n              return <ui.col key={i}>\r\n\r\n                <ui.div css={captionStyle} >\r\n                  {caption}\r\n                </ui.div>\r\n\r\n                {\r\n                  ctl.type === 'pad' ? (\r\n                    <MIDIPad\r\n                      key={i}\r\n                      control={ctl}\r\n                      controller={controller}\r\n                    />\r\n                  ) : (\r\n                    <MIDISelector\r\n                      key={i}\r\n                      control={ctl}\r\n                      controller={controller}\r\n                    />\r\n                  )\r\n                }\r\n                \r\n              </ui.col>\r\n              \r\n              \r\n            })}\r\n\r\n            \r\n           \r\n            \r\n          </ui.row>\r\n        )\r\n      })}\r\n    </ui.col>\r\n  )\r\n}\r\n\r\nexport default HorizontalNamedControlGroups\r\n","import React from 'react'\r\nimport midiContext from '../../midiContext'\r\nimport * as ui from '@reactiff/ui-core'\r\nimport MIDIPad from '../MIDIPad'\r\nimport MIDISelector from '../MIDISelector'\r\nimport HorizontalControls from './HorizontalControls'\r\nimport { InternalMidiContextInterface } from '../../types'\r\nimport HorizontalNamedControlGroups from './HorizontalNamedControlGroups'\r\n\r\nconst HorizontalStack = (props: any) => {\r\n\r\n  const { controller } = props\r\n\r\n  const midi = React.useContext(midiContext) as InternalMidiContextInterface;\r\n  const eventHandler = midi.getEventTarget()!;\r\n  const config = eventHandler.config;\r\n  const inverted = config.flowDirection === 'inverted';\r\n\r\n  // scope={{\r\n  //   eventHandler,\r\n  //   controller,\r\n  //   channelNumbers: [0],\r\n  //   channelControls: g\r\n  // }}\r\n\r\n  // const VerticalGlobals =\r\n  //   config.globalGroups && layout === 'vertical'\r\n  //     ? () => (\r\n  //         <ui.col marginTop={15} marginBottom={15}>\r\n  //           {config.globalGroups.map((g, i) => {\r\n  //             return (\r\n  //               <VerticalLayout\r\n  //                 key={i}\r\n  //                 scope={{\r\n  //                   eventHandler,\r\n  //                   controller,\r\n  //                   channelNumbers: [0],\r\n  //                   channelControls: g\r\n  //                 }}\r\n  //               />\r\n  //             )\r\n  //           })}\r\n  //         </ui.col>\r\n  //       )\r\n  //     : () => null\r\n\r\n  \r\n  const channelNumbers = Array.from(\r\n    { length: config.channels || 0 },\r\n    (a, i) => i + 1\r\n  )\r\n  // if (layout === 'vertical') {\r\n  //   channelNumbers.reverse()\r\n  // }\r\n\r\n\r\n\r\n  \r\n\r\n \r\n\r\n  const HGlobals = !!config.globalGroups\r\n      ? () => {\r\n\r\n          return <ui.row marginLeft={15} marginRight={15}>\r\n            {config.globalGroups!.map((g, i) => {\r\n              return (\r\n                <HorizontalControls\r\n                  key={i}\r\n                  scope={{\r\n                    annotation: \"from globalGroups (see data)\",\r\n                    data: config.globalGroups,\r\n                    eventHandler,\r\n                    controller,\r\n                    channelNumbers: [0],\r\n                    channelControls: g\r\n                  }}\r\n                />\r\n              )\r\n            })}\r\n          </ui.row>\r\n      }\r\n      : () => null\r\n\r\n\r\n  return <ui.col>\r\n\r\n    <ui.text fontSize='0.7rem' color='white' padding='5px 0 30px 0' textAlign=\"right\">\r\n      {controller.device.name}\r\n    </ui.text>\r\n    \r\n    {/* For vertical layout, render globals before the row */}\r\n    {/* { !verticalInverted && <VerticalGlobals /> } */}\r\n    \r\n    <ui.row>\r\n      \r\n      { !inverted && <HGlobals /> }\r\n\r\n      {/* {\r\n        layout === 'vertical' &&\r\n        <VerticalLayout scope={{ \r\n          eventHandler, \r\n          controller,\r\n          channelNumbers, \r\n          channelControls: config.channelControls  \r\n        }}/>\r\n      } */}\r\n\r\n\r\n      {\r\n        // ORIGINAL IMPL\r\n        config.channels && \r\n        <HorizontalControls scope={{ \r\n          eventHandler, \r\n          controller, \r\n          channelNumbers, \r\n          channelControls: config.channelControls \r\n        }}/>\r\n      }\r\n    \r\n      {\r\n        // NEW - NAMED GROUPS for color, i.e. rgb, cmyk, hsl, hwb\r\n        config.rows && \r\n        <HorizontalNamedControlGroups scope={{ \r\n          eventHandler, \r\n          controller, \r\n          config\r\n        }}/>\r\n        \r\n      }\r\n\r\n\r\n\r\n\r\n      { inverted && <HGlobals /> }\r\n\r\n    </ui.row>\r\n\r\n    {/* { verticalInverted && <VerticalGlobals /> } */}\r\n    \r\n  </ui.col>\r\n}\r\n\r\n\r\nexport default HorizontalStack\r\n","import React, { createElement } from 'react'\r\nimport midiContext from '../../midiContext'\r\nimport * as ui from '@reactiff/ui-core'\r\nimport MIDIPad from '../MIDIPad'\r\nimport MIDISelector from '../MIDISelector'\r\nimport { InternalMidiContextInterface } from '../../types'\r\n\r\nimport HorizontalStack from './HorizontalStack';\r\n\r\ntype Props = { controller: any };\r\n\r\nconst DeviceLayout = (props: Props) => {\r\n\r\n  const midi = React.useContext(midiContext) as InternalMidiContextInterface;\r\n  \r\n  const eventHandler = midi.getEventTarget()!;\r\n  const config = eventHandler.config;\r\n\r\n  const layout = config.layout || 'horizontal';\r\n  const inverted = config.flowDirection === 'inverted';\r\n\r\n  // const horizontalInverted = layout === 'horizontal' && config.flowDirection === 'inverted'\r\n  // const verticalInverted = layout === 'vertical' && config.flowDirection === 'inverted'\r\n\r\n  if (inverted) {\r\n    if (config.channelControls) config.channelControls.reverse()\r\n    if (config.globalGroups) config.globalGroups.forEach((g) => g.reverse())\r\n  }\r\n\r\n  // if (horizontalInverted) {\r\n  //   if (config.channelControls) config.channelControls.reverse()\r\n  //   if (config.globalGroups) config.globalGroups.forEach((g) => g.reverse())\r\n  // }\r\n\r\n  // if (verticalInverted) {\r\n  //   if (config.channelControls) config.channelControls.reverse()\r\n  //   if (config.globalGroups) config.globalGroups.forEach((g) => g.reverse())\r\n  // }\r\n\r\n\r\n  return <React.Fragment>\r\n    {\r\n      layout === 'horizontal' && <HorizontalStack controller={props.controller} /> \r\n    }\r\n    {\r\n      layout === 'vertical' && createElement('VerticalStack', props) \r\n    }\r\n  </React.Fragment>;\r\n}\r\n\r\nexport default DeviceLayout\r\n","import React, { useContext } from 'react'\r\nimport midiContext from '../../midiContext'\r\nimport * as ui from '@reactiff/ui-core'\r\nimport DeviceLayout from './DeviceLayout'\r\nimport { InternalMidiContextInterface } from '../../types'\r\n\r\nconst bgStyle = ui.createStripes({\r\n    // bg\r\n    angle: 135,\r\n    colors: ['#00000088', '#00000099'],\r\n    size: 20\r\n  });\r\n  \r\nconst shadow = ui.createBoxShadow({ blur: 30, hex: '#00ff0022' }) // dialog\r\n\r\n// const grid = ui.useGridSize('material')\r\n// const dialogWidth = ui.logic.switch(\r\n//   grid.value,\r\n//   'calc(100% - 40px)', // default\r\n//   (x) => x >= 3,\r\n//   '800px',\r\n//   (x) => x >= 2,\r\n//   '700px'\r\n// )\r\n  \r\nconst dgStyle = {\r\n  boxShadow: shadow['box-shadow'],\r\n  backgroundColor: '#282c34',\r\n  border: '1px solid #88ff8833'\r\n  // width: dialogWidth,\r\n}\r\n\r\n\r\nconst SettingsLayout = () => {\r\n\r\n  const midi = useContext(midiContext) as InternalMidiContextInterface;\r\n\r\n  return (\r\n\r\n    <ui.col fixed fill justifyCenter alignCenter css={bgStyle}>\r\n      <ui.div relative css={dgStyle}>\r\n\r\n        {/* DIALOG HEADER */}\r\n        <ui.text\r\n          fontSize='2em'\r\n          color='white'\r\n          bgColor='#111111dd'\r\n          padding='15px 15px 5px 15px'\r\n        >\r\n          MIDI mappings\r\n        </ui.text>\r\n\r\n        <ui.div padding='15px 15px 15px 15px'>\r\n          <ui.tabs\r\n            items={midi.controllers}\r\n            keyForItem={(controller) => {\r\n              return controller.device.name\r\n            }}\r\n            elementForItem={(controller, activeTab) => {\r\n              if (!activeTab) return null;\r\n              return <DeviceLayout controller={controller}  /> \r\n            }}\r\n          />\r\n        </ui.div>\r\n      </ui.div>\r\n    </ui.col>\r\n  )\r\n}\r\n\r\nexport default SettingsLayout\r\n\r\n","import React, { useCallback, useEffect } from 'react'\r\nimport midiContext from '../midiContext'\r\nimport * as ui from '@reactiff/ui-core'\r\n\r\nimport MIDIPad from './MIDIPad'\r\nimport MIDISelector from './MIDISelector'\r\n\r\nimport SettingsLayout from './layout/SettingsLayout'\r\n\r\n//////////////////////////////////////////////////////////// MIDI SETTINGS\r\n\r\nconst MidiSettings = (props: any) => {\r\n\r\n  const midi: any = React.useContext(midiContext)\r\n   \r\n  // CALLBACKS //\r\n  const quitNow = useCallback(() => midi.toggleSettings(false), [])\r\n  const onEscapeKey = useCallback((e) => e.keyCode === 27 && quitNow(), [])\r\n\r\n  useEffect(() => { // Handle Esc key\r\n    document.addEventListener('keydown', onEscapeKey, false)\r\n    return () => document.removeEventListener('keydown', onEscapeKey, false)\r\n  }, [])\r\n\r\n  if (!midi.settingsOpen) return null\r\n  if (midi.controllers.length === 0) return null // No controllers connected\r\n  \r\n  return <SettingsLayout />\r\n}\r\n\r\nexport default MidiSettings\r\n","import React, { useState, useEffect, useRef, useMemo, ReactNode } from 'react'\r\nimport midiContext from './midiContext'\r\nimport { initialize } from './initialize'\r\nimport DeviceController from './initialize/DeviceController'\r\nimport Settings from './Settings';\r\nimport { InternalMidiContextInterface, MidiEventTarget } from './types';\r\n\r\n//////////////////////////////////////////////////////////////////////// MIDI\r\n\r\ntype MutableState = {\r\n  targetMap: { [index: string]: MidiEventTarget }\r\n  targetStack: MidiEventTarget[]\r\n}\r\n\r\ntype Props = {\r\n  children: ReactNode\r\n}\r\nconst MidiProvider = (props: Props) => {\r\n\r\n  const [controllers, setControllers]     = useState<DeviceController[]>([]);\r\n  const [settingsOpen, setSettingsOpen]   = useState(false);\r\n  \r\n  const mutable = useRef<MutableState>({\r\n    targetMap: {},\r\n    targetStack: []\r\n  }).current\r\n\r\n\r\n  // Should be called each time a) new device loads b) target registers/unregisters\r\n  const bindEventTargets = (cc: DeviceController[], tgt?: MidiEventTarget) => {\r\n    const _t = tgt || context.getEventTarget();\r\n    cc.forEach(c => c.bindEventTarget(_t));\r\n  } \r\n\r\n  const context: InternalMidiContextInterface = {\r\n\r\n    settingsOpen,\r\n    toggleSettings: (open: boolean) => {\r\n      setSettingsOpen(open);\r\n    },\r\n\r\n    controllers,\r\n    setControllers: (ctrls) => {\r\n\r\n      bindEventTargets(ctrls);\r\n      setControllers(ctrls);\r\n    },\r\n\r\n    getEventTarget() {\r\n      if (!mutable.targetStack.length) return undefined\r\n      return mutable.targetStack[mutable.targetStack.length - 1]\r\n    },\r\n\r\n    // PUBLIC INTERFACE\r\n    register(target: MidiEventTarget) {\r\n\r\n      if (mutable.targetMap[target.id]) {\r\n        throw new Error('Target already registered')\r\n      }\r\n\r\n      mutable.targetStack.push(target)\r\n      mutable.targetMap[target.id] = target\r\n\r\n      bindEventTargets(controllers, target);\r\n\r\n      return () => {\r\n        context.unregister(target);\r\n      };\r\n    },\r\n\r\n    unregister(target: MidiEventTarget) {\r\n      const top = context.getEventTarget()\r\n      if (!top) throw new Error('Nothing to pop')\r\n      if (top.id !== target.id) {\r\n        throw new Error('Target is not on top of the stack')\r\n      }\r\n      mutable.targetStack.pop()\r\n      delete mutable.targetMap[target.id]\r\n      bindEventTargets(controllers);\r\n    },\r\n\r\n  };\r\n\r\n  useEffect(() => {\r\n    initialize(context)\r\n    return () => {\r\n      controllers.forEach((d: any) => d.disconnect())\r\n    }\r\n  }, [])\r\n\r\n  return (\r\n    <midiContext.Provider value={context}>\r\n      {props.children}\r\n      <Settings />\r\n    </midiContext.Provider>\r\n  )\r\n}\r\n\r\nexport default MidiProvider;","import React from 'react'\r\nimport midiContext from './midiContext';\r\n\r\n///////////////////////////////////////////// MIDI INDICATOR \r\n\r\nconst MidiIndicator = (props: any) => {\r\n    const midi: any = React.useContext(midiContext);\r\n\r\n    return <button \r\n        style={{\r\n            backgroundColor: 'transparent',\r\n            border: '2px solid yellowgreen',\r\n            borderRadius: 3,\r\n            color: 'yellowgreen',\r\n            cursor: 'pointer'\r\n        }}\r\n        onClick={() => midi.toggleSettings(true)}>\r\n        MIDI\r\n    </button>\r\n}\r\n\r\nexport default MidiIndicator;","\r\nexport default class Throttle {\r\n    \r\n    nextCallback?: Function;\r\n    lastKnownParams?: any[];\r\n\r\n    ticking = false;\r\n\r\n    invokeWithAnimationFrame(callback: Function, ...params: any[]) {\r\n        \r\n        this.nextCallback = callback;\r\n        this.lastKnownParams = params;\r\n\r\n        if (!this.ticking) {\r\n\r\n            const _this = this;\r\n\r\n            const dispatch = (fn: Function, ...params: any[]) => {\r\n                _this.ticking = true;\r\n                _this.nextCallback = undefined;\r\n                _this.lastKnownParams = undefined;\r\n                window.requestAnimationFrame(() => {\r\n                    fn(...params);\r\n                    _this.ticking = false;\r\n                    if (_this.nextCallback) {\r\n                        dispatch(_this.nextCallback, ..._this.lastKnownParams!);            \r\n                    }\r\n                });\r\n            }\r\n\r\n            dispatch(this.nextCallback, ...this.lastKnownParams);\r\n\r\n        }\r\n    }\r\n}\r\n","// Based on:\r\n/* w3color.js ver.1.18 by w3schools.com (Do not remove this line)*/\r\nexport default class W3Color {\r\n    constructor(color) {\r\n      const obj = typeof color === 'object' ? color : toColorObject(color);\r\n      Object.assign(this, obj);\r\n    }\r\n  \r\n    toRgbString() {\r\n      return \"rgb(\" + this.red + \", \" + this.green + \", \" + this.blue + \")\";\r\n    }\r\n\r\n    toRgbaString() {\r\n      return \"rgba(\" + this.red + \", \" + this.green + \", \" + this.blue + \", \" + this.opacity + \")\";\r\n    }\r\n\r\n    toHwbString() {\r\n      return \"hwb(\" + this.hue + \", \" + Math.round(this.whiteness * 100) + \"%, \" + Math.round(this.blackness * 100) + \"%)\";\r\n    }\r\n\r\n    toHwbStringDecimal() {\r\n      return \"hwb(\" + this.hue + \", \" + this.whiteness + \", \" + this.blackness + \")\";\r\n    }\r\n\r\n    toHwbaString() {\r\n      return \"hwba(\" + this.hue + \", \" + Math.round(this.whiteness * 100) + \"%, \" + Math.round(this.blackness * 100) + \"%, \" + this.opacity + \")\";\r\n    }\r\n\r\n    toHslString() {\r\n      return \"hsl(\" + this.hue + \", \" + Math.round(this.sat * 100) + \"%, \" + Math.round(this.lightness * 100) + \"%)\";\r\n    }\r\n\r\n    toHslStringDecimal() {\r\n      return \"hsl(\" + this.hue + \", \" + this.sat + \", \" + this.lightness + \")\";\r\n    }\r\n\r\n    toHslaString() {\r\n      return \"hsla(\" + this.hue + \", \" + Math.round(this.sat * 100) + \"%, \" + Math.round(this.lightness * 100) + \"%, \" + this.opacity + \")\";\r\n    }\r\n\r\n    toCmykString() {\r\n      return \"cmyk(\" + Math.round(this.cyan * 100) + \"%, \" + Math.round(this.magenta * 100) + \"%, \" + Math.round(this.yellow * 100) + \"%, \" + Math.round(this.black * 100) + \"%)\";\r\n    }\r\n\r\n    toCmykStringDecimal() {\r\n      return \"cmyk(\" + this.cyan + \", \" + this.magenta + \", \" + this.yellow + \", \" + this.black + \")\";\r\n    }\r\n\r\n    toNcolString() {\r\n      return this.ncol + \", \" + Math.round(this.whiteness * 100) + \"%, \" + Math.round(this.blackness * 100) + \"%\";\r\n    }\r\n    \r\n    toNcolStringDecimal() {\r\n      return this.ncol + \", \" + this.whiteness + \", \" + this.blackness;\r\n    }\r\n\r\n    toNcolaString() {\r\n      return this.ncol + \", \" + Math.round(this.whiteness * 100) + \"%, \" + Math.round(this.blackness * 100) + \"%, \" + this.opacity;\r\n    }\r\n\r\n    toName() {\r\n      let r;\r\n      let g;\r\n      let b;\r\n      const colorhexs = getColorArr('hexs');\r\n      for (let i = 0; i < colorhexs.length; i++) {\r\n        r = parseInt(colorhexs[i].substr(0,2), 16);\r\n        g = parseInt(colorhexs[i].substr(2,2), 16);\r\n        b = parseInt(colorhexs[i].substr(4,2), 16);\r\n        if (this.red === r && this.green === g && this.blue === b) {\r\n          return getColorArr('names')[i];\r\n        }\r\n      }\r\n      return \"\";\r\n    }\r\n\r\n    toHexString() {\r\n      const r = toHex(this.red);\r\n      const g = toHex(this.green);\r\n      const b = toHex(this.blue);\r\n      const a = toHex(this.opacity * 255);\r\n      return \"#\" +  r + g + b + a;\r\n    }\r\n\r\n    toRgb() {\r\n      return {r : this.red, g : this.green, b : this.blue, a : this.opacity};\r\n    }\r\n\r\n    toHsl() {\r\n      return {h : this.hue, s : this.sat, l : this.lightness, a : this.opacity};\r\n    }\r\n\r\n    toHwb() {\r\n      return {h : this.hue, w : this.whiteness, b : this.blackness, a : this.opacity};\r\n    }\r\n\r\n    toCmyk() {\r\n      return {c : this.cyan, m : this.magenta, y : this.yellow, k : this.black, a : this.opacity};\r\n    }\r\n\r\n    toNcol() {\r\n      return {ncol : this.ncol, w : this.whiteness, b : this.blackness, a : this.opacity};\r\n    }\r\n\r\n    isDark(n) {\r\n      const m = (n || 128);\r\n      return (((this.red * 299 + this.green * 587 + this.blue * 114) / 1000) < m);\r\n    }\r\n  \r\n    saturate(n) {\r\n      const x = (n / 100 || 0.1);\r\n      this.sat += x;\r\n      if (this.sat > 1) {this.sat = 1;}\r\n      const rgb = hslToRgb(this.hue, this.sat, this.lightness);\r\n      const color = colorObject(rgb, this.opacity, this.hue, this.sat);\r\n      return new W3Color(color);\r\n    }\r\n\r\n    desaturate(n) {\r\n      const x = (n / 100 || 0.1);\r\n      this.sat -= x;\r\n      if (this.sat < 0) {this.sat = 0;}\r\n      const rgb = hslToRgb(this.hue, this.sat, this.lightness);\r\n      const color = colorObject(rgb, this.opacity, this.hue, this.sat);\r\n      return new W3Color(color);\r\n    }\r\n\r\n    lighter(n) {\r\n      const x = (n / 100 || 0.1);\r\n      this.lightness += x;\r\n      if (this.lightness > 1) {this.lightness = 1;}\r\n      const rgb = hslToRgb(this.hue, this.sat, this.lightness);\r\n      const color = colorObject(rgb, this.opacity, this.hue, this.sat);\r\n      return new W3Color(color);\r\n    }\r\n\r\n    darker(n) {\r\n      const x = (n / 100 || 0.1);\r\n      this.lightness -= x;\r\n      if (this.lightness < 0) {this.lightness = 0;}\r\n      const rgb = hslToRgb(this.hue, this.sat, this.lightness);\r\n      const color = colorObject(rgb, this.opacity, this.hue, this.sat);\r\n      return new W3Color(color);\r\n    }\r\n    \r\n  }\r\n  \r\n  function toColorObject(c) {\r\n    var x, y, typ, arr = [], arrlength, i, opacity, match, a, hue, sat, rgb, colornames = [], colorhexs = [];\r\n    c = c.trim().toLowerCase();\r\n    x = c.substr(0,1).toUpperCase();\r\n    y = c.substr(1);\r\n    a = 1;\r\n    if ((x == \"R\" || x == \"Y\" || x == \"G\" || x == \"C\" || x == \"B\" || x == \"M\" || x == \"W\") && !isNaN(y)) {\r\n      if (c.length == 6 && c.indexOf(\",\") == -1) {\r\n      } else {\r\n        c = \"ncol(\" + c + \")\";\r\n      }\r\n    }\r\n    if (c.length != 3 && c.length != 6 && !isNaN(c)) {c = \"ncol(\" + c + \")\";}\r\n    if (c.indexOf(\",\") > 0 && c.indexOf(\"(\") == -1) {c = \"ncol(\" + c + \")\";}  \r\n    if (c.substr(0, 3) == \"rgb\" || c.substr(0, 3) == \"hsl\" || c.substr(0, 3) == \"hwb\" || c.substr(0, 4) == \"ncol\" || c.substr(0, 4) == \"cmyk\") {\r\n      if (c.substr(0, 4) == \"ncol\") {\r\n        if (c.split(\",\").length == 4 && c.indexOf(\"ncola\") == -1) {\r\n          c = c.replace(\"ncol\", \"ncola\");\r\n        }\r\n        typ = \"ncol\";\r\n        c = c.substr(4);\r\n      } else if (c.substr(0, 4) == \"cmyk\") {\r\n        typ = \"cmyk\";\r\n        c = c.substr(4);\r\n      } else {\r\n        typ = c.substr(0, 3);\r\n        c = c.substr(3);\r\n      }\r\n      arrlength = 3;\r\n      opacity = false;\r\n      if (c.substr(0, 1).toLowerCase() == \"a\") {\r\n        arrlength = 4;\r\n        opacity = true;\r\n        c = c.substr(1);\r\n      } else if (typ == \"cmyk\") {\r\n        arrlength = 4;\r\n        if (c.split(\",\").length == 5) {\r\n          arrlength = 5;\r\n          opacity = true;\r\n        }\r\n      }\r\n      c = c.replace(\"(\", \"\");\r\n      c = c.replace(\")\", \"\");\r\n      arr = c.split(\",\");\r\n      if (typ == \"rgb\") {\r\n        if (arr.length != arrlength) {\r\n          return emptyObject();\r\n        }\r\n        for (i = 0; i < arrlength; i++) {\r\n          if (arr[i] == \"\" || arr[i] == \" \") {arr[i] = \"0\"; }\r\n          if (arr[i].indexOf(\"%\") > -1) {\r\n            arr[i] = arr[i].replace(\"%\", \"\");\r\n            arr[i] = Number(arr[i] / 100);\r\n            if (i < 3 ) {arr[i] = Math.round(arr[i] * 255);}\r\n          }\r\n          if (isNaN(arr[i])) {return emptyObject(); }\r\n          if (parseInt(arr[i]) > 255) {arr[i] = 255; }\r\n          if (i < 3) {arr[i] = parseInt(arr[i]);}\r\n          if (i == 3 && Number(arr[i]) > 1) {arr[i] = 1;}\r\n        }\r\n        rgb = {r : arr[0], g : arr[1], b : arr[2]};\r\n        if (opacity == true) {a = Number(arr[3]);}\r\n      }\r\n      if (typ == \"hsl\" || typ == \"hwb\" || typ == \"ncol\") {\r\n        while (arr.length < arrlength) {arr.push(\"0\"); }\r\n        if (typ == \"hsl\" || typ == \"hwb\") {\r\n          if (parseInt(arr[0]) >= 360) {arr[0] = 0; }\r\n        }\r\n        for (i = 1; i < arrlength; i++) {\r\n          if (arr[i].indexOf(\"%\") > -1) {\r\n            arr[i] = arr[i].replace(\"%\", \"\");\r\n            arr[i] = Number(arr[i]);\r\n            if (isNaN(arr[i])) {return emptyObject(); }\r\n            arr[i] = arr[i] / 100;\r\n          } else {\r\n            arr[i] = Number(arr[i]);\r\n          }\r\n          if (Number(arr[i]) > 1) {arr[i] = 1;}\r\n          if (Number(arr[i]) < 0) {arr[i] = 0;}\r\n        }\r\n        if (typ == \"hsl\") {rgb = hslToRgb(arr[0], arr[1], arr[2]); hue = Number(arr[0]); sat = Number(arr[1]);}\r\n        if (typ == \"hwb\") {rgb = hwbToRgb(arr[0], arr[1], arr[2]);}\r\n        if (typ == \"ncol\") {rgb = ncolToRgb(arr[0], arr[1], arr[2]);}\r\n        if (opacity == true) {a = Number(arr[3]);}\r\n      }\r\n      if (typ == \"cmyk\") {\r\n        while (arr.length < arrlength) {arr.push(\"0\"); }\r\n        for (i = 0; i < arrlength; i++) {\r\n          if (arr[i].indexOf(\"%\") > -1) {\r\n            arr[i] = arr[i].replace(\"%\", \"\");\r\n            arr[i] = Number(arr[i]);\r\n            if (isNaN(arr[i])) {return emptyObject(); }\r\n            arr[i] = arr[i] / 100;\r\n          } else {\r\n            arr[i] = Number(arr[i]);\r\n          }\r\n          if (Number(arr[i]) > 1) {arr[i] = 1;}\r\n          if (Number(arr[i]) < 0) {arr[i] = 0;}\r\n        }\r\n        rgb = cmykToRgb(arr[0], arr[1], arr[2], arr[3]);\r\n        if (opacity == true) {a = Number(arr[4]);}\r\n      }\r\n    } else if (c.substr(0, 3) == \"ncs\") {\r\n      rgb = ncsToRgb(c);\r\n    } else {\r\n      match = false;\r\n      colornames = getColorArr('names');\r\n      for (i = 0; i < colornames.length; i++) {\r\n        if (c.toLowerCase() == colornames[i].toLowerCase()) {\r\n          colorhexs = getColorArr('hexs');\r\n          match = true;\r\n          rgb = {\r\n            r : parseInt(colorhexs[i].substr(0,2), 16),\r\n            g : parseInt(colorhexs[i].substr(2,2), 16),\r\n            b : parseInt(colorhexs[i].substr(4,2), 16)\r\n          };\r\n          break;\r\n        }\r\n      }\r\n      if (match == false) {\r\n        c = c.replace(\"#\", \"\");\r\n        if (c.length == 3) {c = c.substr(0,1) + c.substr(0,1) + c.substr(1,1) + c.substr(1,1) + c.substr(2,1) + c.substr(2,1);}\r\n        for (i = 0; i < c.length; i++) {\r\n          if (!isHex(c.substr(i, 1))) {return emptyObject(); }\r\n        }\r\n        arr[0] = parseInt(c.substr(0,2), 16);\r\n        arr[1] = parseInt(c.substr(2,2), 16);\r\n        arr[2] = parseInt(c.substr(4,2), 16);\r\n        for (i = 0; i < 3; i++) {\r\n          if (isNaN(arr[i])) {return emptyObject(); }\r\n        }\r\n        rgb = {\r\n          r : arr[0],\r\n          g : arr[1],\r\n          b : arr[2]\r\n        };\r\n      }\r\n    }\r\n    return colorObject(rgb, a, hue, sat);\r\n  }\r\n  \r\n  function colorObject(rgb, a, h, s) {\r\n    var hsl, hwb, cmyk, ncol, color, hue, sat;\r\n    if (!rgb) {return emptyObject();}\r\n    if (a === null) {a = 1;}\r\n    hsl = rgbToHsl(rgb.r, rgb.g, rgb.b);\r\n    hwb = rgbToHwb(rgb.r, rgb.g, rgb.b);\r\n    cmyk = rgbToCmyk(rgb.r, rgb.g, rgb.b);\r\n    hue = (h || hsl.h);\r\n    sat = (s || hsl.s);   \r\n    ncol = hueToNcol(hue);\r\n    color = {\r\n      red : rgb.r,\r\n      green : rgb.g,\r\n      blue : rgb.b,\r\n      hue : hue,\r\n      sat : sat,\r\n      lightness : hsl.l,\r\n      whiteness : hwb.w,\r\n      blackness : hwb.b,\r\n      cyan : cmyk.c,\r\n      magenta : cmyk.m,\r\n      yellow : cmyk.y,\r\n      black : cmyk.k,\r\n      ncol : ncol,\r\n      opacity : a,\r\n      valid : true\r\n    };\r\n    color = roundDecimals(color);\r\n    return color;\r\n  }\r\n  function emptyObject() {\r\n    return {\r\n      red : 0,\r\n      green : 0,\r\n      blue : 0,\r\n      hue : 0,\r\n      sat : 0,\r\n      lightness : 0,\r\n      whiteness : 0,\r\n      blackness : 0,\r\n      cyan : 0,\r\n      magenta : 0,\r\n      yellow : 0,\r\n      black : 0,\r\n      ncol : \"R\",\r\n      opacity : 1,\r\n      valid : false\r\n    };\r\n  }\r\n  function getColorArr(x) {\r\n    if (x == \"names\") {return ['AliceBlue','AntiqueWhite','Aqua','Aquamarine','Azure','Beige','Bisque','Black','BlanchedAlmond','Blue','BlueViolet','Brown','BurlyWood','CadetBlue','Chartreuse','Chocolate','Coral','CornflowerBlue','Cornsilk','Crimson','Cyan','DarkBlue','DarkCyan','DarkGoldenRod','DarkGray','DarkGrey','DarkGreen','DarkKhaki','DarkMagenta','DarkOliveGreen','DarkOrange','DarkOrchid','DarkRed','DarkSalmon','DarkSeaGreen','DarkSlateBlue','DarkSlateGray','DarkSlateGrey','DarkTurquoise','DarkViolet','DeepPink','DeepSkyBlue','DimGray','DimGrey','DodgerBlue','FireBrick','FloralWhite','ForestGreen','Fuchsia','Gainsboro','GhostWhite','Gold','GoldenRod','Gray','Grey','Green','GreenYellow','HoneyDew','HotPink','IndianRed','Indigo','Ivory','Khaki','Lavender','LavenderBlush','LawnGreen','LemonChiffon','LightBlue','LightCoral','LightCyan','LightGoldenRodYellow','LightGray','LightGrey','LightGreen','LightPink','LightSalmon','LightSeaGreen','LightSkyBlue','LightSlateGray','LightSlateGrey','LightSteelBlue','LightYellow','Lime','LimeGreen','Linen','Magenta','Maroon','MediumAquaMarine','MediumBlue','MediumOrchid','MediumPurple','MediumSeaGreen','MediumSlateBlue','MediumSpringGreen','MediumTurquoise','MediumVioletRed','MidnightBlue','MintCream','MistyRose','Moccasin','NavajoWhite','Navy','OldLace','Olive','OliveDrab','Orange','OrangeRed','Orchid','PaleGoldenRod','PaleGreen','PaleTurquoise','PaleVioletRed','PapayaWhip','PeachPuff','Peru','Pink','Plum','PowderBlue','Purple','RebeccaPurple','Red','RosyBrown','RoyalBlue','SaddleBrown','Salmon','SandyBrown','SeaGreen','SeaShell','Sienna','Silver','SkyBlue','SlateBlue','SlateGray','SlateGrey','Snow','SpringGreen','SteelBlue','Tan','Teal','Thistle','Tomato','Turquoise','Violet','Wheat','White','WhiteSmoke','Yellow','YellowGreen']; }\r\n    if (x == \"hexs\") {return ['f0f8ff','faebd7','00ffff','7fffd4','f0ffff','f5f5dc','ffe4c4','000000','ffebcd','0000ff','8a2be2','a52a2a','deb887','5f9ea0','7fff00','d2691e','ff7f50','6495ed','fff8dc','dc143c','00ffff','00008b','008b8b','b8860b','a9a9a9','a9a9a9','006400','bdb76b','8b008b','556b2f','ff8c00','9932cc','8b0000','e9967a','8fbc8f','483d8b','2f4f4f','2f4f4f','00ced1','9400d3','ff1493','00bfff','696969','696969','1e90ff','b22222','fffaf0','228b22','ff00ff','dcdcdc','f8f8ff','ffd700','daa520','808080','808080','008000','adff2f','f0fff0','ff69b4','cd5c5c','4b0082','fffff0','f0e68c','e6e6fa','fff0f5','7cfc00','fffacd','add8e6','f08080','e0ffff','fafad2','d3d3d3','d3d3d3','90ee90','ffb6c1','ffa07a','20b2aa','87cefa','778899','778899','b0c4de','ffffe0','00ff00','32cd32','faf0e6','ff00ff','800000','66cdaa','0000cd','ba55d3','9370db','3cb371','7b68ee','00fa9a','48d1cc','c71585','191970','f5fffa','ffe4e1','ffe4b5','ffdead','000080','fdf5e6','808000','6b8e23','ffa500','ff4500','da70d6','eee8aa','98fb98','afeeee','db7093','ffefd5','ffdab9','cd853f','ffc0cb','dda0dd','b0e0e6','800080','663399','ff0000','bc8f8f','4169e1','8b4513','fa8072','f4a460','2e8b57','fff5ee','a0522d','c0c0c0','87ceeb','6a5acd','708090','708090','fffafa','00ff7f','4682b4','d2b48c','008080','d8bfd8','ff6347','40e0d0','ee82ee','f5deb3','ffffff','f5f5f5','ffff00','9acd32']; }\r\n  }\r\n  function roundDecimals(c) {\r\n    c.red = Number(c.red.toFixed(0));\r\n    c.green = Number(c.green.toFixed(0));\r\n    c.blue = Number(c.blue.toFixed(0));\r\n    c.hue = Number(c.hue.toFixed(0));\r\n    c.sat = Number(c.sat.toFixed(2));\r\n    c.lightness = Number(c.lightness.toFixed(2));\r\n    c.whiteness = Number(c.whiteness.toFixed(2));\r\n    c.blackness = Number(c.blackness.toFixed(2));\r\n    c.cyan = Number(c.cyan.toFixed(2));  \r\n    c.magenta = Number(c.magenta.toFixed(2));\r\n    c.yellow = Number(c.yellow.toFixed(2));\r\n    c.black = Number(c.black.toFixed(2));\r\n    c.ncol = c.ncol.substr(0, 1) + Math.round(Number(c.ncol.substr(1)));\r\n    c.opacity = Number(c.opacity.toFixed(2));\r\n    return c;\r\n  }\r\n  function hslToRgb(hue, sat, light) {\r\n    var t1, t2, r, g, b;\r\n    hue = hue / 60;\r\n    if ( light <= 0.5 ) {\r\n      t2 = light * (sat + 1);\r\n    } else {\r\n      t2 = light + sat - (light * sat);\r\n    }\r\n    t1 = light * 2 - t2;\r\n    r = hueToRgb(t1, t2, hue + 2) * 255;\r\n    g = hueToRgb(t1, t2, hue) * 255;\r\n    b = hueToRgb(t1, t2, hue - 2) * 255;\r\n    return {r : r, g : g, b : b};\r\n  }\r\n  function hueToRgb(t1, t2, hue) {\r\n    if (hue < 0) hue += 6;\r\n    if (hue >= 6) hue -= 6;\r\n    if (hue < 1) return (t2 - t1) * hue + t1;\r\n    else if(hue < 3) return t2;\r\n    else if(hue < 4) return (t2 - t1) * (4 - hue) + t1;\r\n    else return t1;\r\n  }\r\n  function hwbToRgb(hue, white, black) {\r\n    var i, rgb, rgbArr = [], tot;\r\n    rgb = hslToRgb(hue, 1, 0.50);\r\n    rgbArr[0] = rgb.r / 255;\r\n    rgbArr[1] = rgb.g / 255;\r\n    rgbArr[2] = rgb.b / 255;\r\n    tot = white + black;\r\n    if (tot > 1) {\r\n      white = Number((white / tot).toFixed(2));\r\n      black = Number((black / tot).toFixed(2));\r\n    }\r\n    for (i = 0; i < 3; i++) {\r\n      rgbArr[i] *= (1 - (white) - (black));\r\n      rgbArr[i] += (white);\r\n      rgbArr[i] = Number(rgbArr[i] * 255);\r\n    }\r\n    return {r : rgbArr[0], g : rgbArr[1], b : rgbArr[2] };\r\n  }\r\n  function cmykToRgb(c, m, y, k) {\r\n    var r, g, b;\r\n    r = 255 - ((Math.min(1, c * (1 - k) + k)) * 255);\r\n    g = 255 - ((Math.min(1, m * (1 - k) + k)) * 255);\r\n    b = 255 - ((Math.min(1, y * (1 - k) + k)) * 255);\r\n    return {r : r, g : g, b : b};\r\n  }\r\n  function ncolToRgb(ncol, white, black) {\r\n    var letter, percent, h, w, b;\r\n    h = ncol;\r\n    if (isNaN(ncol.substr(0,1))) {\r\n      letter = ncol.substr(0,1).toUpperCase();\r\n      percent = ncol.substr(1);\r\n      if (percent == \"\") {percent = 0;}\r\n      percent = Number(percent);\r\n      if (isNaN(percent)) {return false;}\r\n      if (letter == \"R\") {h = 0 + (percent * 0.6);}\r\n      if (letter == \"Y\") {h = 60 + (percent * 0.6);}\r\n      if (letter == \"G\") {h = 120 + (percent * 0.6);}\r\n      if (letter == \"C\") {h = 180 + (percent * 0.6);}\r\n      if (letter == \"B\") {h = 240 + (percent * 0.6);}\r\n      if (letter == \"M\") {h = 300 + (percent * 0.6);}\r\n      if (letter == \"W\") {\r\n        h = 0;\r\n        white = 1 - (percent / 100);\r\n        black = (percent / 100);\r\n      }\r\n    }\r\n    return hwbToRgb(h, white, black);\r\n  }\r\n  function hueToNcol(hue) {\r\n    while (hue >= 360) {\r\n      hue = hue - 360;\r\n    }\r\n    if (hue < 60) {return \"R\" + (hue / 0.6); }\r\n    if (hue < 120) {return \"Y\" + ((hue - 60) / 0.6); }\r\n    if (hue < 180) {return \"G\" + ((hue - 120) / 0.6); }\r\n    if (hue < 240) {return \"C\" + ((hue - 180) / 0.6); }\r\n    if (hue < 300) {return \"B\" + ((hue - 240) / 0.6); }\r\n    if (hue < 360) {return \"M\" + ((hue - 300) / 0.6); }\r\n  }\r\n  function ncsToRgb(ncs){\r\n    var black, chroma, bc, percent, black1, chroma1, red1, factor1, blue1, red1, red2, green2, blue2, max, factor2, grey, r, g, b; \r\n    ncs = ncs.trim().toUpperCase();\r\n    ncs = ncs.replace(\"(\", \"\");\r\n    ncs = ncs.replace(\")\", \"\");\r\n    ncs = ncs.replace(\"NCS\", \"NCS \");\r\n    ncs = ncs.replace(/  /g, \" \");  \r\n    if (ncs.indexOf(\"NCS\") == -1) {ncs = \"NCS \" + ncs;}\r\n    ncs = ncs.match(/^(?:NCS|NCS\\sS)\\s(\\d{2})(\\d{2})-(N|[A-Z])(\\d{2})?([A-Z])?$/);\r\n    if (ncs === null) return false;\r\n    black = parseInt(ncs[1], 10);\r\n    chroma = parseInt(ncs[2], 10);\r\n    bc = ncs[3];\r\n    if (bc != \"N\" && bc != \"Y\" && bc != \"R\" && bc != \"B\" && bc != \"G\") {return false;}\r\n    percent = parseInt(ncs[4], 10) || 0;\r\n    if (bc !== 'N') {\r\n      black1 = (1.05 * black - 5.25);\r\n      chroma1 = chroma;\r\n      if (bc === 'Y' && percent <= 60) {\r\n        red1 = 1;\r\n      } else if (( bc === 'Y' && percent > 60) || ( bc === 'R' && percent <= 80)) {\r\n        if (bc === 'Y') {\r\n          factor1 = percent - 60;\r\n        } else {\r\n          factor1 = percent + 40;\r\n        }\r\n        red1 = ((Math.sqrt(14884 - Math.pow(factor1, 2))) - 22) / 100;\r\n      } else if ((bc === 'R' && percent > 80) || (bc === 'B')) {\r\n        red1 = 0;\r\n      } else if (bc === 'G') {\r\n        factor1 = (percent - 170);\r\n        red1 = ((Math.sqrt(33800 - Math.pow(factor1, 2))) - 70) / 100;\r\n      }\r\n      if (bc === 'Y' && percent <= 80) {\r\n        blue1 = 0;\r\n      } else if (( bc === 'Y' && percent > 80) || ( bc === 'R' && percent <= 60)) {\r\n        if (bc ==='Y') {\r\n          factor1 = (percent - 80) + 20.5;\r\n        } else {\r\n          factor1 = (percent + 20) + 20.5;\r\n        }\r\n        blue1 = (104 - (Math.sqrt(11236 - Math.pow(factor1, 2)))) / 100;\r\n      } else if ((bc === 'R' && percent > 60) || ( bc === 'B' && percent <= 80)) {\r\n        if (bc ==='R') {\r\n          factor1 = (percent - 60) - 60;\r\n        } else {\r\n          factor1 = (percent + 40) - 60;\r\n        }\r\n        blue1 = ((Math.sqrt(10000 - Math.pow(factor1, 2))) - 10) / 100;\r\n      } else if (( bc === 'B' && percent > 80) || ( bc === 'G' && percent <= 40)) {\r\n        if (bc === 'B') {\r\n          factor1 = (percent - 80) - 131;\r\n        } else {\r\n          factor1 = (percent + 20) - 131;\r\n        }\r\n        blue1 = (122 - (Math.sqrt(19881 - Math.pow(factor1, 2)))) / 100;\r\n      } else if (bc === 'G' && percent > 40) {\r\n        blue1 = 0;\r\n      }\r\n      let green1;\r\n      if (bc === 'Y') {\r\n        green1 = (85 - 17/20 * percent) / 100;\r\n      } else if (bc === 'R' && percent <= 60) {\r\n        green1 = 0;\r\n      } else if (bc === 'R' && percent > 60) {\r\n        factor1 = (percent - 60) + 35;\r\n        green1 = (67.5 - (Math.sqrt(5776 - Math.pow(factor1, 2)))) / 100;\r\n      } else if (bc === 'B' && percent <= 60) {\r\n        factor1 = (1*percent - 68.5);\r\n        green1 = (6.5 + (Math.sqrt(7044.5 - Math.pow(factor1, 2)))) / 100;\r\n      } else if ((bc === 'B' && percent > 60) || ( bc === 'G' && percent <= 60)) {\r\n        green1 = 0.9;\r\n      } else if (bc === 'G' && percent > 60) {\r\n        factor1 = (percent - 60);\r\n        green1 = (90 - (1/8 * factor1)) / 100;\r\n      }\r\n      factor1 = (red1 + green1 + blue1)/3;\r\n      red2 = ((factor1 - red1) * (100 - chroma1) / 100) + red1;\r\n      green2 = ((factor1 - green1) * (100 - chroma1) / 100) + green1;\r\n      blue2 = ((factor1 - blue1) * (100 - chroma1) / 100) + blue1;\r\n      if (red2 > green2 && red2 > blue2) {\r\n        max = red2;\r\n      } else if (green2 > red2 && green2 > blue2) {\r\n        max = green2;\r\n      } else if (blue2 > red2 && blue2 > green2) {\r\n        max = blue2;\r\n      } else {\r\n        max = (red2 + green2 + blue2) / 3;\r\n      }\r\n      factor2 = 1 / max;\r\n      r = parseInt((red2 * factor2 * (100 - black1) / 100) * 255, 10);\r\n      g = parseInt((green2 * factor2 * (100 - black1) / 100) * 255, 10);\r\n      b = parseInt((blue2 * factor2 * (100 - black1) / 100) * 255, 10);\r\n      if (r > 255) {r = 255;}\r\n      if (g > 255) {g = 255;}\r\n      if (b > 255) {b = 255;}\r\n      if (r < 0) {r = 0;}\r\n      if (g < 0) {g = 0;}\r\n      if (b < 0) {b = 0;}\r\n    } else {\r\n      grey = parseInt((1 - black / 100) * 255, 10);\r\n      if (grey > 255) {grey = 255;}\r\n      if (grey < 0) {grey = 0;}\r\n      r = grey;\r\n      g = grey;\r\n      b = grey;\r\n    }\r\n    return {\r\n      r : r,\r\n      g : g,\r\n      b : b\r\n    };\r\n  }\r\n  function rgbToHsl(r, g, b) {\r\n    var min, max, i, l, s, maxcolor, h, rgb = [];\r\n    rgb[0] = r / 255;\r\n    rgb[1] = g / 255;\r\n    rgb[2] = b / 255;\r\n    min = rgb[0];\r\n    max = rgb[0];\r\n    maxcolor = 0;\r\n    for (i = 0; i < rgb.length - 1; i++) {\r\n      if (rgb[i + 1] <= min) {min = rgb[i + 1];}\r\n      if (rgb[i + 1] >= max) {max = rgb[i + 1];maxcolor = i + 1;}\r\n    }\r\n    if (maxcolor == 0) {\r\n      h = (rgb[1] - rgb[2]) / (max - min);\r\n    }\r\n    if (maxcolor == 1) {\r\n      h = 2 + (rgb[2] - rgb[0]) / (max - min);\r\n    }\r\n    if (maxcolor == 2) {\r\n      h = 4 + (rgb[0] - rgb[1]) / (max - min);\r\n    }\r\n    if (isNaN(h)) {h = 0;}\r\n    h = h * 60;\r\n    if (h < 0) {h = h + 360; }\r\n    l = (min + max) / 2;\r\n    if (min == max) {\r\n      s = 0;\r\n    } else {\r\n      if (l < 0.5) {\r\n        s = (max - min) / (max + min);\r\n      } else {\r\n        s = (max - min) / (2 - max - min);\r\n      }\r\n    }\r\n    s = s;\r\n    return {h : h, s : s, l : l};\r\n  }\r\n  function rgbToHwb(r, g, b) {\r\n    var h, w, bl;\r\n    r = r / 255;\r\n    g = g / 255;\r\n    b = b / 255;\r\n    let max = Math.max(r, g, b);\r\n    let min = Math.min(r, g, b);\r\n    let chroma = max - min;\r\n    if (chroma == 0) {\r\n      h = 0;\r\n    } else if (r == max) {\r\n      h = (((g - b) / chroma) % 6) * 360;\r\n    } else if (g == max) {\r\n      h = ((((b - r) / chroma) + 2) % 6) * 360;\r\n    } else {\r\n      h = ((((r - g) / chroma) + 4) % 6) * 360;\r\n    }\r\n    w = min;\r\n    bl = 1 - max;\r\n    return {h : h, w : w, b : bl};\r\n  }\r\n  function rgbToCmyk(r, g, b) {\r\n    var c, m, y, k;\r\n    r = r / 255;\r\n    g = g / 255;\r\n    b = b / 255;\r\n    let max = Math.max(r, g, b);\r\n    k = 1 - max;\r\n    if (k == 1) {\r\n      c = 0;\r\n      m = 0;\r\n      y = 0;\r\n    } else {\r\n      c = (1 - r - k) / (1 - k);\r\n      m = (1 - g - k) / (1 - k);\r\n      y = (1 - b - k) / (1 - k);\r\n    }\r\n    return {c : c, m : m, y : y, k : k};\r\n  }\r\n  function toHex(n) {\r\n    return Math.round(n).toString(16).padStart(2, '0');\r\n  }\r\n  function isHex(x) {\r\n    return ('0123456789ABCDEFabcdef'.indexOf(x) > -1);\r\n  }\r\n  ","import { MidiEvent } from '../types';\r\nimport * as ui from '@reactiff/ui-core';\r\nimport { MIDIColorManagerState } from './midiManager';\r\nimport { ColorInputs, MIDIColor } from './types';\r\nimport W3Color from './w3color';\r\n\r\nexport const processMidiEvent = (e: MidiEvent, _state: MIDIColorManagerState) => {\r\n    \r\n    const getMParam = (paramArray: any[]|undefined, pIndex: number, defaultValue?: any) => {\r\n        if (!paramArray) return defaultValue;\r\n        if (pIndex >= paramArray.length) return defaultValue;\r\n        return paramArray[pIndex];\r\n    }\r\n\r\n    const createColor = () => {\r\n        const m = getModelSpec(e);\r\n        if (!m) return;\r\n\r\n        const ns = _state.model[m.name];\r\n        const pIndex = m.name.indexOf(e.name);\r\n        \r\n        if (pIndex >= m.factor.length) return undefined;\r\n\r\n        const v     = ns[pIndex];\r\n        const keyModifier = getKeyModifier(_state.keyState);\r\n        const d     = e.change * m.factor[pIndex] * keyModifier.factor;\r\n        const ndp   = getMParam(m.decimalPlaces, pIndex);\r\n        const v1    = roundTo(v + d, ndp + keyModifier.requiredDecimalPlaces);\r\n        const min   = getMParam(m.min, pIndex);\r\n        const max   = getMParam(m.max, pIndex);\r\n        const mod   = getMParam(m.mod, pIndex);\r\n        ns[pIndex]  = clamp(modulate(v1, mod), min, max);\r\n\r\n        _state.model.latest = m.name;\r\n\r\n        const inputString = getColorString(_state.model);\r\n        const color = getColor(_state.model, inputString);\r\n        updateModel(_state.model, color);\r\n\r\n        return color;\r\n    };\r\n\r\n    const newColor = createColor();\r\n\r\n    _state.updateColor(newColor);\r\n};\r\n\r\nfunction getModelSpec(e: any) {\r\n    switch(e.group) {\r\n        case 'rgba': return ({ name: 'rgba', factor: [1, 1, 1, 0.01], min: [0, 0, 0, 0], max: [255, 255, 255, 1], decimalPlaces: [0, 0, 0, 2] });\r\n        case 'cmyk': return ({ name: 'cmyk', factor: [0.01, 0.01, 0.01, 0.01], min: [0, 0, 0, 0], max: [1, 1, 1, 1], decimalPlaces: [2, 2, 2, 2] });\r\n        case 'hsla': return ({ name: 'hsl', factor: [1, 0.01, 0.01], min: [undefined, 0, 0], max: [undefined, 1, 1], mod: [360], decimalPlaces: [0, 2, 2] });\r\n        case 'hwba': return ({ name: 'hwb', factor: [1, 0.01, 0.01], min: [undefined, 0, 0], max: [undefined, 1, 1], mod: [360], decimalPlaces: [0, 2, 2] });\r\n        default: return null;\r\n    }\r\n }\r\n\r\n const getKeyModifier = (keyState: any) => {\r\n    // Alt key makes change smaller\r\n    if (keyState.altKey && keyState.ctrlKey) return { factor: 0.001, requiredDecimalPlaces: 3 };\r\n    if (keyState.altKey && keyState.shiftKey) return { factor: 0.01, requiredDecimalPlaces: 2 };\r\n    if (keyState.altKey) return { factor: 0.1, requiredDecimalPlaces: 1 };\r\n    // without alt key, change is bigger\r\n    if (keyState.ctrlKey && keyState.shiftKey) return { factor: 1000, requiredDecimalPlaces: 0 };\r\n    if (keyState.ctrlKey) return { factor: 100, requiredDecimalPlaces: 0 };\r\n    if (keyState.shiftKey) return { factor: 10, requiredDecimalPlaces: 0 };\r\n    return { factor: 1, requiredDecimalPlaces: 0 };\r\n}\r\n\r\nconst updateModel = (model: any, color: MIDIColor) => {\r\n    const keys = Object.keys(model).filter(k => k !== model.latest && k !== 'latest');\r\n    keys.forEach(key => {\r\n        switch(key) {\r\n            case 'rgba': return updateRgbaModel(model, color.toRgb());\r\n            case 'cmyk': return updateCmykModel(model, color.toCmyk());\r\n            case 'hsla': return updateHslModel(model, color.toHsl());\r\n            case 'hwba': return updateHwbModel(model, color.toHwb());\r\n        }\r\n    });\r\n}\r\n\r\nfunction roundTo(value: number, decimalPlaces?: number) {\r\n    if (isNullOrUndefined(decimalPlaces)) return value;\r\n    const nn = Math.pow(10, decimalPlaces!);\r\n    return Math.round((value + Number.EPSILON) * nn) / nn;\r\n}\r\n\r\n\r\nfunction isNullOrUndefined(value: any) {\r\n    return value === undefined || value === null;\r\n}\r\n\r\nfunction modulate(value: number, mod?: number) {\r\n    if (!mod) return value;\r\n    return value % mod;\r\n}\r\n\r\nfunction clamp(value: number, min?: number, max?: number) {\r\n    const minVal = isNullOrUndefined(min) ? Number.NEGATIVE_INFINITY : min!;\r\n    const maxVal = isNullOrUndefined(max) ? Number.POSITIVE_INFINITY : max!;\r\n    const mx = Math.max(minVal, value);\r\n    const mn = Math.min(maxVal, mx);\r\n    return mn;\r\n}\r\n\r\nconst pct = (value: number) => {\r\n    return `${roundTo(value * 100, 2)}%`;\r\n}\r\n\r\nconst int = (value: number) => {\r\n    return `${Math.round(value)}`;\r\n}\r\n\r\nconst getColorString = (state: ColorInputs) => {\r\n    const ns = state[state.latest];\r\n    if (!ns) return '';\r\n    switch(state.latest) {\r\n        case 'hwba': return `hwb(${int(ns[0])}, ${pct(ns[1])}, ${pct(ns[2])})`;\r\n        case 'hsla': return `hsl(${int(ns[0])}, ${pct(ns[1])}, ${pct(ns[2])})`;\r\n        case 'cmyk': return `cmyk(${pct(ns[0])}, ${pct(ns[1])}, ${pct(ns[2])}, ${pct(ns[3])})`;\r\n        default: return `rgba(${int(ns[0])}, ${int(ns[1])}, ${int(ns[2])}, ${ns[3]})`;\r\n    }\r\n};\r\n\r\nconst getColor = (state: ColorInputs, inputString: string) => {\r\n    const colorFromString = new W3Color(inputString);\r\n    if (state.latest === 'rgba' || state.rgba[3] === 1) return colorFromString;\r\n    const colorWithAlpha = colorFromString.toRgb();\r\n    colorWithAlpha.a = state.rgba[3];\r\n    return new W3Color(colorWithAlpha);\r\n};\r\n\r\nconst updateRgbaModel = (state: ColorInputs, color: any) => {\r\n    state.rgba[0] = color.r;\r\n    state.rgba[1] = color.g;\r\n    state.rgba[2] = color.b;\r\n    state.rgba[3] = color.a;\r\n}\r\nconst updateCmykModel = (state: ColorInputs, color: any) => {\r\n    state.cmyk[0] = color.c;\r\n    state.cmyk[1] = color.m;\r\n    state.cmyk[2] = color.y;\r\n    state.cmyk[3] = color.k;\r\n}\r\nconst updateHslModel = (state: ColorInputs, color: any) => {\r\n    state.hsla[0] = color.h;\r\n    state.hsla[1] = color.s;\r\n    state.hsla[2] = color.l;\r\n}\r\nconst updateHwbModel = (state: ColorInputs, color: any) => {\r\n    state.hwba[0] = color.h;\r\n    state.hwba[1] = color.w;\r\n    state.hwba[2] = color.b;\r\n}\r\n","import { MIDIColor } from './types';\r\nimport Throttle from './Throttle';\r\nimport { processMidiEvent } from './processMidiEvent';\r\nimport { MidiEventTargetConfiguration, MidiEvent } from '../types';\r\n\r\nexport type MIDIColorManagerState = {\r\n    selectedColor: { key: string, value?: MIDIColor },\r\n    model: { \r\n        rgba: [number, number, number, number],\r\n        cmyk: [number, number, number, number],\r\n        hsla: [number, number, number],\r\n        hwba: [number, number, number],\r\n        latest: string,\r\n    },\r\n    keyState: {\r\n        shiftKey: boolean,\r\n        ctrlKey: boolean,\r\n        altKey: boolean\r\n    },\r\n    updateColor: (color: MIDIColor) => void,\r\n    config: MidiEventTargetConfiguration,\r\n};\r\n\r\ntype MIDIColorManagerScope = { \r\n    config: MidiEventTargetConfiguration,  \r\n    updateColor: (key: string, value: MIDIColor) => void; \r\n}\r\n\r\nexport const createMIDIColorManager = (scope: MIDIColorManagerScope) => {\r\n    const state = createState(scope);\r\n    const midiTarget = createMidiTarget(state);\r\n    const keyboardHandler = createKeyboardHandler(state);\r\n   \r\n    return {\r\n        selectColor(key: string, value: MIDIColor) {\r\n            state.selectedColor.key = key;\r\n            state.selectedColor.value = value;\r\n        },\r\n        register(midiContext: any) {\r\n            midiContext.register(midiTarget)\r\n            document.addEventListener('keydown', keyboardHandler, false);\r\n            document.addEventListener('keyup', keyboardHandler, false);\r\n        },\r\n        unregister(midiContext: any) {\r\n            midiContext.unregister(midiTarget);\r\n            document.removeEventListener('keydown', keyboardHandler, false);\r\n            document.removeEventListener('keyup', keyboardHandler, false);\r\n        }\r\n    };\r\n};\r\n\r\n\r\nfunction createState(scope: MIDIColorManagerScope) {\r\n    const state: MIDIColorManagerState = {\r\n        selectedColor: {\r\n            key: '',\r\n            value: null,\r\n        },\r\n        model: {\r\n            rgba: [0, 0, 0, 1],\r\n            cmyk: [0, 0, 0, 0],\r\n            hsla: [0, 0, 0],\r\n            hwba: [0, 0, 0],\r\n            latest: '',\r\n        },\r\n        keyState: {\r\n            shiftKey: false,\r\n            ctrlKey: false,\r\n            altKey: false\r\n        },\r\n        updateColor: (color: any) => {\r\n            state.selectedColor.value = color;\r\n            scope.updateColor(state.selectedColor.key, color)\r\n        },\r\n        config: scope.config,\r\n    };\r\n    return state;\r\n}\r\n\r\n\r\nfunction createMidiTarget(state: MIDIColorManagerState) {\r\n    \r\n    const onTouchStart      = (e: MidiEvent) => {  };\r\n    const onAfterTouch      = (e: MidiEvent) => {  };\r\n    const onTouchEnd        = (e: MidiEvent) => {  };\r\n    \r\n    const target = {\r\n        throttle: new Throttle(),\r\n        id: 'MIDIColorManager',\r\n        config: state.config,\r\n        onParameterChange: (e: any) => {\r\n            \r\n            target.throttle.invokeWithAnimationFrame(\r\n                processMidiEvent, \r\n                e, \r\n                state\r\n            )\r\n        },\r\n        onTouchStart,   \r\n        onTouchEnd,   \r\n        onAfterTouch,   \r\n    }\r\n    return target;\r\n}\r\n\r\nfunction createKeyboardHandler(state: MIDIColorManagerState) {\r\n    return (e: any) => { \r\n        e.stopPropagation();\r\n        state.keyState.shiftKey = e.shiftKey;\r\n        state.keyState.altKey = e.altKey;\r\n        state.keyState.ctrlKey = e.ctrlKey;\r\n        return false;\r\n    };\r\n}\r\n    ","import { MidiEventTargetConfiguration } from \"../types\";\r\n\r\nexport const midiColorLayoutConfig: MidiEventTargetConfiguration = {\r\n    layout: \"horizontal\",\r\n\r\n    rows: [\r\n        [\r\n            { type: 'selector', name: 'h', group: 'hsla' },\r\n            { type: 'selector', name: 's', group: 'hsla' },\r\n            { type: 'selector', name: 'l', group: 'hsla' },\r\n            { type: 'selector', name: 'a', group: 'hsla' },\r\n\r\n            { type: 'selector', name: 'r', group: 'rgba' },\r\n            { type: 'selector', name: 'g', group: 'rgba' },\r\n            { type: 'selector', name: 'b', group: 'rgba' },\r\n            { type: 'selector', name: 'a', group: 'rgba' },\r\n        ], \r\n        [\r\n            { type: 'selector', name: 'h', group: 'hwba' },\r\n            { type: 'selector', name: 'w', group: 'hwba' },\r\n            { type: 'selector', name: 'b', group: 'hwba' },\r\n            { type: 'selector', name: 'a', group: 'hwba' },\r\n\r\n            { type: 'selector', name: 'c', group: 'cmyk' },\r\n            { type: 'selector', name: 'm', group: 'cmyk' },\r\n            { type: 'selector', name: 'y', group: 'cmyk' },\r\n            { type: 'selector', name: 'k', group: 'cmyk' },\r\n            \r\n        ],\r\n\r\n        [\r\n            { type: 'pad', name: undefined, channel: 1, number: 1 },\r\n            { type: 'pad', name: undefined, channel: 2, number: 2 },\r\n            { type: 'pad', name: undefined, channel: 3, number: 3 },\r\n            { type: 'pad', name: undefined, channel: 4, number: 4  },\r\n\r\n            { type: 'pad', name: undefined, channel: 5, number: 5  },\r\n            { type: 'pad', name: undefined, channel: 6, number: 6  },\r\n            { type: 'pad', name: undefined, channel: 7, number: 7  },\r\n            { type: 'pad', name: undefined, channel: 8, number: 8  },\r\n        ], \r\n        [\r\n            { type: 'pad', name: undefined, channel: 1, number: 9  },\r\n            { type: 'pad', name: undefined, channel: 2, number: 10  },\r\n            { type: 'pad', name: undefined, channel: 3, number: 11  },\r\n            { type: 'pad', name: undefined, channel: 4, number: 12  },\r\n\r\n            { type: 'pad', name: undefined, channel: 5, number: 13  },\r\n            { type: 'pad', name: undefined, channel: 6, number: 14  },\r\n            { type: 'pad', name: undefined, channel: 7, number: 15  },\r\n            { type: 'pad', name: undefined, channel: 8, number: 16  },\r\n        ], \r\n        \r\n    ],\r\n\r\n    revision: 1,\r\n};","import React from 'react'\r\nimport * as ui from '@reactiff/ui-core';\r\nimport { MIDIColorPalette } from './types';\r\nimport W3Color from './w3color';\r\n\r\nconst ColorTable = (props: { palette: MIDIColorPalette, onSelect?: Function }) => {\r\n    \r\n    const { palette, onSelect } = props;\r\n\r\n\r\n    const keys = Object.keys(palette);\r\n    const handleSelect = (key: string) => {\r\n        \r\n        onSelect && onSelect(key)\r\n    }\r\n    return <ui.col marginTop={10}>\r\n        {keys.map(k => {\r\n            return <ColorSwatch key={k} color={palette[k]} onClick={() => handleSelect(k)} />\r\n        })}\r\n    </ui.col>\r\n}\r\n\r\nexport default ColorTable;\r\n\r\nconst ColorSwatch = (props: any) => {\r\n\r\n    const { color } = props;\r\n\r\n    const displayName = color instanceof W3Color ? color.toHexString() : color;\r\n\r\n    const style = {\r\n        height: '10vw',\r\n        backgroundColor: color instanceof W3Color ? color.toHexString() : color,\r\n    };\r\n\r\n    return <ui.row css={style} onClick={() => {\r\n        props.onClick && props.onClick()\r\n    }}>\r\n        { displayName }\r\n    </ui.row>\r\n}","import React, { useEffect, useState, ReactNode, useRef, useCallback } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { makeStyles, Theme, createStyles } from '@material-ui/core/styles';\r\nimport { IconButton } from '@material-ui/core';\r\n\r\nconst ls = globalThis.localStorage;\r\n\r\nexport interface IDetachableContext { detached: boolean, role: 'self' | 'surrogate' };\r\nconst initialValue: IDetachableContext = { detached: false, role: \"self\" };\r\nexport const DetachableContext = React.createContext(initialValue);\r\n\r\nconst useInline = makeStyles((theme: Theme) => createStyles({ root: (props: any) => props }) );\r\nconst lexicon: any = {\r\n    'attached': { actionWord: 'Detach', actionDescription: 'Open in new window' },\r\n    'detached': { actionWord: 'Reattach', actionDescription: 'Reattach window' },\r\n};\r\n\r\nconst stateToString = (state: boolean) => state ? 'detached' : 'attached' ;\r\n\r\nconst DetachHtmlIcon = (props: { detached: boolean, size?: number }) => {\r\n    const size = props.size || 22;\r\n    const classes = useInline({\r\n        transform: props.detached ? 'rotate(90deg)' : 'rotate(-90deg)', \r\n        width: size, \r\n        height: size\r\n    });\r\n    return <div className={`detach-html-icon ${classes.root}`}>&#8690;</div>\r\n}\r\n\r\ntype DetachToggleButtonProps = { state: boolean, size?: number, onToggle?: (detach: boolean) => void };\r\nexport const DetachToggleButton = (props: DetachToggleButtonProps) => {\r\n    const size = props.size || 22;\r\n    const detached = props.state;\r\n    const stateString = stateToString(detached);\r\n    const classes = useInline({ position: 'absolute', bottom: -22, right: 0, \"& .MuiIconButton-root\": {padding: 0} });\r\n    const handleTrigger = useCallback((detach: boolean) => {\r\n        props.onToggle && props.onToggle(detach)\r\n    }, []);\r\n    return <div className={classes.root}>\r\n        <IconButton \r\n            size={size!<30?'small':'medium'}\r\n            aria-label={lexicon[stateString].actionWord}  \r\n            title={lexicon[stateString].actionDescription}\r\n            onClick={() => handleTrigger(!props.state)}\r\n        >\r\n            <DetachHtmlIcon {...{detached, size}}/>\r\n        </IconButton>\r\n    </div>\r\n}\r\n\r\nexport type DetachableState = 'detached' | 'attached';\r\n\r\nexport type DetachableProps = { \r\n    id?: string;\r\n    initialState?: DetachableState;\r\n    title?: string;\r\n    menubar?: boolean;\r\n    location?: boolean;\r\n    resizable?: boolean;\r\n    scrollbars?: boolean;\r\n    status?: boolean;\r\n    width?: number;\r\n    height?: number; \r\n    screenX?: number;\r\n    screenY?: number;\r\n    children: ReactNode;\r\n    className?: string;\r\n    hideOriginal?: boolean;\r\n    onWindowLoad?: (w: Window) => void;\r\n};\r\n\r\nconst Detachable = (props: DetachableProps) => {\r\n\r\n    const {id, children, width, height, hideOriginal, initialState, ...other} = props;\r\n    const idString = !!id ? 'detachable-' + id : null;\r\n\r\n    // component state\r\n    const [state, setState] = useState<DetachableState>(() => {\r\n        const defaultValue = initialState || 'attached';\r\n        if (!idString) return 'attached';\r\n        const stored = ls && ls.getItem(idString!);\r\n        return stored === 'detached' ? 'detached' : 'attached';\r\n    });\r\n    const saveState = (state: DetachableState) => { \r\n        idString && ls.setItem(idString!, state);\r\n        setState(state);\r\n    }; \r\n\r\n    // child window\r\n    const detached = state === 'detached';\r\n    const [windowProps, setWindowProps] = useState<any>();\r\n    const [childWindow, setChildWindow] = useState<Window>();\r\n\r\n    const destroyChildWindow = useCallback(() => {\r\n        childWindow && childWindow!.close();\r\n    }, [childWindow]);\r\n\r\n    useEffect(() => {\r\n        window.addEventListener('unload', destroyChildWindow);\r\n        return () => window.removeEventListener('unload', destroyChildWindow);\r\n    }, [destroyChildWindow])\r\n\r\n    useEffect(() => {\r\n        if (detached) {\r\n            let wprops: any = null;\r\n            if (idString) {\r\n                const savedState = ls.getItem(idString + '.windowState');\r\n                if (savedState) {\r\n                    let json;\r\n                    try { \r\n                        json = JSON.parse(savedState); \r\n                        wprops = json;\r\n                    } catch {}\r\n                }\r\n            }\r\n            setWindowProps(wprops || {\r\n                width: width || window.screen.width / 3,\r\n                height: height || window.screen.height / 3,\r\n            });\r\n            return () => {\r\n                destroyChildWindow();\r\n            };\r\n        }\r\n        return undefined;\r\n    }, [detached, destroyChildWindow])\r\n\r\n    const handleTrigger = useCallback((detach: boolean) => {\r\n        const newState = detach ? 'detached' : 'attached';\r\n        saveState(newState);\r\n        if (newState === 'attached') {\r\n            destroyChildWindow();\r\n        }\r\n    }, [state]);\r\n\r\n    const handleWindowLoad = useCallback((window: Window) => {\r\n        setChildWindow(window);\r\n        if (props.onWindowLoad) {\r\n            props.onWindowLoad(window);\r\n        }\r\n    }, []);\r\n\r\n    const handleWindowUnload = useCallback(() => {\r\n        saveState('attached');\r\n        setWindowProps(null);\r\n    }, []);\r\n\r\n    const detachableStyle = useInline({\r\n        position: 'relative',\r\n    });\r\n    \r\n    const originalHidden = detached && props.hideOriginal;\r\n\r\n    return <React.Fragment>\r\n        {\r\n            // Render self (the original wrapped component)\r\n            // (will not render if originalHidden === true)\r\n\r\n            !originalHidden && \r\n            <div id={props.id} className={`detachable-container ${state} ${detachableStyle.root}`}>\r\n                <DetachableContext.Provider value={{ detached, role: \"self\" }}>\r\n                    { props.children }\r\n                </DetachableContext.Provider>\r\n                <DetachToggleButton onToggle={handleTrigger} state={detached} />\r\n            </div>\r\n        }\r\n        \r\n        {\r\n            // Render surrogate (detached copy)\r\n            detached &&\r\n            windowProps &&\r\n            <DetachableContext.Provider value={{ detached, role: \"surrogate\" }}>\r\n                <NewWindow idString={idString} {...other} {...windowProps} onUnload={handleWindowUnload} onLoad={handleWindowLoad}>\r\n                    {props.children}\r\n                </NewWindow>\r\n            </DetachableContext.Provider>\r\n        }\r\n    </React.Fragment>\r\n}\r\n\r\nexport default Detachable;\r\n\r\ntype NewWindowProps = {\r\n    idString?: string,\r\n    className?: string,\r\n    title?: string, \r\n    name?: string, \r\n    children?: ReactNode, \r\n    onLoad?: (window: Window) => void, \r\n    onUnload?: Function, \r\n    top?: number,\r\n    left?: number,\r\n    height?: number, \r\n    width?: number,\r\n    menubar?: boolean,\r\n    location?: boolean,\r\n    resizable?: boolean,\r\n    scrollbars?: boolean,\r\n    status?: boolean,\r\n};\r\n\r\nexport const NewWindow = (props: NewWindowProps) => {\r\n\r\n    const {idString, className, title, name, children, onLoad, onUnload, ...other} = props;\r\n    const [remoteContainer, setRemoteContainer] = useState<HTMLDivElement|undefined>();\r\n    const ref = useRef<{newWindow?: Window}>({}).current;\r\n\r\n    useEffect(() => {\r\n        const options = Object.entries(other).map(tuple => winOption(tuple)).join(', ');\r\n        ref.newWindow = window.open('', name || '', options)!;\r\n        \r\n        const createPortal = () => {\r\n            if (ref.newWindow) {\r\n                const remoteDiv = ref.newWindow.document.createElement('div');\r\n                ref.newWindow.document.body.appendChild(remoteDiv);\r\n                transferStyles(ref.newWindow.document, document)\r\n                transferScripts(ref.newWindow.document, document)\r\n                observeStyleMutations(ref.newWindow, document);\r\n                // observeScriptMutations(ref.newWindow, document);\r\n                setRemoteContainer(remoteDiv);\r\n            }\r\n        };\r\n\r\n        const awaitNewWindow = () => {\r\n            if (!ref.newWindow || ref.newWindow.document.readyState !== \"complete\") {\r\n                return window.requestAnimationFrame(awaitNewWindow);\r\n            }\r\n            ref.newWindow.addEventListener('unload', () => {\r\n                if (idString) {\r\n                    const wprops: any = {\r\n                        top: Math.round(ref.newWindow?.screenY!),\r\n                        left: Math.round(ref.newWindow?.screenX!),\r\n                        width: Math.round(ref.newWindow?.innerWidth!),\r\n                        height: Math.round(ref.newWindow?.innerHeight!),\r\n                    };\r\n                    localStorage.setItem(idString + '.windowState', JSON.stringify(wprops));\r\n                }\r\n                if (onUnload) {\r\n                    onUnload();\r\n                }\r\n            },);\r\n            // set properties\r\n            if (props.title) ref.newWindow.document.title = props.title;\r\n            createPortal();\r\n            props.onLoad && props.onLoad(ref.newWindow);\r\n            return undefined;\r\n        };\r\n\r\n        awaitNewWindow();\r\n    }, []);\r\n    if (!remoteContainer) return <div />;\r\n    return ReactDOM.createPortal(children, remoteContainer);\r\n}\r\n\r\n// dirty work\r\n\r\nfunction transferStyles(target: Document, source: Document) {\r\n  \r\n  const styles = Array.from(source.styleSheets);\r\n\r\n  const elementStyles = styles.filter(css => {\r\n    return Reflect.has(css, 'cssRules') && !css.href;\r\n  });\r\n  \r\n  const linkedStyles = styles.filter(css => \r\n    css.href && css.href.indexOf('google') < 0\r\n  );\r\n\r\n  // transfer inline style elements\r\n  const rules = elementStyles.reduce((rules: any[], el) => rules.concat(Array.from(el.cssRules)), []);\r\n  const tcss = target.createElement('style');\r\n  rules.forEach(r => tcss.appendChild(target.createTextNode(r.cssText)));\r\n  target.head.appendChild(tcss);\r\n  // transfer linked styles\r\n  linkedStyles.forEach(linkedStyle => {\r\n    const link: HTMLLinkElement = target.createElement('link');\r\n    link.rel = 'stylesheet';\r\n    link.href = linkedStyle.href!;\r\n    target.head.appendChild(link);\r\n  });\r\n}\r\n  \r\nfunction transferScripts(target: Document, source: Document) {\r\n    const scripts = Array.from(source.scripts);\r\n    scripts.forEach((script: HTMLScriptElement) => {\r\n        if (script.src.endsWith('main.chunk.js')) {\r\n            const scriptTag = target.createElement('script');\r\n            scriptTag.src = script.src;\r\n            target.body.appendChild(scriptTag);\r\n        }\r\n    });\r\n}\r\n\r\nfunction winOptionValue(value: any) {\r\n    if (typeof value !== 'boolean') return value;\r\n    return value === true ? 'yes' : 'no';\r\n}\r\n\r\nfunction winOption(tuple: any[]) {\r\n    const [key, value] = tuple;\r\n    return `${key}=${winOptionValue(value)}`;\r\n}\r\n  \r\nconst observeStyleMutations = (newWindow: any, document: Document) => {\r\n    const targetNode = document.head;\r\n    const config = { childList: true };\r\n    const callback = function(mutationsList: any[], observer: any) {\r\n        const target = newWindow.document;\r\n        mutationsList.forEach(mutation => {\r\n            (mutation.addedNodes as NodeList).forEach((style: any) => {\r\n                if (style.nodeName === 'STYLE') {\r\n                    if (style.sheet) {\r\n                        const rules = Array.from(style.sheet.cssRules);\r\n                        const newStyleElement = target.createElement('style');\r\n                        rules.forEach((rule: any) => newStyleElement.appendChild(target.createTextNode(rule.cssText)));\r\n                        target.head.appendChild(newStyleElement);\r\n                    }\r\n                }\r\n            })\r\n        })            \r\n    };\r\n    const observer = new MutationObserver(callback);\r\n    observer.observe(targetNode, config);\r\n}\r\n","// Color Design\r\nimport React, { useCallback, useContext, useEffect, useState, useMemo, ReactNode } from 'react'\r\nimport { createMIDIColorManager } from './midiManager';\r\nimport PropsTable from '../PropsTable';\r\nimport { MIDIColor, MIDIColorPalette } from './types.js';\r\nimport midiContext from '../midiContext';\r\nimport MidiIndicator from '../MidiIndicator';\r\nimport { midiColorLayoutConfig as config } from './midiColorLayoutConfig';\r\nimport ColorTable from './ColorTable';\r\n\r\nimport Detachable, { DetachableContext }  from '../detachable';\r\nimport * as ui from '@reactiff/ui-core';\r\n\r\ntype PaletteChangeHandler = (newPalette: MIDIColorPalette) => void;\r\ntype Props = { \r\n    id?: string,\r\n    title?: string,\r\n    palette: MIDIColorPalette, \r\n    preview?: ReactNode, \r\n    onChange: PaletteChangeHandler, \r\n    detachable?: boolean; \r\n    _render?: boolean;\r\n};\r\n\r\nconst ColorPaletteEditor = (props: Props) => {\r\n\r\n    const { id, title, preview, onChange, detachable, _render } = props;\r\n\r\n    const midi = useContext(midiContext);\r\n    const dcx = useContext(DetachableContext);\r\n    if (detachable && !_render) {\r\n        return (\r\n        <Detachable title={title || 'Color Palette Editor'} id={id}>\r\n            <ui.div padding={12}>\r\n                <ColorPaletteEditor {...props} _render />\r\n            </ui.div>\r\n        </Detachable>\r\n        );\r\n    }\r\n\r\n    \r\n    // If detachable, only render when detached and running in new window\r\n    // dcx.role === 'surrogate' can be checked for that\r\n    const detached = dcx.role === \"surrogate\";\r\n    if  (detachable && !detached) return <ui.div inlineBlock>{title}</ui.div>; \r\n\r\n\r\n    // HM, THIS DID NOT FAIL\r\n    const [palette, setPalette] = useState<MIDIColorPalette>(() => props.palette);\r\n    const [colorKey, setColorKey] = useState<string>(() => Object.keys(palette)[0]);\r\n\r\n    useEffect(() => {\r\n        midiManager.register(midi);\r\n        return () => midiManager.unregister(midi);\r\n    }, []);\r\n\r\n    const updateColor = useCallback((key: string, value: MIDIColor) => {\r\n        setPalette(colors => ({ ...colors, [key]: value }))\r\n    }, []);\r\n    \r\n    const midiManager = useMemo(() => createMIDIColorManager({ updateColor, config: config }), []);\r\n    \r\n    const handleSelectColor = (key: string) => {\r\n        midiManager.selectColor(colorKey, palette[colorKey]);\r\n        setColorKey(key);\r\n    }\r\n\r\n    return <React.Fragment>\r\n        <MidiIndicator />\r\n        <ColorTable palette={palette} onSelect={handleSelectColor}/>\r\n    </React.Fragment>\r\n}\r\n\r\nexport default ColorPaletteEditor;\r\n","import React, { useState } from 'react'\r\nimport * as ui from '@reactiff/ui-core'\r\nimport { MidiColorPaletteEditor } from '@reactiff/midi'\r\nimport { MidiProvider } from '@reactiff/midi'\r\n\r\nconst DetachablePaletteEditor = () => {\r\n\r\n  const [palette, setPalette] = useState<any>({\r\n    primaryColor: 'royalblue',\r\n    secondaryColor: 'pink',\r\n    danger: 'red',\r\n    background: '#eee',\r\n    text: '#333'\r\n  })\r\n\r\n  const handleChange = (p: any) => {\r\n    setPalette(p)\r\n  }\r\n\r\n  return (\r\n    <MidiProvider>\r\n      <ui.row>\r\n        <ui.col>\r\n          <DesignPreview palette={palette} />\r\n        </ui.col>\r\n        <ui.col>\r\n          <MidiColorPaletteEditor\r\n            id=\"demo-detachable-color-palette-editor-with-midi-fast-refresh-and-auto-save\"\r\n            palette={palette}\r\n            onChange={handleChange}\r\n            detachable={true}\r\n          />\r\n        </ui.col>\r\n      </ui.row>\r\n    </MidiProvider>\r\n  )\r\n}\r\n\r\nexport default DetachablePaletteEditor\r\n\r\nconst DesignPreview = (props: any) => {\r\n  const { palette } = props\r\n  return (\r\n    <ui.col>\r\n      <ui.div>Header</ui.div>\r\n      <ui.div>\r\n        <p>{ui.loremIpsum.paragraphs(1)}</p>\r\n      </ui.div>\r\n      <ui.div>\r\n        <button>Primary</button>\r\n        <button>Secondary</button>\r\n      </ui.div>\r\n    </ui.col>\r\n  )\r\n}\r\n","import React from 'react'\nimport MidiControlledComponent from './MidiControlledComponent'\nimport * as ui from '@reactiff/ui-core'\nimport { MidiProvider } from '@reactiff/midi'\n\nimport { BrowserRouter as Router, Switch, Route, Link } from 'react-router-dom'\n\nimport './css/index.css'\nimport './css/orthogonal.css'\nimport './css/flex.css'\n\nimport DetachablePaletteEditor from './DetachablePaletteEditor'\n\n// import Css3D from './Css3D';\n\nconst App = () => {\n  return (\n    <Router>\n      <ui.row>\n        <ui.col minWidth={`140px`} padding={15}>\n          <ui.div sticky top={15}>\n            <nav>\n              <ul>\n                <li>\n                  <Link to='/'>Color Design</Link>\n                </li>\n              </ul>\n            </nav>\n          </ui.div>\n        </ui.col>\n\n        <ui.col grow alignSelfStretch padding={15}>\n          <MidiProvider>\n            <Switch>\n              <Route path='/'>\n                <DetachablePaletteEditor />\n              </Route>\n            </Switch>\n          </MidiProvider>\n        </ui.col>\n      </ui.row>\n    </Router>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}